webpackJsonp([0],[function(module,exports,__webpack_require__){(function(global){"use strict";module.exports=global.MK=__webpack_require__(1)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function($){__webpack_require__(4),__webpack_require__(5),__webpack_require__(6),__webpack_require__(2);var loader=__webpack_require__(7);window.rootPath=function(relativePath){return relativePath?relativePath.match(/^http/)?relativePath:(relativePath=relativePath.replace(/^(\.)*\//,""),"cn"===window._SLD&&relativePath.match(/^images\//)?"http://cdn1.mikecrm.com/"+relativePath:"./"+relativePath):null},__webpack_require__(8);var main=__webpack_require__(125)(__webpack_require__(127)),dmwCheck=main.dmwCheck,isMobile=main.isMobile,link="form/css/form.css";isMobile&&(link="form/css/formMobile.css"),loader.loadCSS(link+"?v="+(window._VER||""),function(){$(function(){main.init()})}),module.exports={isMobile:isMobile,dmwCheck:dmwCheck}}).call(exports,__webpack_require__(2))},,,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _loadCSS(href){function ready(cb){return doc.body?cb():void setTimeout(function(){ready(cb)})}function loadCB(){ss.addEventListener&&ss.removeEventListener("load",loadCB),callback&&callback(),ss.media=media||"all"}var media=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",callback=arguments[2],doc=window.document,ss=doc.createElement("link"),refs=doc.getElementsByTagName("head")[0].childNodes,ref=refs[refs.length-1],sheets=doc.styleSheets;ss.rel="stylesheet",ss.href=href,ss.media="only x",ready(function(){ref.parentNode.insertBefore(ss,ref.nextSibling)});var onloadcssdefined=function onloadcssdefined(cb){for(var resolvedHref=ss.href,i=sheets.length;i--;)if(sheets[i].href===resolvedHref)return cb();setTimeout(function(){onloadcssdefined(cb)})};return ss.addEventListener&&ss.addEventListener("load",loadCB),ss.onloadcssdefined=onloadcssdefined,onloadcssdefined(loadCB),ss}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery);exports["default"]={loadCSS:function(url,callback){for(var cssList=[].concat(url),i=0,len=cssList.length;i<len;i++)_loadCSS(cssList[i],"all",callback)},loadJS:function(url,callback){for(var jsList=[].concat(url),i=0,len=jsList.length;i<len;i++)jsList[i]&&_jquery2["default"].getScript(jsList[i],callback)}},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _config=__webpack_require__(9),_config2=_interopRequireDefault(_config),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_header=__webpack_require__(34),_header2=_interopRequireDefault(_header),_body=__webpack_require__(36),_body2=_interopRequireDefault(_body),_submit=__webpack_require__(118),_submit2=_interopRequireDefault(_submit),_copyright=__webpack_require__(121),_copyright2=_interopRequireDefault(_copyright),_succeed=__webpack_require__(122),_succeed2=_interopRequireDefault(_succeed),_errorHandler=__webpack_require__(123),_errorHandler2=_interopRequireDefault(_errorHandler),_hugeErrorHandler=__webpack_require__(124),_hugeErrorHandler2=_interopRequireDefault(_hugeErrorHandler),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore);exports["default"]={currentLang:_config2["default"].currentLang,lang:_config2["default"].lang,changeFormLang:_config2["default"].changeFormLang,utils:_utils2["default"],header:_header2["default"],body:_body2["default"],submit:_submit2["default"],copyright:_copyright2["default"],Succeed:_succeed2["default"],ErrorHandler:_errorHandler2["default"],HugeErrorHandler:_hugeErrorHandler2["default"],formStore:_formStore2["default"]},module.exports=exports["default"]},,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _saltPwd(pwd){var l=_lodash2["default"].chunk(RAW_SALT.split(""),2);return _lodash2["default"].forEach(l,function(info){pwd+=String.fromCharCode(parseInt(info.join(""),16))}),pwd}function init(){_LANG=navigator.language?navigator.language:navigator.userLanguage,_LANG_CODE=_tools2["default"].getLanCode(_LANG),_IS_IRO=!!_tools2["default"].parseURL(location.href).params.iro,_JHR=0,_RAW=null,_VST=null,_TOKEN=null,_OQ=null,_ORG_NAME=null,_META={},_UGC="",_QR="",_NEED_PWD=_JHR==-820,_extensions2["default"].init(),_resetMemoCache(),_pwd=null}function _resetMemoCache(){_header=null,_tail=null,_layout=null,_order=null,_components=null,_settings=null,_style=null,_convertStyle=!1,_logic=null,_hasPage=!1,_pages=null,_pageNum=0,_attachment=!1,_validMobile=!1,_sale=!1,_paymentType=null,_innerFormPay=!1,_shownComponents=null,positionIdx={},oldPositionIdx={},_defaultShown=null,_default_filling={}}function _updateMetaInfo(){if(_RAW&&(_META=_RAW._m),_META){var extPathStr="";_META.U&&("/"===_META.U.charAt(0)&&(extPathStr="."),_UGC=extPathStr+_META.U,window._CDN&&(_UGC=(0,_tools.cdnizer)(_UGC,!1)),_QR=_UGC.replace("/image/","/qr/")),_ORG_NAME=_META.CLN}_VST&&initGeoInfo(_VST)}function setAsRaw(rawObject,mode){var raw=rawObject.raw,vst=rawObject.vst,JHR=rawObject.JHR,token=rawObject.token,OQ=rawObject.OQ;_RAW=raw,_VST=vst,_JHR=JHR,_TOKEN=token,_OQ=OQ,_MODE=mode,_NEED_PWD=_NEED_PWD||_JHR==-820,_RAW&&(_LANG_CODE=_RAW.se&&_RAW.se.lang&&12!==_RAW.se.lang?+_RAW.se.lang:_VST&&_VST.lang?+_VST.lang:_tools2["default"].getLanCode(_LANG)),_resetMemoCache(),_updateMetaInfo()}function updateRawInfo(name,value){"RAW"===name?(_RAW=value,_RAW.se&&_RAW.se.lang&&12!==_RAW.se.lang&&(_LANG_CODE=+_RAW.se.lang),_resetMemoCache(),_updateMetaInfo()):"JHR"===name?(_JHR=value,_NEED_PWD=_NEED_PWD||_JHR==-820):"TOKEN"===name&&(_TOKEN=value)}function getRaw(){return _RAW}function getDepth(treeObj,rootId){var tI=0,optLen=treeObj.length,depth=0;for(tI;tI<optLen;tI++){for(var currentDepth=1,p_option=treeObj[tI];p_option&&+p_option.pId!==+rootId;){currentDepth++;var _index=_lodash2["default"].findIndex(treeObj,{id:p_option.pId});p_option=treeObj[_index]}currentDepth>depth&&(depth=currentDepth)}return depth}function getChildrenIn(treeObj,pId){var list=[];return _lodash2["default"].forEach(treeObj,function(info){info.pId===pId&&list.push(info)}),list}function getSubItem(list,id,isLeaf){var idList=[],childrenList=getChildrenIn(list,id);return 0===childrenList.length&&isLeaf?idList.push(id):_lodash2["default"].forEach(childrenList,function(info){idList.push(info.id),idList=idList.concat(getSubItem(list,info.id,!0))}),idList}function getTreeDepth(list,position,pid){var currentDepth=position,_pIdList=_lodash2["default"].uniq(getSubItem(list,pid,!1)),_subTree=[];return _lodash2["default"].forEach(list,function(info){_pIdList.indexOf(info.id)>-1&&_subTree.push(info)}),currentDepth+=getDepth(_subTree,pid)}function initGeoInfo(VST){_GEO_CACHE_LIB=[],_IP_GEO_INFO=[],_GEO_PID_LOADED_FLAGS={},VST&&(VST.ipLocI&&(_IP_GEO_INFO.push(VST.ipLocI),VST.ipLocII&&(_IP_GEO_INFO.push(VST.ipLocII),VST.ipLocIII&&_IP_GEO_INFO.push(VST.ipLocIII))),VST.mpLoc&&_lodash2["default"].forEach(VST.mpLoc,function(info,id){var pId=null;_IP_GEO_INFO.indexOf(id)>0&&(pId=_IP_GEO_INFO[_IP_GEO_INFO.indexOf(id)-1]),_GEO_CACHE_LIB.push({id:+id,name:info[_LANG_CODE]||info[3],pId:pId})})),_MGDebugger2["default"].log("init Geo Info:: \n",_GEO_CACHE_LIB,_IP_GEO_INFO,_GEO_PID_LOADED_FLAGS)}function getIpLoc(){return _IP_GEO_INFO}function hasGeoCache(pId){return void 0!==_GEO_PID_LOADED_FLAGS[pId]}function getGeoCache(pId){return _GEO_PID_LOADED_FLAGS[pId]}function addGeoInfo(id,pid,name){getGeoInfo(id)||_GEO_CACHE_LIB.push({id:+id,pId:pid,name:name})}function setGeoCache(pId,info){_GEO_PID_LOADED_FLAGS[pId]=info,_lodash2["default"].forEach(info,function(data){_GEO_CACHE_LIB.push({id:+data.id,name:data.name,pId:pId})})}function getGeoInfo(id){return _lodash2["default"].find(_GEO_CACHE_LIB,{id:+id})}function getFormWidth(){return(_RAW||{}).w||1/0}function getOrgName(){return _ORG_NAME}function getPassword(pwd){return void 0!==pwd&&(_pwd=(0,_md2["default"])(_saltPwd(pwd))),_pwd}function token(){return _TOKEN}function JHR(){return _JHR}function QR(){return 1===_MODE&&null!=window._LFP&&!window._CDN&&window._LFP<.3?(0,_tools.selfCdnizer)(_QR+token()+".png"):_QR+token()+".png"}function formCacheId(){return token()?"FR_"+token()+"_":null}function getLangCode(){return _LANG_CODE}function getHeader(){if(_header&&!_lodash2["default"].isEmpty(_header))return _header;if(!_RAW||!_RAW.h)return{};if(_header=(0,_FormConvertUtil.convertHeader)(_RAW.h,_UGC),1===_MODE&&null!=window._LFP&&!window._CDN){var _LFP=Math.max(0,window._LFP);_LFP<1&&_header&&_header.logo&&0===_header.logo.indexOf(_UGC)&&Math.round(_lodash2["default"].random(0,.4)+1-_LFP)&&(_header.logo=(0,_tools.selfCdnizer)(_header.logo))}return _header}function getTail(){if(_tail&&!_lodash2["default"].isEmpty(_tail))return _tail;if(!_RAW||!_RAW.t)return null;var _tailInfo=(0,_FormConvertUtil.convertTail)(_RAW.t,_UGC);return _tail={},_lodash2["default"].forEach(_tailInfo,function(val,key){void 0!==val&&(_tail[key]=val)}),_tail}function getStyle(type){if(_convertStyle)return type?_style[type]:_style;if(!_RAW||!_RAW.st)return type?"lineHeight"===type?14:null:{lineHeight:14};var _styleInfo=(0,_FormConvertUtil.convertStyle)(_RAW.st,_UGC,_TEMPLATE_CDN);_convertStyle=!0,_style={},_lodash2["default"].forEach(_styleInfo,function(val,key){void 0!==val&&(_style[key]=val)});var opacityArray=["",1,.9,.8,.7,.6,.5,.4,.3,.2,.1,0];if(_style.bgOpacity&&(_style.bgOpacityValue=opacityArray[+_style.bgOpacity]),_style.headerStyle&&_style.headerStyle.bgOpacity&&(_style.headerStyle.bgOpacityValue=opacityArray[+_style.headerStyle.bgOpacity]),_style.bodyStyle&&_style.bodyStyle.bgOpacity&&(_style.bodyStyle.bgOpacityValue=opacityArray[+_style.bodyStyle.bgOpacity]),_style.submitStyle&&_style.submitStyle.bgOpacity&&(_style.submitStyle.bgOpacityValue=opacityArray[+_style.submitStyle.bgOpacity]),1===_MODE&&null!=window._LFP&&!window._CDN){var _LFP=Math.max(0,window._LFP);_LFP<1&&(_style.background&&0===_style.background.indexOf(_UGC)&&Math.round(_lodash2["default"].random(0,.32)+1-_LFP)&&(_style.background=(0,_tools.selfCdnizer)(_style.background)),_style.headerStyle&&_style.headerStyle.background&&0===_style.headerStyle.background.indexOf(_UGC)&&Math.round(_lodash2["default"].random(0,.3)+1-_LFP)&&(_style.headerStyle.background=(0,_tools.selfCdnizer)(_style.headerStyle.background)),_style.submitStyle&&_style.submitStyle.background&&0===_style.submitStyle.background.indexOf(_UGC)&&Math.round(_lodash2["default"].random(0,.3)+1-_LFP)&&(_style.submitStyle.background=(0,_tools.selfCdnizer)(_style.submitStyle.background)))}return type?_style[type]:_style}function getSettings(type){if(_settings&&!_lodash2["default"].isEmpty(_settings))return type?_settings[type]:_settings;if(!_RAW||!_RAW.se)return type?null:{};var _settingsInfo=(0,_FormConvertUtil.convertSettings)(_RAW.se,_UGC);return _settings={},_lodash2["default"].forEach(_settingsInfo,function(val,key){void 0!==val&&(_settings[key]=val)}),type?_settings[type]:_settings}function getLayout(){return _layout?_layout:_RAW&&_RAW.cpl&&_RAW.cpo?(_layout=(0,_FormViewerUtil.convertLayout)(_RAW.cpl,_RAW.cpo,getLogic()||!1),_order=_lodash2["default"].map(_RAW.cpo.split(";"),function(id){return+id}),_layout):{}}function getLogic(){return _RAW&&_RAW.ext&&_extensions2["default"].convertExt(_RAW.ext),_logic?_logic:_RAW&&_RAW.ext?(_extensions2["default"].convertExt(_RAW.ext),_logic=_extensions2["default"].getLogic()):null}function isAuthorizedWx(){return _VST&&_VST.uvd&&_VST.uvd.wc}function processUvdContactInfo(){if(_VST&&_VST.uvd&&(_VST.uvd.ct||_VST.uvd.wc)){var _ctInfo=_VST.uvd.ct||{};if(_VST.uvd.wc){var nickName=_VST.uvd.wc.nickname||"";!_ctInfo[_FormMetaInfoMappingUtil.COMPONENT_METAID_MAPPING.wechat]&&nickName&&(_ctInfo[_FormMetaInfoMappingUtil.COMPONENT_METAID_MAPPING.wechat]=nickName)}_uvdContactInfo=getUvdComponentInfo(_ctInfo)}}function getUvdComponentInfo(data){var _res={};return _lodash2["default"].forEach(data,function(info,typeKey){info&&(_res[_FormMetaInfoMappingUtil.METAID_COMPONENT_MAPPING[typeKey]]=info)}),_res}function updateUvdContactInfo(data){var _ctInfo=data;if(_VST&&_VST.uvd&&(_VST.uvd.ct||_VST.uvd.wc)&&_VST.uvd.wc){var nickName=_VST.uvd.wc.nickname||"";!_ctInfo[_FormMetaInfoMappingUtil.COMPONENT_METAID_MAPPING.wechat]&&nickName&&(_ctInfo[_FormMetaInfoMappingUtil.COMPONENT_METAID_MAPPING.wechat]=nickName)}_uvdContactInfo=getUvdComponentInfo(_ctInfo)||{}}function getUvdContactInfo(){return _uvdContactInfo}function isFillingComponent(type){return _FormMetaInfoMappingUtil.FORM_FILLING_COMPONENT_LIST.indexOf(type)>-1}function formInfoInit(){var layout=getLayout();getComponents();var logic=getLogic();_innerFormPay=_extensions2["default"].getInnerFormPay(),_paymentType=(_innerFormPay.info.payOnlineMethod||[1,2])[0],getLangCode(),processUvdContactInfo();var hasPage=!1,hasAttachment=!1,validMobile=null,pages=[],_tempPage=[];_lodash2["default"].forEach(layout,function(data){if("normal"===data.type){var componentData=getComponents(+data.id);componentData&&("paging"===componentData.type?(hasPage=!0,pages.push(_tempPage),_tempPage=[]):("attachment"!==componentData.type&&"picAttachment"!==componentData.type&&"avatar"!==componentData.type||(hasAttachment=!0),"mobile"===componentData.type&&componentData.isSendMsgAuth&&(validMobile=data.id),_tempPage.push(data)))}else data.children&&_lodash2["default"].forEach(data.children,function(chId){var componentData=getComponents(chId);componentData&&("attachment"!==componentData.type&&"picAttachment"!==componentData.type&&"avatar"!==componentData.type||(hasAttachment=!0),"mobile"===componentData.type&&componentData.isSendMsgAuth&&(validMobile=chId))}),_tempPage.push(data)}),_lodash2["default"].isEmpty(_tempPage)||pages.push(_tempPage),_hasPage=hasPage,_pages=pages,_attachment=hasAttachment,_validMobile=validMobile;var processed=!1;logic&&logic.defaultShown&&!_lodash2["default"].isEmpty(logic.defaultShown)&&!function(){processed=!0;var _defaultComponents=[];_lodash2["default"].forEach(layout,function(data){"normal"===data.type?logic.defaultShown.indexOf(data.id)>-1?(_defaultComponents.push(data.id),positionIdx[data.id]=_order.indexOf(data.id)):"paging"===getComponents(data.id).type&&(_defaultComponents.push(data.id),positionIdx[data.id]=_order.indexOf(data.id)):"squeezeBox"===data.type}),_defaultShown=_defaultComponents,_lodash2["default"].forEach(_defaultShown,function(id){setComponentPositionIdx(_default_filling,id,positionIdx[id],1)}),_shownComponents=generPage()}(),processed||(_shownComponents=_pages)}function changeShownComponent(fillData){var logic=getLogic();return!(!logic||!logic.defaultShown||_lodash2["default"].isEmpty(logic.defaultShown))&&(oldPositionIdx=_lodash2["default"].assign({},positionIdx),positionIdx={},_lodash2["default"].forEach(_defaultShown,function(id){positionIdx[id]=_order.indexOf(id),setComponentPositionIdx(fillData,id,positionIdx[id],1)}),_shownComponents=generPage(),!0)}function generPage(){var _order=Object.keys(positionIdx).sort(function(a,b){return positionIdx[a]-positionIdx[b]}),pages=[],_tempPage=[];return _lodash2["default"].forEach(_order,function(id){var componentData=getComponents(+id);"paging"!==componentData.type?_tempPage.push({type:"normal",id:+id}):(_tempPage.length>0&&pages.push(_tempPage),_tempPage=[])}),_tempPage.length>0&&pages.push(_tempPage),pages}function _getId(id,optId){var res=null,component=getComponents(id),_id=+optId;return _lodash2["default"].isPlainObject(optId)&&(_id=optId.id),_lodash2["default"].forEach(component.options,function(info){if(_MGDebugger2["default"].log(optId),+info.sId===_id)return res=info.id,!1}),null===res&&_id===+component.otherId&&(res=0),res}function setComponentPositionIdx(filling,id,currentIdx,offset){var _data=filling[id];_data||filling.hasOwnProperty(id)||(_data=_default_filling[id]);var needProcess=[];_lodash2["default"].isArray(_data)?(_lodash2["default"].forEach(_data,function(optId){if(_data&&_logic&&_logic.info&&_logic.info[id]){var _logicInfo=_logic.info[id][_getId(id,optId)];_logicInfo&&(needProcess=needProcess.concat(_logicInfo))}}),needProcess=_lodash2["default"].uniq(needProcess)):_data&&needProcess.push(_data),needProcess&&needProcess.length>0&&_lodash2["default"].forEach(needProcess,function(_showId){var _idx=_order.indexOf(_showId);if(_idx>-1&&!positionIdx[_showId])if(oldPositionIdx&&oldPositionIdx[_showId])positionIdx[_showId]=oldPositionIdx[_showId],setComponentPositionIdx(filling,_showId,positionIdx[_showId],offset);else if(_idx>currentIdx)positionIdx[_showId]=_idx,setComponentPositionIdx(filling,_showId,_idx,offset);else{var _positionIdx=Math.round(currentIdx*(10*offset)+_idx)/(10*offset);positionIdx[_showId]=_positionIdx,setComponentPositionIdx(filling,_showId,_positionIdx,10*offset)}})}function hasAttachmentComponent(){return _attachment}function getValidMobile(){return _validMobile}function hasPage(){return _hasPage}function getPageNum(){return _shownComponents.length}function getCurrentComponentPageNum(componentId){var _res=0;return _shownComponents.length>1&&hasPage&&_lodash2["default"].forEach(_shownComponents,function(page,num){if(page.indexOf(componentId)>-1)return _res=componentId,!1}),_res}function getPage(pageNum){pageNum<0?pageNum=0:pageNum>_shownComponents.length-1&&(pageNum=_shownComponents.length-1),_pageNum=pageNum;var _currentComponents=_shownComponents[pageNum];return _lodash2["default"].isEmpty(_currentComponents)?_shownComponents[0]:_currentComponents}function hasNextPage(pageNum){for(var _res=!1,i=pageNum,len=_shownComponents.length;i<len;i++)if(_shownComponents[i]&&!_lodash2["default"].isEmpty(_shownComponents[i])){_res=!0;break}return _res}function getPageStartOffset(pageNum){for(var res=0,i=0;i<pageNum;i++)_shownComponents[i]&&!_lodash2["default"].isEmpty(_shownComponents[i])&&(res+=_shownComponents[i].length);return res}function hasSale(){return _sale&&_sale.length>0}function getCommodities(){return _sale}function processCart(fillData,extFn){var _cartInfo=[];return _lodash2["default"].forEach(_sale,function(cid){fillData[cid]&&!function(){var component=getComponents(cid);_lodash2["default"].forEach(fillData[cid],function(num,sId){if(num&&num>0){var _commodity=_lodash2["default"].find(component.commodities,{sId:+sId}),price=Math.round(100*+_commodity.price),res={sId:+sId,name:_commodity.name||"",price:price,num:+num,total:Math.round(price*+num)/100};extFn&&(res=extFn(res)),_cartInfo.push(res)}})}()}),_cartInfo}function setPaymentType(type){_paymentType=+type}function getPaymentType(){return _paymentType}function isInnerFormPay(){return _innerFormPay.isInnerFormPay}function getInnerFormPayInfo(){return _extensions2["default"].getInnerFormPay().info}function convertRawComponentData(){if(_default_filling={},_RAW&&!_lodash2["default"].isEmpty(_RAW.cp)){var _imgNum=[];if(_components=(0,_FormViewerUtil.convertComponentData)(_RAW.cp,_UGC,function(data){var oqInfo=_OQ?_OQ.SO:null;if("commodity"===data.type&&_OQ&&(oqInfo=_OQ.SL),data.isLimitOptions&&oqInfo&&oqInfo[data.id]&&(data.optionsQuotaInfo=oqInfo[data.id]),"rank"===data.type&&data.options&&!function(){var _newOpts=[],_newOptIds=[];_lodash2["default"].forEach(data.options,function(opt){_newOptIds.indexOf(opt.sId)===-1&&(_newOptIds.push(opt.sId),_newOpts.push(opt))}),data.options=_newOpts}(),"avatar"===data.type&&(data.fileSize="8",data.isLimitFileSize=1),"IM"!==data.type&&"SNS"!==data.type||data.hasOwnProperty("isAcceptMulti")||(data.isAcceptMulti=!0),data.isRandomOptions&&(data.options=_lodash2["default"].shuffle(data.options)),"multiLevel"===data.type&&!function(){var style=getStyle();style&&(style=style.bodyStyle||{}),data.widthInfo={},_lodash2["default"].forEach(data.options,function(info){1!==info.type&&2!==info.type||(data.widthInfo[info.id]=_MGString2["default"].getWidth(info.content,(style.optionFontSize||14)+"px/1 "+_FONT))})}(),"commodity"===data.type&&(_sale||(_sale=[]),_sale.push(data.id)),fillingDefaultValue(data),1===_MODE)switch(data.type){case"picRadio":case"picCheckbox":_lodash2["default"].forEach(data.options,function(info){info&&info.image&&info.image.imageUri&&_imgNum.push(info.image.imageUri)});break;case"staticPic":_lodash2["default"].forEach(data.pictures,function(info){info&&info.imageUri&&_imgNum.push(info.imageUri)});break;case"commodity":_lodash2["default"].forEach(data.commodities,function(info){info&&info.image&&info.image.imageUri&&_imgNum.push(info.image.imageUri)})}return data},_TEMPLATE_CDN),_MGDebugger2["default"].log(_imgNum),_imgNum.length>0&&1===_MODE&&window._LFP&&!window._CDN){var _LFP=Math.max(0,window._LFP);_LFP<1&&!function(){var _D_CDN_LIST=void 0;_D_CDN_LIST=_LFP>0?_lodash2["default"].shuffle(_imgNum).slice(0,Math.round(_imgNum.length*(1-_LFP)+_lodash2["default"].random(0,.3))):_imgNum,_MGDebugger2["default"].log(_D_CDN_LIST),_lodash2["default"].forEach(_components,function(data,id){switch(data.type){case"picRadio":case"picCheckbox":_components[id].options=_lodash2["default"].map(data.options,function(info){return info&&info.image&&info.image.imageUri&&_D_CDN_LIST.indexOf(info.image.imageUri)>-1&&(info.image.imageUri=(0,_tools.selfCdnizer)(info.image.imageUri),info.image.imageFullUri=(0,_tools.selfCdnizer)(info.image.imageFullUri)),info});break;case"staticPic":_components[id].pictures=_lodash2["default"].forEach(data.pictures,function(info){return info&&info.imageUri&&_D_CDN_LIST.indexOf(info.imageUri)>-1&&(info.imageUri=(0,_tools.selfCdnizer)(info.imageUri)),info});break;case"commodity":_components[id].commodities=_lodash2["default"].forEach(data.commodities,function(info){return info&&info.image&&info.image.imageUri&&_D_CDN_LIST.indexOf(info.image.imageUri)>-1&&(info.image.imageUri=(0,_tools.selfCdnizer)(info.image.imageUri),info.image.imageFullUri=(0,_tools.selfCdnizer)(info.image.imageFullUri)),info})}})}()}_MGDebugger2["default"].log(JSON.stringify(_components,null,2))}}function fillingDefaultValue(data){var temp=void 0;!function(){switch(data.type){case"radio":case"checkbox":case"dropDown":case"picRadio":case"picCheckbox":case"title":case"gender":data.optionsDefaultValue&&(temp=[],_lodash2["default"].forEach(data.options,function(info){if(info.isDefaultValue){if(data.isLimitOptions&&data.isShowOptionLimit&&data.optionsQuotaInfo&&info.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[info.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0)return!0}temp.push(info.sId)}}));break;case"multiLevel":temp=[];var _lvlSelected=[],_selectedInfo=[],_setDefaultSelect=function _setDefaultSelect(pId){var lvl=getChildrenIn(data.options,pId);_lodash2["default"].forEach(lvl,function(info){if(info.defaultValue){var len=_lvlSelected.length,_currentDepth=getTreeDepth(data.options,len,pId);return _lvlSelected.push(info.id),_selectedInfo.push(info),(_currentDepth===_lvlSelected.length||data.isAllowPartEmpty)&&(temp=[{current:_selectedInfo,id:info.sId}]),_currentDepth>_lvlSelected.length&&_setDefaultSelect(info.id),!1}})};_setDefaultSelect(null),_lodash2["default"].isEmpty(temp)&&(temp=[{current:_selectedInfo,id:null}]);break;case"dateTime_date":case"dateTime_time":case"dateTime_both":var dayDefault=data.dayDefault,defaultDay=data.defaultDay,timeDefault=data.timeDefault,defaultTime=data.defaultTime,dayTimeDefault=data.dayTimeDefault,defaultDayTime=data.defaultDayTime,currentMoment=(0,_MGMoment2["default"])();if("dateTime_date"===data.type||void 0===data.type)switch(dayDefault){case"2":temp=currentMoment.getFullDate();break;case"3":temp=currentMoment.add(-1,"D").getFullDate();break;case"4":temp=currentMoment.add(1,"D").getFullDate();break;case"5":temp=currentMoment.month();break;case"6":temp=currentMoment.year();break;case"-1":temp=defaultDay||null}else if("dateTime_time"===data.type){if("2"===timeDefault?temp=currentMoment.getTime():"-1"===timeDefault&&(temp=defaultTime||null),temp&&data.timePrecision&&temp.match(/[:]/)){var _time=_lodash2["default"].trim(temp),_resTime=_time.split(":");_resTime=_resTime.concat("00","00").slice(0,data.timePrecision).concat("00","00").slice(0,3).join(":"),temp=_resTime}}else if("dateTime_both"===data.type&&("2"===dayTimeDefault?temp=currentMoment.getFullDateTime():"-1"===dayTimeDefault&&(temp=defaultDayTime||null),temp&&data.timePrecision&&temp.match(/[:]/)&&temp.match(/[\s]/))){var _temp$split=temp.split(/[\s]/),_temp$split2=_slicedToArray(_temp$split,2),_date=_temp$split2[0],_time2=_temp$split2[1],_resTime2=_time2.split(":");_resTime2=_resTime2.concat("00","00").slice(0,+data.timePrecision).concat("00","00").slice(0,3).join(":"),temp=_date+" "+_resTime2}break;case"rate":temp=+data.rateDefault;break;case"tabular":temp={},2===+data.tabularType||1===+data.tabularType||void 0===data.tabularType?_lodash2["default"].forEach(data.options,function(info){info.isDefaultValue&&_lodash2["default"].forEach(data.questions,function(question){temp[question.id]||(temp[question.id]=[]),temp[question.id].push(data.ql2sMapping[question.id][info.id])})}):4===+data.tabularType&&data.rateDefault&&_lodash2["default"].forEach(data.questions,function(question){temp[question.id]=+data.rateDefault})}}(),temp&&(_lodash2["default"].isObject(temp)||_lodash2["default"].isArray(temp)?_lodash2["default"].isEmpty(temp)||(_default_filling[data.id]=temp):_default_filling[data.id]=temp)}function setDefaultValue(value){var _checkedFillingData={};_lodash2["default"].forEach(value,function(info,id){var component=getComponents(id),temp=void 0,_ret7=function(){switch(component.type){case"radio":case"checkbox":case"dropDown":case"picRadio":case"picCheckbox":case"title":case"gender":_lodash2["default"].isEmpty(info)||!function(){temp=[];var infoIdList=_lodash2["default"].map(info,function(i){return _lodash2["default"].isArray(i)?+i[0]:_lodash2["default"].isPlainObject(i)?+i.id:+i});if(_lodash2["default"].forEach(component.options,function(opt){if(infoIdList.indexOf(opt.sId)>-1){if(component.isLimitOptions&&component.optionsQuotaInfo&&opt.sId in component.optionsQuotaInfo){var _quotaInfo=component.optionsQuotaInfo[opt.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0)return!0}temp.push(info[infoIdList.indexOf(opt.sId)])}}),component.isAddOtherOption&&infoIdList.indexOf(component.otherId)>-1){var _remaining=1;if(component.isLimitOptions&&component.optionsQuotaInfo&&component.otherId in component.optionsQuotaInfo){var _quotaInfo=component.optionsQuotaInfo[component.otherId];_remaining=_quotaInfo[1]-_quotaInfo[0]}_remaining>0&&temp.push(info[infoIdList.indexOf(component.otherId)])}_checkedFillingData[id]=temp}();break;case"rate":+component.rateMax<info?_checkedFillingData=+component.rateMax:_checkedFillingData[id]=info;break;case"tabular":1===+component.tabularType||2===+component.tabularType||void 0===component.tabularType?(temp={},_lodash2["default"].forEach(info,function(selectedSId,queId){_lodash2["default"].find(component.questions,{id:+queId})&&component.ql2sMapping[+queId]&&selectedSId&&_lodash2["default"].isArray(selectedSId)&&!_lodash2["default"].isEmpty(selectedSId)&&!function(){var _newSelected=[];_lodash2["default"].forEach(component.ql2sMapping[+queId],function(_sId){selectedSId.indexOf(+_sId)>-1&&_newSelected.push(+_sId)}),_lodash2["default"].isEmpty(_newSelected)||(temp[queId]=_newSelected)}()}),_lodash2["default"].isEmpty(temp)||(_checkedFillingData[id]=temp)):_checkedFillingData[id]=info;break;case"rank":temp=info,_lodash2["default"].forEach(info,function(_sid){if(!_lodash2["default"].find(component.options,{sId:_sid}))return temp=null,!1}),temp&&(_checkedFillingData[id]=temp);break;case"commodity":temp={},_lodash2["default"].forEach(info,function(num,_sid){if(_lodash2["default"].find(component.commodities,{sId:+_sid}))if(component.isLimitOptions&&component.isLimitStock&&_sid in component.optionsQuotaInfo){var _quotaInfo=component.optionsQuotaInfo[_sid],_remaining=!0;(_lodash2["default"].isNumber(_quotaInfo[2])||_lodash2["default"].isNumber(_quotaInfo[1]))&&(_remaining=Math.min(_quotaInfo[2]||1/0,_quotaInfo[1]||1/0)-(_quotaInfo[0]||0)),_lodash2["default"].isNumber(_remaining)&&_remaining>0?temp[+_sid]=Math.min(_remaining,num):_remaining&&(temp[+_sid]=num)}else temp[+_sid]=num}),_lodash2["default"].isEmpty(temp)||(_checkedFillingData[id]=temp);break;case"multiLevel":temp=[];var _lvlSelected=[],_setDefaultSelect=function _setDefaultSelect(pId){var lvl=getChildrenIn(component.options,pId);_lodash2["default"].forEach(lvl,function(info){if(info.defaultValue){var len=_lvlSelected.length,_currentDepth=getTreeDepth(component.options,len,pId);return _lvlSelected.push(info.id),(_currentDepth===_lvlSelected.length||component.isAllowPartEmpty)&&(temp=[info.sId]),_currentDepth>_lvlSelected.length&&_setDefaultSelect(info.id),!1}})};_setDefaultSelect(null),_lodash2["default"].isEmpty(temp)||(_checkedFillingData[id]=temp);break;case"mobile":if(component.isSendMsgAuth){if(_lodash2["default"].isArray(info))return _checkedFillingData[id]={mobile:info[0]||""},{v:void 0}}else if(_lodash2["default"].isPlainObject(info))return _checkedFillingData[id]=[info.mobile||0],{v:void 0};_checkedFillingData[id]=info;break;case"company":case"department":case"position":1===+component.searchComponentType||void 0===component.searchComponentType?_lodash2["default"].isArray(info)?_checkedFillingData[id]="":_checkedFillingData[id]=info:_lodash2["default"].isString(info)?_checkedFillingData[id]=[]:_checkedFillingData[id]=[].concat(info);break;case"name":if(info&&_lodash2["default"].isPlainObject(info))if(component.isOpenDetails)!function(){var LegalNameInfo={};_lodash2["default"].forEach(_FORM_COMPONENTS_NAME_DETAILS,function(nameDetails){(component.detailsItem||[2,4]).indexOf(+nameDetails.id)>-1&&info[nameDetails.name]&&(LegalNameInfo[nameDetails.name]=info[nameDetails.name])}),_checkedFillingData[id]=LegalNameInfo}();else{var combineName=null;info.n&&(combineName=info.n,_checkedFillingData[id]={n:combineName})}break;case"address":2===data.componentType?_checkedFillingData[id]={content:info.content,struct:null}:_checkedFillingData[id]=info;break;case"location":2!==data.componentType?_checkedFillingData[id]={struct:info.struct}:_checkedFillingData[id]={content:info.content||""};break;default:_checkedFillingData[id]=info}}();if("object"===("undefined"==typeof _ret7?"undefined":_typeof(_ret7)))return _ret7.v}),_default_filling=_lodash2["default"].assign({},_default_filling,_checkedFillingData)}function getDefaultValue(){return _default_filling}function getCurrentAll(){var _idList=[];return _lodash2["default"].forEach(_shownComponents[_pageNum],function(info){"normal"===info.type?_idList.push(info.id):"squeezeBox"===info.type&&_lodash2["default"].forEach(info.children,function(sqId){_idList.push(sqId)})}),_idList}function getActive(pageMode){var _idList=[],_activeComponents=pageMode?_shownComponents[_pageNum]:_lodash2["default"].flatten(_shownComponents);return _lodash2["default"].forEach(_activeComponents,function(info){"normal"===info.type?_idList.push(info.id):"squeezeBox"===info.type&&_lodash2["default"].forEach(info.children,function(sqId){_idList.push(sqId)})}),_idList}function getComponents(id){return _components||convertRawComponentData(),id?_lodash2["default"].isArray(id)?_lodash2["default"].map(id,function(_i){return _components[_i]||{}}):_components[id]||{}:_components}function setCacheReferrer(cacheRef){_referrer=cacheRef}function getSendMeta(){var _ext=_lodash2["default"].assign({},_extInfo);return _NEED_PWD&&(_ext.p=getPassword()),_lodash2["default"].assign({i:_META.I||"",t:_META.T||"",s:_META.FRS||"",acc:_META.ACC||"",r:_referrer||""},_ext)}function getCacheFilling(fillData){var _processedCacheFilling={};return _lodash2["default"].forEach(fillData,function(info,id){var componentInfo=getComponents(id);switch(componentInfo.type){
case"attachment":case"picAttachment":case"avatar":break;case"city":case"location":case"address":_processedCacheFilling[id]=info;break;case"mobile":_lodash2["default"].isPlainObject(info)&&componentInfo.isSendMsgAuth?info&&!_lodash2["default"].isEmpty(info)&&(_processedCacheFilling[id]={mobile:info.mobile}):_processedCacheFilling[id]=info;break;default:_processedCacheFilling[id]=info}}),_processedCacheFilling}function getSubmitData(fillData){var _processedFillData={},_changedContactInfoList=[];_lodash2["default"].forEach(fillData,function(info,id){if(!_logic||_lodash2["default"].isEmpty(positionIdx)||positionIdx.hasOwnProperty(id)){var componentInfo=getComponents(id),tempData=void 0,isContactInfo=_FormMetaInfoMappingUtil.FORM_CONTACT_INFO_COMPONENT_LIST.indexOf(componentInfo.type)>-1,_ret11=function(){switch(componentInfo.type){case"multiLevel":info&&!_lodash2["default"].isEmpty(info)&&(tempData=info[0],tempData=tempData.id&&tempData.value?[tempData.id,tempData.value]:tempData.id?tempData.id:null,tempData&&(_processedFillData[id]=tempData));break;case"checkbox":case"radio":case"picCheckbox":case"picRadio":case"dropDown":case"title":case"gender":if(tempData=[],_lodash2["default"].forEach(info,function(d,i){_lodash2["default"].isObject(d)?tempData.push([d.id,d.value]):tempData.push(d)}),["dropDown","radio","picRadio"].indexOf(componentInfo.type)>-1)tempData=tempData[0],void 0===tempData&&(tempData=null);else if(["title","gender"].indexOf(componentInfo.type)>-1){tempData=tempData[0];var _info=_lodash2["default"].find(componentInfo.options,{sId:tempData});_info?(isContactInfo&&_uvdContactInfo[componentInfo.type]!==_info.id&&_changedContactInfoList.push(id),tempData+=";"+_info.id):tempData=null}tempData&&(_lodash2["default"].isArray(tempData)&&_lodash2["default"].isEmpty(tempData)||(_processedFillData[id]=tempData));break;case"company":case"department":case"position":if(2===+componentInfo.searchComponentType||3===+componentInfo.searchComponentType){if(tempData=[],_lodash2["default"].forEach(info,function(d,i){_lodash2["default"].isPlainObject(d)?tempData.push([d.id,d.value]):tempData.push(d)}),tempData=tempData[0],void 0===tempData||null===tempData)return{v:!0};_processedFillData[id]=tempData}else isContactInfo&&_uvdContactInfo[componentInfo.type]!==info&&_changedContactInfoList.push(id),null!==info&&void 0!==info&&(_processedFillData[id]=info);break;case"rank":tempData=[],_lodash2["default"].forEach(info,function(_d){tempData.push(_d)}),_lodash2["default"].isEmpty(tempData)||(_processedFillData[id]=tempData);break;case"tabular":tempData={},_lodash2["default"].forEach(info,function(d,i){var newData=d;switch(+componentInfo.tabularType){case 2:break;case 3:break;case 4:newData=-newData;break;case 1:default:newData=newData[0]}tempData[i]=newData}),_lodash2["default"].isEmpty(tempData)||(_processedFillData[id]=tempData);break;case"attachment":case"picAttachment":case"avatar":break;case"city":case"location":if(info&&!_lodash2["default"].isEmpty(info)&&!_lodash2["default"].isEmpty(info.struct)&&(tempData=info.struct[info.struct.length-1]||null)){if(isContactInfo){var _contain=!1;_lodash2["default"].forEach(_uvdContactInfo[componentInfo.type],function(val){if(+val===+tempData)return _contain=!0,!1}),_contain||_changedContactInfoList.push(id)}_processedFillData[id]=tempData}break;case"address":info&&!_lodash2["default"].isEmpty(info)&&!function(){var _struct=null,_content=info.content||null,_zipCode=info.zipCode||null;if(info.struct&&!_lodash2["default"].isEmpty(info.struct)&&(_struct=info.struct[info.struct.length-1]||null),_struct||_content||_zipCode){var _sendContent=_content;if(_processedFillData[id]=[[_struct,_sendContent,_zipCode]],isContactInfo){var _contain2=!1;_uvdContactInfo[componentInfo.type]?(_lodash2["default"].forEach(_uvdContactInfo[componentInfo.type][0],function(val){if(+val===+_struct)return _contain2=!0,!1}),_contain2&&_content===_uvdContactInfo[componentInfo.type][1]&&_uvdContactInfo[componentInfo.type][2]===_zipCode||_changedContactInfoList.push(id)):_changedContactInfoList.push(id)}}}();break;case"number":case"currency":null!==info&&void 0!==info&&(_processedFillData[id]=Number(info));break;case"IM":case"SNS":var _groupInfoData={};_lodash2["default"].forEach(info,function(d){if(d.info&&_lodash2["default"].trim(d.info)){var _type=d.type;_groupInfoData[_type]||(_groupInfoData[_type]=[]),_groupInfoData[_type].push(d.info)}}),_lodash2["default"].isEmpty(_groupInfoData)||(_processedFillData[id]=_groupInfoData,_lodash2["default"].forEach(_groupInfoData,function(d,typeId){var _t=_FormMetaInfoMappingUtil.METAID_COMPONENT_MAPPING[typeId];if(_FormMetaInfoMappingUtil.METAID_COMPONENT_MAPPING[typeId]&&_uvdContactInfo[_t]!==d[0])return _changedContactInfoList.push(id),!1}));break;case"mobile":if(componentInfo.isSendMsgAuth&&info&&!_lodash2["default"].isEmpty(info))_lodash2["default"].trim(info.mobile)&&(info.verificationToken&&info.verificationCode&&info.verificationMobileToken?_processedFillData[id]=[{mb:info.mobile,vt:info.verificationToken,vc:info.verificationCode,vv:info.verificationMobileToken}]:info.verificationToken&&!info.verificationMobileToken?_processedFillData[id]=[{mb:info.mobile,vt:info.verificationToken}]:_processedFillData[id]=[{mb:info.mobile}],isContactInfo&&info.mobile!==_uvdContactInfo[componentInfo.type]&&_changedContactInfoList.push(id));else{var _tempData="";_lodash2["default"].forEach(info,function(d){_tempData+=d}),_lodash2["default"].trim(_tempData)&&(_processedFillData[id]=info,isContactInfo&&info&&!_lodash2["default"].isEmpty(info)&&info[0]!==_uvdContactInfo[componentInfo.type]&&_changedContactInfoList.push(id))}break;default:if(null!==info&&void 0!==info&&""!==info)if(_lodash2["default"].isPlainObject(info)||_lodash2["default"].isArray(info)){if(!_lodash2["default"].isEmpty(info))if(isContactInfo)if("name"===componentInfo.type){var _allContent="";_lodash2["default"].forEach(info,function(d){_allContent+=d}),_allContent&&(JSON.stringify(info)!==JSON.stringify(_uvdContactInfo[componentInfo.type])&&_changedContactInfoList.push(id),_processedFillData[id]=info)}else _lodash2["default"].isArray(info)?info.join("")&&(info[0]!==_uvdContactInfo[componentInfo.type]&&_changedContactInfoList.push(id),_processedFillData[id]=info):(info!==_uvdContactInfo[componentInfo.type]&&_changedContactInfoList.push(id),_processedFillData[id]=info);else{var _tempData2="";_lodash2["default"].forEach(info,function(v){_tempData2+=v}),_tempData2&&(_processedFillData[id]=info)}}else isContactInfo&&info!==_uvdContactInfo[componentInfo.type]&&_changedContactInfoList.push(id),_processedFillData[id]=info}}();return"object"===("undefined"==typeof _ret11?"undefined":_typeof(_ret11))?_ret11.v:void 0}});var content={cp:_processedFillData};if(_logic&&!_lodash2["default"].isEmpty(positionIdx)&&(content.ext||(content.ext={}),content.ext.sc=_lodash2["default"].map(Object.keys(positionIdx),function(id){return+id})),_changedContactInfoList.length>0&&(content.ext||(content.ext={}),content.ext.uvd=_lodash2["default"].map(_changedContactInfoList,function(v){return+v})),_innerFormPay&&_innerFormPay.isInnerFormPay){var _priceTotal=0,_cartInfo=processCart(fillData,function(data){return _priceTotal+=data.total,{price:data.price,num:data.num}});_cartInfo.length>0&&_priceTotal>0&&(content.ext||(content.ext={}),content.ext.cashier={c:1,tp:Math.round(_lodash2["default"].reduce(_cartInfo,function(pre,item){return pre+item.price*item.num},0))/100,m:_paymentType,d:_tools2["default"].fuzzyDeviceCheck?2:1},_MGDebugger2["default"].log("cashier..>\n",JSON.stringify(content.ext.cashier)))}return{cvs:_lodash2["default"].assign({},getSendMeta(),{c:content})}}function setInjectState(state){_scriptInjectForm=state}function canPostMessage(){return _tools2["default"].inIframe()&&_scriptInjectForm}function postMessage(data){return!!canPostMessage()&&(window.parent.postMessage(JSON.stringify(data),"*"),!0)}function run(){getLangCode(),null!==_JHR&&_RAW&&(getHeader(),getStyle(),getLayout(),getComponents(),getLogic())}function _getQueryKey(){for(var key=void 0;void 0===key||_EXIST.hasOwnProperty(key)||!isNaN(+key);)key=Math.floor(Math.random()*_QUERY_KEY_SOUL).toString(32);return _EXIST[key]=!0,key}function getParentInfo(query){return new Promise(function(resolve){_tools2["default"].inIframe()&&window.addEventListener&&_lodash2["default"].isArray(query)?!function(){var _callbackMessage=function _callbackMessage(evt){if(evt.data){var _d={};try{_d=JSON.parse(evt.data)}catch(e){}_d.queryRes&&_d.queryRes.hasOwnProperty(_KEY)&&(window.removeEventListener("message",_callbackMessage,!1),resolve(_d.queryRes))}},_KEY=_getQueryKey();window.addEventListener("message",_callbackMessage,!1);var _post=postMessage({getter:[{v:!1,n:_KEY}].concat(query)});_post||(window.removeEventListener("message",_callbackMessage,!1),resolve(null))}():resolve(null)})}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_config=__webpack_require__(9),_md=__webpack_require__(23),_md2=_interopRequireDefault(_md),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_FormMetaInfoMappingUtil=__webpack_require__(30),_FormConvertUtil=__webpack_require__(31),_FormViewerUtil=__webpack_require__(32),_extensions=__webpack_require__(33),_extensions2=_interopRequireDefault(_extensions),_FORM_COMPONENTS_NAME_DETAILS=(0,_FormMetaInfoMappingUtil.FORM_COMPONENTS_NAME_DETAILS)({np:_config.lang.cnamePrefix,nf:_config.lang.cnameFirst,nm:_config.lang.cnameMiddle,nl:_config.lang.cnameLast,ns:_config.lang.cnameSuffix,nn:_config.lang.cnameNick}),_EMOJI_FLAGS_MAPPING={1:"ðŸ‡¨ðŸ‡³",3250:"ðŸ‡¦ðŸ‡«",3251:"ðŸ‡¦ðŸ‡±",3252:"ðŸ‡©ðŸ‡¿",3253:"ðŸ‡¦ðŸ‡©",3254:"ðŸ‡¦ðŸ‡´",3255:"ðŸ‡¦ðŸ‡¬",3256:"ðŸ‡¦ðŸ‡·",3257:"ðŸ‡¦ðŸ‡²",3258:"ðŸ‡¦ðŸ‡º",3259:"ðŸ‡¦ðŸ‡¹",3260:"ðŸ‡¦ðŸ‡¿",3261:"ðŸ‡§ðŸ‡¸",3262:"ðŸ‡§ðŸ‡­",3263:"ðŸ‡§ðŸ‡©",3264:"ðŸ‡§ðŸ‡§",3265:"ðŸ‡§ðŸ‡¾",3266:"ðŸ‡§ðŸ‡ª",3267:"ðŸ‡§ðŸ‡¿",3268:"ðŸ‡§ðŸ‡¯",3269:"ðŸ‡§ðŸ‡¹",3270:"ðŸ‡§ðŸ‡´",3272:"ðŸ‡§ðŸ‡¼",3273:"ðŸ‡§ðŸ‡·",3274:"ðŸ‡§ðŸ‡³",3275:"ðŸ‡§ðŸ‡¬",3276:"ðŸ‡§ðŸ‡«",3277:"ðŸ‡§ðŸ‡®",3278:"ðŸ‡°ðŸ‡­",3279:"ðŸ‡¨ðŸ‡²",3280:"ðŸ‡¨ðŸ‡¦",3281:"ðŸ‡¨ðŸ‡»",3282:"ðŸ‡¨ðŸ‡«",3283:"ðŸ‡¹ðŸ‡©",3284:"ðŸ‡¨ðŸ‡±",3285:"ðŸ‡¨ðŸ‡´",3286:"ðŸ‡°ðŸ‡²",3287:"ðŸ‡¨ðŸ‡¬",3288:"ðŸ‡¨ðŸ‡©",3289:"ðŸ‡¨ðŸ‡°",3290:"ðŸ‡¨ðŸ‡·",3291:"ðŸ‡¨ðŸ‡®",3292:"ðŸ‡­ðŸ‡·",3293:"ðŸ‡¨ðŸ‡º",3294:"ðŸ‡¨ðŸ‡¾",3295:"ðŸ‡¨ðŸ‡¿",3296:"ðŸ‡©ðŸ‡°",3297:"ðŸ‡©ðŸ‡¯",3298:"ðŸ‡©ðŸ‡²",3299:"ðŸ‡©ðŸ‡´",3300:"ðŸ‡ªðŸ‡¨",3301:"ðŸ‡ªðŸ‡¬",3302:"ðŸ‡¸ðŸ‡»",3303:"ðŸ‡¬ðŸ‡¶",3304:"ðŸ‡ªðŸ‡·",3305:"ðŸ‡ªðŸ‡ª",3306:"ðŸ‡ªðŸ‡¹",3307:"ðŸ‡«ðŸ‡¯",3308:"ðŸ‡«ðŸ‡®",3309:"ðŸ‡«ðŸ‡·",3310:"ðŸ‡¬ðŸ‡¦",3311:"ðŸ‡¬ðŸ‡²",3312:"ðŸ‡¬ðŸ‡ª",3313:"ðŸ‡©ðŸ‡ª",3314:"ðŸ‡¬ðŸ‡­",3315:"ðŸ‡¬ðŸ‡·",3316:"ðŸ‡¬ðŸ‡©",3317:"ðŸ‡¬ðŸ‡¹",3318:"ðŸ‡¬ðŸ‡³",3319:"ðŸ‡¬ðŸ‡¼",3320:"ðŸ‡¬ðŸ‡¾",3321:"ðŸ‡­ðŸ‡¹",3322:"ðŸ‡­ðŸ‡³",3323:"ðŸ‡­ðŸ‡º",3324:"ðŸ‡®ðŸ‡¸",3325:"ðŸ‡®ðŸ‡³",3326:"ðŸ‡®ðŸ‡©",3327:"ðŸ‡®ðŸ‡·",3328:"ðŸ‡®ðŸ‡¶",3329:"ðŸ‡®ðŸ‡ª",3330:"ðŸ‡®ðŸ‡±",3331:"ðŸ‡®ðŸ‡¹",3332:"ðŸ‡¯ðŸ‡²",3333:"ðŸ‡¯ðŸ‡µ",3334:"ðŸ‡¯ðŸ‡´",3335:"ðŸ‡°ðŸ‡¿",3336:"ðŸ‡°ðŸ‡ª",3337:"ðŸ‡°ðŸ‡®",3338:"ðŸ‡°ðŸ‡·",3339:"ðŸ‡½ðŸ‡°",3340:"ðŸ‡°ðŸ‡¼",3341:"ðŸ‡°ðŸ‡¬",3342:"ðŸ‡±ðŸ‡¦",3343:"ðŸ‡±ðŸ‡»",3344:"ðŸ‡±ðŸ‡§",3345:"ðŸ‡±ðŸ‡¸",3346:"ðŸ‡±ðŸ‡·",3347:"ðŸ‡±ðŸ‡¾",3348:"ðŸ‡±ðŸ‡®",3349:"ðŸ‡±ðŸ‡¹",3350:"ðŸ‡±ðŸ‡º",3351:"ðŸ‡²ðŸ‡°",3352:"ðŸ‡²ðŸ‡¬",3353:"ðŸ‡²ðŸ‡¼",3354:"ðŸ‡²ðŸ‡¾",3355:"ðŸ‡²ðŸ‡»",3356:"ðŸ‡²ðŸ‡±",3357:"ðŸ‡²ðŸ‡¹",3358:"ðŸ‡²ðŸ‡­",3359:"ðŸ‡²ðŸ‡·",3360:"ðŸ‡²ðŸ‡º",3361:"ðŸ‡²ðŸ‡½",3362:"ðŸ‡«ðŸ‡²",3363:"ðŸ‡²ðŸ‡©",3364:"ðŸ‡²ðŸ‡¨",3365:"ðŸ‡²ðŸ‡³",3366:"ðŸ‡²ðŸ‡ª",3367:"ðŸ‡²ðŸ‡¦",3368:"ðŸ‡²ðŸ‡¿",3369:"ðŸ‡²ðŸ‡²",3371:"ðŸ‡³ðŸ‡¦",3372:"ðŸ‡³ðŸ‡·",3373:"ðŸ‡³ðŸ‡µ",3374:"ðŸ‡³ðŸ‡±",3375:"ðŸ‡³ðŸ‡¿",3376:"ðŸ‡³ðŸ‡®",3377:"ðŸ‡³ðŸ‡ª",3378:"ðŸ‡³ðŸ‡¬",3379:"ðŸ‡³ðŸ‡º",3381:"ðŸ‡³ðŸ‡´",3382:"ðŸ‡´ðŸ‡²",3383:"ðŸ‡µðŸ‡°",3384:"ðŸ‡µðŸ‡¼",3386:"ðŸ‡µðŸ‡¦",3387:"ðŸ‡µðŸ‡¬",3388:"ðŸ‡µðŸ‡¾",3389:"ðŸ‡°ðŸ‡µ",3390:"ðŸ‡µðŸ‡ª",3391:"ðŸ‡µðŸ‡­",3392:"ðŸ‡µðŸ‡±",3393:"ðŸ‡µðŸ‡¹",3395:"ðŸ‡¶ðŸ‡¦",3396:"ðŸ‡·ðŸ‡´",3397:"ðŸ‡·ðŸ‡º",3398:"ðŸ‡·ðŸ‡¼",3402:"ðŸ‡¼ðŸ‡¸",3403:"ðŸ‡¸ðŸ‡²",3405:"ðŸ‡¸ðŸ‡¦",3406:"ðŸ‡¸ðŸ‡³",3407:"ðŸ‡·ðŸ‡¸",3408:"ðŸ‡¸ðŸ‡¨",3409:"ðŸ‡¸ðŸ‡±",3410:"ðŸ‡¸ðŸ‡¬",3411:"ðŸ‡¸ðŸ‡°",3412:"ðŸ‡¸ðŸ‡®",3413:"ðŸ‡¸ðŸ‡§",3414:"ðŸ‡¸ðŸ‡´",3416:"ðŸ‡¿ðŸ‡¦",3418:"ðŸ‡¸ðŸ‡¸",3419:"ðŸ‡ªðŸ‡¸",3420:"ðŸ‡±ðŸ‡°",3421:"ðŸ‡¸ðŸ‡©",3422:"ðŸ‡¸ðŸ‡·",3423:"ðŸ‡¸ðŸ‡¿",3424:"ðŸ‡¸ðŸ‡ª",3425:"ðŸ‡¨ðŸ‡­",3426:"ðŸ‡¸ðŸ‡¾",3427:"ðŸ‡¹ðŸ‡¯",3428:"ðŸ‡¹ðŸ‡¿",3429:"ðŸ‡¹ðŸ‡­",3430:"ðŸ‡¹ðŸ‡±",3431:"ðŸ‡¹ðŸ‡¬",3432:"ðŸ‡¹ðŸ‡´",3434:"ðŸ‡¹ðŸ‡³",3435:"ðŸ‡¹ðŸ‡·",3436:"ðŸ‡¹ðŸ‡²",3437:"ðŸ‡¹ðŸ‡»",3438:"ðŸ‡ºðŸ‡¬",3439:"ðŸ‡ºðŸ‡¦",3440:"ðŸ‡¦ðŸ‡ª",3441:"ðŸ‡¬ðŸ‡§",3442:"ðŸ‡ºðŸ‡¸",3443:"ðŸ‡ºðŸ‡¾",3444:"ðŸ‡ºðŸ‡¿",3445:"ðŸ‡»ðŸ‡º",3447:"ðŸ‡»ðŸ‡ª",3448:"ðŸ‡»ðŸ‡³",3449:"ðŸ‡ªðŸ‡­",3450:"ðŸ‡¾ðŸ‡ª",3451:"ðŸ‡¿ðŸ‡²",3452:"ðŸ‡¿ðŸ‡¼",3453:"ðŸ‡¦ðŸ‡¸",3454:"ðŸ‡¦ðŸ‡®",3455:"ðŸ‡¦ðŸ‡¼",3456:"ðŸ‡§ðŸ‡²",3457:"ðŸ‡®ðŸ‡´",3458:"ðŸ‡°ðŸ‡¾",3459:"ðŸ‡¨ðŸ‡½",3460:"ðŸ‡¨ðŸ‡¨",3461:"ðŸ‡¨ðŸ‡¼",3462:"ðŸ‡«ðŸ‡°",3463:"ðŸ‡«ðŸ‡´",3464:"ðŸ‡µðŸ‡«",3465:"ðŸ‡¬ðŸ‡®",3466:"ðŸ‡¬ðŸ‡±",3467:"ðŸ‡¬ðŸ‡º",3468:"ðŸ‡¬ðŸ‡¬",3469:"ðŸ‡¯ðŸ‡ª",3470:"ðŸ‡®ðŸ‡²",3471:"ðŸ‡¾ðŸ‡¹",3472:"ðŸ‡²ðŸ‡¸",3473:"ðŸ‡³ðŸ‡¨",3474:"ðŸ‡³ðŸ‡«",3475:"ðŸ‡²ðŸ‡µ",3476:"ðŸ‡µðŸ‡³",3477:"ðŸ‡µðŸ‡·",3478:"ðŸ‡·ðŸ‡ª",3481:"ðŸ‡¸ðŸ‡½",3484:"ðŸ‡¹ðŸ‡°",3485:"ðŸ‡¹ðŸ‡¦",3487:"ðŸ‡»ðŸ‡¬"},SUPPORT_PAYMENT_METHOD=[{id:1,bgPosition:"0 -65px",name:_config.lang.gSupportPayMode[0]},{id:2,bgPosition:"0 -105px",name:_config.lang.gSupportPayMode[1]},{id:4,bgPosition:"0 -220px",smallBgPosition:"-184px -46px",name:_config.lang.gSupportPayMode[3]}],_FONT='"Helvetica Neue", Helvetica, "Nimbus Sans L", Arial, "Liberation Sans", "Hiragino Sans GB", "Source Han Sans CN", "Source Han Sans SC", "Microsoft YaHei", "Wenquanyi Micro Hei", "WenQuanYi Zen Hei", "ST Heiti", SimSun, "WenQuanYi Zen Hei Sharp", sans-serif';(0,_jquery2["default"])(".mac").length>0?_FONT='"Helvetica Neue", Helvetica, "Nimbus Sans L", "Liberation Sans", "PingFang SC", "Hiragino Sans GB", "Source Han Sans CN", "Source Han Sans SC", "Wenquanyi Micro Hei", "WenQuanYi Zen Hei", "ST Heiti", SimSun, "WenQuanYi Zen Hei Sharp", sans-serif':(0,_jquery2["default"])(".win").length>0&&(_FONT='"Helvetica Neue", Helvetica, "Nimbus Sans L", "Liberation Sans", "Microsoft YaHei", "Microsoft JhengHei", "Hiragino Sans GB", "Source Han Sans CN", "Source Han Sans SC", "Wenquanyi Micro Hei", "WenQuanYi Zen Hei", "ST Heiti", SimSun, "WenQuanYi Zen Hei Sharp", sans-serif');var RAW_SALT="6A5376385A4D6D4255666735494B566C5041585758675632244B3044555E266F26436F36255533684847535062582A446E58317A2A6B6B396C3338715331794A",_LANG=navigator.language?navigator.language:navigator.userLanguage,_LANG_CODE=_tools2["default"].getLanCode(_LANG),_IS_IRO=!!_tools2["default"].parseURL(location.href).params.iro,_JHR=0,_RAW=null,_VST=null,_TOKEN=null,_OQ=null,_ORG_NAME=null,_META={},_UGC="",_QR="",_MODE=0,_NEED_PWD=_JHR==-820,_header=null,_tail=null,_layout=null,_order=null,_components=null,_settings=null,_style=null,_convertStyle=!1,_TEMPLATE_CDN=!0,_logic=null,_hasPage=!1,_pages=null,_attachment=!1,_validMobile=!1,_sale=!1,_paymentType=null,_innerFormPay=!1,_shownComponents=null,_default_filling={},_pwd=null,_GEO_CACHE_LIB=[],_IP_GEO_INFO=[],_GEO_PID_LOADED_FLAGS={},_uvdContactInfo={},positionIdx={},oldPositionIdx={},_defaultShown=null,_pageNum=0,_referrer=document.referrer,_extInfo={},_scriptInjectForm=!1,_ie8=(0,_jquery2["default"])(".ie8").length>0,_ie9=(0,_jquery2["default"])(".ie9").length>0,_QUERY_KEY_SOUL=Math.pow(2,24),_EXIST={};exports["default"]={isIE8:_ie8,isIE9:_ie9,isOldIE:_ie8||_ie9,_IS_IRO:_IS_IRO,_FONT:_FONT,_LANG_CODE:_LANG_CODE,init:init,run:run,setAsRaw:setAsRaw,updateRawInfo:updateRawInfo,getRaw:getRaw,token:token,JHR:JHR,QR:QR,formCacheId:formCacheId,canPostMessage:canPostMessage,postMessage:postMessage,getLangCode:getLangCode,setCacheReferrer:setCacheReferrer,_EMOJI_FLAGS_MAPPING:_EMOJI_FLAGS_MAPPING,isAuthorizedWx:isAuthorizedWx,updateUvdContactInfo:updateUvdContactInfo,getUvdContactInfo:getUvdContactInfo,getIpLoc:getIpLoc,hasGeoCache:hasGeoCache,addGeoInfo:addGeoInfo,getGeoCache:getGeoCache,setGeoCache:setGeoCache,getGeoInfo:getGeoInfo,getParentInfo:getParentInfo,getHeader:getHeader,getTail:getTail,getLayout:getLayout,getComponents:getComponents,getSettings:getSettings,getStyle:getStyle,getFormWidth:getFormWidth,setDefaultValue:setDefaultValue,getDefaultValue:getDefaultValue,getCurrentAll:getCurrentAll,getActive:getActive,setInjectState:setInjectState,getChildrenIn:getChildrenIn,getTreeDepth:getTreeDepth,getPassword:getPassword,getOrgName:getOrgName,getSubmitData:getSubmitData,getCacheFilling:getCacheFilling,isFillingComponent:isFillingComponent,formInfoInit:formInfoInit,changeShownComponent:changeShownComponent,hasAttachmentComponent:hasAttachmentComponent,getValidMobile:getValidMobile,hasPage:hasPage,getPage:getPage,getPageNum:getPageNum,hasNextPage:hasNextPage,getCurrentComponentPageNum:getCurrentComponentPageNum,getPageStartOffset:getPageStartOffset,hasSale:hasSale,getCommodities:getCommodities,SUPPORT_PAYMENT_METHOD:SUPPORT_PAYMENT_METHOD,isInnerFormPay:isInnerFormPay,getInnerFormPayInfo:getInnerFormPayInfo,processCart:processCart,setPaymentType:setPaymentType,getPaymentType:getPaymentType},module.exports=exports["default"]},,,,,,,function(module,exports){"use strict";function _zeroFill(_number,_fixLen){_number+="";var _r="",_delta=_fixLen-_number.length;if(_delta>0)for(;_delta--;)_r+="0";return _r+_number}function _clip(_number,_fixLen){return(_number+"").substr(-1*_fixLen)}function _formatter(_number,len){return len>=(_number+"").length?_zeroFill(_number,len):_clip(_number,len)}var REGEX_DATE_FORMATTER=/(MM?M?M?|DD?D?D?|WW?|YYYY|YY|HH?|mm?|ss?|S{1,4}|.)/g,MGMoment=function(){function MGMoment(dateTime){this._replaceFunction={Y:function(length){return _formatter(this._year,length)},M:function(length){return _formatter(this._month+1,length)},D:function(length){return _formatter(this._date,length)},W:function(length){return _formatter(this._day+1,length)},H:function(length){return _formatter(this._hours,length)},m:function(length){return _formatter(this._minutes,length)},s:function(length){return _formatter(this._seconds,length)},S:function(length){return _formatter(this._seconds,length)}},this._Date=this._dateTimeFormatter(dateTime),this.__isMGMoment=!0,this._spliceDate()}return MGMoment.prototype._dateTimeFormatter=function(dt){var typeStr=Object.prototype.toString.call(dt);if("[object Date]"===typeStr)return new Date(dt);if("[object String]"===typeStr){var cnDateRes=dt.match(/\d+((ms)|[yMdhmså¹´æœˆæ—¥æ—¶åˆ†ç§’]|(æ¯«ç§’))/gi);if(cnDateRes&&cnDateRes.length>=3){var _dateInfo={y:0,M:0,d:0,h:0,m:0,s:0,ms:0},_dateInfoCN={"å¹´":"y","æœˆ":"M","æ—¥":"d","æ—¶":"h","åˆ†":"m","ç§’":"s","æ¯«ç§’":"ms"};return cnDateRes.forEach(function(v){var _cap=/(\d+)([yMdhmså¹´æœˆæ—¥æ—¶åˆ†ç§’]|(æ¯«ç§’))/.exec(v);_cap&&(void 0===_dateInfo[_cap[2]]?_dateInfo[_dateInfoCN[_cap[2]]]=_cap[1]:_dateInfo[_cap[2]]=_cap[1])}),new Date(_dateInfo.y,_dateInfo.M-1,_dateInfo.d,_dateInfo.h,_dateInfo.m,_dateInfo.s,_dateInfo.ms)}return this._normalizeStringDate(dt)}return"[object Number]"===typeStr?new Date(dt):null===dt||void 0===dt?new Date:"[object Object]"===typeStr&&dt.isMGMoment&&dt.isMGMoment()?new Date(dt.__getN()):void 0},MGMoment.prototype._normalizeStringDate=function(strDate){var dateArr=strDate.replace(/^\s+|\s+$/gm,"").replace(/([\-\_\:\s]+)/gm,"-").split("-"),_d=null;return strDate.match(/[\-\_]/im)?_d=dateArr.length>=3?new Date(dateArr[0],dateArr[1]-1,dateArr[2],dateArr[3]||"00",dateArr[4]||"00",dateArr[5]||"00"):new Date(strDate):(_d=new Date,_d.setHours(dateArr[0]),_d.setMinutes(dateArr[1]||0),_d.setSeconds(dateArr[2]||0),_d.setMilliseconds(0)),isNaN(_d.getTime())?new Date:_d},MGMoment.prototype._spliceDate=function(){this._year=this._Date.getFullYear(),this._month=this._Date.getMonth(),this._day=this._Date.getDay(),this._date=this._Date.getDate(),this._hours=this._Date.getHours(),this._minutes=this._Date.getMinutes(),this._seconds=this._Date.getSeconds(),this._ms=this._Date.getMilliseconds(),this._time=this._Date.getTime()},MGMoment.prototype._formateDate=function(formater){var arr=formater.match(REGEX_DATE_FORMATTER),a=arr.map(function(val){return this._replaceFunction[val[0]]?this._replaceFunction[val[0]].call(this,val.length):val}.bind(this));return a.join("")},MGMoment.prototype._prettyDate=function(){},MGMoment.prototype.isMGMoment=function(){return this.__isMGMoment},MGMoment.prototype.__getN=function(){return this._Date},MGMoment.prototype.clone=function(){return new MGMoment(this)},MGMoment.prototype.add=function(delta,type){switch(type){case"Y":case"y":var _newFullYear=this._year+delta,_isLunaYear=!1;_newFullYear%4===0&&_newFullYear%100!==0&&(_isLunaYear=!0),_isLunaYear||1!==this._month||29!==this._date||this._Date.setDate(28),this._Date.setFullYear(_newFullYear);break;case"M":case"m":var _maxDate=[31,28,31,30,31,30,31,31,30,31,30,31],_isM=delta<0;delta=Math.abs(delta);var _deltaYear=(_isM?-1:1)*Math.floor(delta/12),_deltaMonth=(_isM?-1:1)*delta%12,_newYear=this._year+_deltaYear,_newMonth=this._month+_deltaMonth;_newYear%4===0&&_newYear%100!==0&&(_maxDate[1]=29),_newYear!==this._year&&this._Date.setFullYear(_newYear),this._date>_maxDate[_newMonth]&&this._Date.setDate(_maxDate[_newMonth]),this._Date.setMonth(_newMonth);break;case"D":case"d":this._Date.setDate(this._date+delta);break;case"W":case"w":this._Date.setDate(this._date+7*delta);break;case"H":case"h":this._Date.setHours(this._hours+delta);break;case"Min":case"min":this._Date.setMinutes(this._minutes+delta);break;case"S":case"s":this._Date.setSeconds(this._seconds+delta)}return this._spliceDate(),this},MGMoment.prototype.decade=function(){return 10*Math.floor(this._year/10)},MGMoment.prototype.year=function(yearNum){return void 0!==yearNum?(1===this._month&&29===this._date&&(yearNum%4===0&&yearNum%100!==0||(this._Date.setDate(28),this._date=28)),this._Date.setFullYear(yearNum),this._year=yearNum,this._spliceDate(),this):this._year},MGMoment.prototype.month=function(monthNum){var _maxDate=[31,28,31,30,31,30,31,31,30,31,30,31];return void 0!=monthNum?(this._year%4===0&&this._year%100!==0&&(_maxDate[1]=29),this._date>_maxDate[monthNum]&&(this._Date.setDate(_maxDate[monthNum]),this._date=_maxDate[monthNum]),this._Date.setMonth(monthNum),this._month=monthNum,this._spliceDate(),this):this._month},MGMoment.prototype.week=function(){return this._day},MGMoment.prototype.date=function(dateNum){var _maxDate=[31,28,31,30,31,30,31,31,30,31,30,31];return void 0!==dateNum?(this._year%4===0&&this._year%100!==0&&(_maxDate[1]=29),dateNum>0?dateNum>_maxDate[this._month]&&(dateNum=_maxDate[this._month]):dateNum=1,this._Date.setDate(dateNum),this._date=dateNum,this._spliceDate(),this):this._date},MGMoment.prototype.hours=function(hoursNum){return void 0!==hoursNum?(hoursNum=Math.max(0,Math.min(hoursNum,23)),this._Date.setHours(hoursNum),this._hours=hoursNum,this._spliceDate(),this):this._hours},MGMoment.prototype.minutes=function(minutesNum){return void 0!==minutesNum?(minutesNum=Math.max(0,Math.min(minutesNum,59)),this._Date.setMinutes(minutesNum),this._minutes=minutesNum,this._spliceDate(),this):this._minutes},MGMoment.prototype.seconds=function(secondsNum){return void 0!==secondsNum?(secondsNum=Math.max(0,Math.min(secondsNum,59)),this._Date.setSeconds(secondsNum),this._seconds=secondsNum,this._spliceDate(),this):this._seconds},MGMoment.prototype.milliseconds=function(millisecondsNum){return void 0!==millisecondsNum?(millisecondsNum=Math.max(0,Math.min(millisecondsNum,999)),this._Date.setMilliseconds(millisecondsNum),this._ms=millisecondsNum,this._spliceDate(),this):this._ms},MGMoment.prototype.time=function(){return this._time},MGMoment.prototype.startOf=function(dateType){switch(dateType){case"year":this.month(0);case"month":this.date(1);case"date":this.hours(0);case"hours":this.minutes(0);case"minutes":this.seconds(0);case"seconds":this.milliseconds(0)}return this._ms=this._Date.getMilliseconds(),this._time=this._Date.getTime(),this},MGMoment.prototype.endOf=function(dateType){switch(dateType){case"year":this.month(11);case"month":this.date(31);case"date":this.hours(23);case"hours":this.minutes(59);case"minutes":this.seconds(59);case"seconds":this.milliseconds(999)}return this._ms=this._Date.getMilliseconds(),this._time=this._Date.getTime(),this},MGMoment.prototype.day=function(dayNum){return this.add(dayNum-this._day,"d")},MGMoment.prototype.gap=function(dateTime){var currentCompare=this.clone().startOf("date").time(),targetCompare=new MGMoment(dateTime).startOf("date").time(),g=Math.abs(currentCompare-targetCompare);return Math.round(g/864e5)},MGMoment.prototype.age=function(dateTime){var _splitDateTime=dateTime.split(" ")[0].split("-");if(2===_splitDateTime.length&&2===_splitDateTime[1].length)return!1;var _d=new MGMoment(dateTime),_gapYear=this.year()-_d.year(),_gapMonth=this.month()-_d.month();return this.month()<_d.month()?(_gapYear--,_gapMonth=12+_gapMonth):this.month()===_d.month()&&this.date()<_d.date()&&(_gapYear--,_gapMonth=11),{year:_gapYear,month:_gapMonth}},MGMoment.prototype.getFullDate=function(){return this._formateDate("YYYY-MM-DD")},MGMoment.prototype.getFullDateTime=function(){return this._formateDate("YYYY-MM-DD HH:mm:ss")},MGMoment.prototype.getYearMonth=function(){return this._formateDate("YYYY-MM")},MGMoment.prototype.getMonthDay=function(){return this._formateDate("MM-DD")},MGMoment.prototype.getShortDate=function(){return this._formateDate("DD/MM/YY")},MGMoment.prototype.getMonthYear=function(){return this._formateDate("MM/YY")},MGMoment.prototype.getTime=function(){return this._formateDate("HH:mm:ss")},MGMoment.prototype.toString=function(){return this._Date.toString()},MGMoment.prototype.format=function(formatter){return formatter?this._formateDate(formatter):this.toString()},MGMoment}();module.exports=function(dateTime){return new MGMoment(dateTime)}},,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function DeferredQueue(){this._q=[],this.add=function(promiseItem,fnDone,fnFail){var _p=promiseItem;fnDone&&(_p=_p.done(fnDone)),fnFail&&(_p=_p.fail(fnFail)),this._q.push(_p)},this.allDone=function(){return _jquery2["default"].when.apply(_jquery2["default"],this._q)},this.clear=function(){this._q=[]}}function inject(injection){headerBackgroundSize=null,headerBackgroundStyle={},headerRenderType=null,init=!0,headerContentTopScale=1,headerLogoScale=1,isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode}function calculateFormSize(){var recalculateAll=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_MGDebugger2["default"].log("re-calculate ...>",recalculateAll);var _header=_utils2["default"].getHeader(),_isMobile=isMobile(),_logoHeight=_header.logoHeight,_logoWidth=_header.logoWidth;_header.logo&&_isMobile&&formWidth-_header.logoWidth<160&&(headerLogoScale=(formWidth-160)/_header.logoWidth,_logoHeight=Math.ceil(headerLogoScale*_header.logoHeight),_logoWidth=Math.ceil(headerLogoScale*_header.logoWidth));var _headerStyle=_utils2["default"].getStyle("headerStyle"),$header=$form.find(".header").css({height:"auto",minHeight:"auto"}),$logo=$form.find(".h_logo"),$headerLine=$header.find(".h_headline"),$description=$header.find(".h_description"),$headerTDWrapper=$header.find(".h_TDWrapper"),_headerLogoHeight=Math.floor((_logoHeight||0)*headerLogoScale)-(2===_header.logoDisplay?HEADER_PADDING:0),_headerLogoWidth=Math.floor((_logoWidth||0)*headerLogoScale)-(2===_header.logoDisplay?HEADER_PADDING_LR/2:0);3===_header.logoDisplay&&(_headerLogoHeight=Math.round(Math.floor((_logoHeight||0)*headerLogoScale/2)-HEADER_PADDING/2)),!_header.logoBorder||4!==_header.logoBorder&&5!==_header.logoBorder||(_headerLogoHeight+=4,_headerLogoWidth+=4),decorationQueue.allDone().then(function(){recalculateAll&&($form.width(formWidth),2===headerRenderType?$headerTDWrapper.width(formWidth-_headerLogoWidth-HEADER_PADDING_LR-10):3===headerRenderType&&$headerLine.width(formWidth-_headerLogoWidth-HEADER_PADDING_LR-10));var _headerHeight=$header.outerHeight(!0)-HEADER_PADDING,_headerTitleDescriptionWrapperHeight=$headerTDWrapper.height()||0,_headerLineHeight=$headerLine.height(),_headerDescriptionHeight=$description.height()+($description.length>0?10:0),_backgroundTrueHeight=0;switch(headerBackgroundSize&&(4!==_headerStyle.bgLayoutHorizontal?_backgroundTrueHeight=headerBackgroundSize.height:(_backgroundTrueHeight=Math.floor(headerBackgroundSize.height/headerBackgroundSize.width*formWidth),headerContentTopScale=_isMobile?formWidth/_utils2["default"].getFormWidth()*.85:formWidth/_utils2["default"].getFormWidth())),headerRenderType){case 2:$header.css({"min-height":Math.max(_headerLogoHeight,_headerTitleDescriptionWrapperHeight,_backgroundTrueHeight-HEADER_PADDING)}),3!==_header.logoDisplay&&(_headerLogoHeight>_headerTitleDescriptionWrapperHeight?$headerTDWrapper.css("margin-top",Math.floor((_headerLogoHeight-_headerTitleDescriptionWrapperHeight)/2)):1===_header.logoDisplay&&$logo.css("margin-top",Math.floor((_headerTitleDescriptionWrapperHeight-_headerLogoHeight)/2)));break;case 3:$header.css({"min-height":Math.max(Math.max(_headerLogoHeight,_headerLineHeight)+_headerDescriptionHeight,_backgroundTrueHeight-HEADER_PADDING)}),3!==_header.logoDisplay&&(_headerLogoHeight>_headerLineHeight?$headerLine.css("margin-top",Math.floor((_headerLogoHeight-_headerLineHeight)/2)):1===_header.logoDisplay&&$logo.css("margin-top",Math.floor((_headerLineHeight-_headerLogoHeight)/2)));break;case 1:default:$header.css({"min-height":Math.max(Math.min(_headerHeight,_headerLogoHeight+_headerLineHeight+_headerDescriptionHeight),_backgroundTrueHeight-HEADER_PADDING)})}if(_MGDebugger2["default"].log(_header),3===_header.logoDisplay&&($header.css("margin-top",Math.floor(_headerLogoHeight+HEADER_PADDING/2)),$logo.css("margin-top",-Math.floor(_headerLogoHeight+HEADER_PADDING))),2===_header.logoDisplay){var _logoStyle={"margin-top":-HEADER_PADDING/2},_logoPosition=_header.layoutStr.charAt(2);"L"===_logoPosition?_logoStyle["margin-left"]=-HEADER_PADDING_LR/2:"R"===_logoPosition&&(_logoStyle["margin-right"]=-HEADER_PADDING_LR/2),$logo.css(_logoStyle)}if(init&&(_MGDebugger2["default"].log("in>>>>"),_headerStyle&&_headerStyle.background&&$header.css(_lodash2["default"].assign({"background-image":"url("+_headerStyle.background+")","background-position":"center center","background-repeat":"no-repeat"},headerBackgroundStyle)),_headerStyle&&_headerStyle.headerContentOffsetY&&$header.find(".fb_headerInfo").css({paddingTop:Math.ceil((_headerStyle.headerContentOffsetY||0)*headerContentTopScale)+"px"}),_isMobile&&_headerStyle&&4===_headerStyle.bgLayoutHorizontal&&$header.outerHeight(!0)>_backgroundTrueHeight&&4!==_headerStyle.bgLayoutVertical&&9!==_headerStyle.bgLayoutVertical)){var position="center";if(_header.headline)switch(_header.layoutStr.charAt(0)){case"R":position="right";break;case"C":break;case"L":default:position="left"}else if(_header.description)switch(_header.layoutStr.charAt(1)){case"R":position="right";break;case"C":break;case"L":default:position="left"}$header.css({"background-position":position+" center","background-size":"auto "+$header.outerHeight(!0)+"px"})}_MGDebugger2["default"].log("finish set false"),init=!1})}function resizeBind(){$form.off("$$resize").on("$$resize",function(){formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth()),calculateFormSize(!0)})}function _headerContentRender(content){return _lodash2["default"].isArray(content)?_lodash2["default"].map(content,function(line){return line?"<p>"+_lodash2["default"].escape(line)+"</p>":"<br />"}).join(""):content}function _contentHasValue(content){var _r=!1;return _lodash2["default"].isArray(content)?content.join("\n").length>0&&(_r=!0):content&&(_r=!0),_r}function _headerRenderA(header,data){return headerRenderType=1,_MGDebugger2["default"].log("headerRenderType",headerRenderType),
(header.logo?'<div class="h_logo" style="'+data.style.logo+'"><img class="logo style'+(data.logoBorder||0)+'" style="'+data.style.logoImage+'" src="'+header.logo+'"></div>':"")+"\n\t\t"+(_contentHasValue(header.headline)?'<div class="h_headline" style="'+data.style.headline+'">'+_headerContentRender(header.headline)+"</div>":"")+"\n\t\t"+(_contentHasValue(header.description)?'<div class="h_description" style="'+data.style.description+'">'+_headerContentRender(header.description)+"</div>":"")}function _headerRenderB(header,data){return headerRenderType=2,(header.logo?'<div class="h_logo" style="'+data.style.logo+'"><img class="logo style'+(data.logoBorder||0)+'" style="'+data.style.logoImage+'" src="'+header.logo+'"></div>':"")+'\n\t\t<div class="h_TDWrapper" style="'+data.style.wrapper+'">\n\t\t\t'+(_contentHasValue(header.headline)?'<div class="h_headline" style="'+data.style.headline+'">'+_headerContentRender(header.headline)+"</div>":"")+"\n\t\t\t"+(_contentHasValue(header.description)?'<div class="h_description" style="'+data.style.description+'">'+_headerContentRender(header.description)+"</div>":"")+'\n\t\t</div><div class="clearB"></div>'}function _headerRenderC(header,data){return headerRenderType=3,'<div class="h_TLWrapper">\n\t\t\t'+(header.logo?'<div class="h_logo" style="'+data.style.logo+'"><img class="logo style'+(data.logoBorder||0)+'" style="'+data.style.logoImage+'" src="'+header.logo+'"></div>':"")+"\n\t\t\t"+(_contentHasValue(header.headline)?'<div class="h_headline" style="'+data.style.headline+'">'+_headerContentRender(header.headline)+"</div>":"")+'\n\t\t\t<div class="clearB"></div>\n\t\t</div>\n\t\t'+(_contentHasValue(header.description)?'<div class="h_description" style="'+data.style.description+'">'+_headerContentRender(header.description)+"</div>":"")}function render($f){var _isMobile=isMobile(),SHARE_PADDING=0!==_utils2["default"].getSettings().isShowShare?100:20;FORM_WIDTH_PADDING=_isMobile?0:SHARE_PADDING,HEADER_PADDING=30,HEADER_PADDING_LR=_isMobile?20:40,init=!0,headerContentTopScale=1,headerLogoScale=1,$form=$f,$form.off("$$resize"),formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth()),$form.width(formWidth);var headerStyle=_utils2["default"].getStyle("headerStyle")||{},header=_utils2["default"].getHeader();if(header){var _header="",headerData={};if(headerData.style={},layoutStr=header.layoutStr){if(_isMobile&&"N"!==layoutStr.charAt(2)){var _layoutArr=layoutStr.split("");_layoutArr[2]="C",_layoutArr[3]="",header.logo&&(_layoutArr[0]="C"),layoutStr=_layoutArr.join("")}for(var _style2=headerData.style,_LAYOUT_KEY=["headline","description","logo","stayNewLine"],_currentField=null,i=0;i<4;i++)if(_currentField=_LAYOUT_KEY[i],"stayNewLine"===_currentField)headerData.newLine="Y"===layoutStr.charAt(i);else switch(layoutStr.charAt(i)){case"L":_style2[_currentField]="text-align:left;";break;case"R":_style2[_currentField]="text-align:right;";break;case"C":_style2[_currentField]="text-align:center;";break;case"N":default:_style2[_currentField]=""}}if(headerStyle&&headerStyle.background)if(decorationQueue.add(_tools2["default"].getImageSize(headerStyle.background,3===getMode()),function(size){4!==headerStyle.bgLayoutVertical&&(headerBackgroundSize=size)}),headerBackgroundStyle={},headerStyle.bgLayoutHorizontal!==headerStyle.bgLayoutVertical||3!==headerStyle.bgLayoutHorizontal&&4!==headerStyle.bgLayoutHorizontal){switch(headerStyle.bgLayoutHorizontal){case 3:headerBackgroundStyle["background-repeat"]="repeat-x";break;case 4:headerBackgroundStyle["background-size"]="100% auto";break;case 5:headerBackgroundStyle["background-position-x"]="left";break;case 7:headerBackgroundStyle["background-position-x"]="right";break;case 6:default:headerBackgroundStyle["background-position-x"]="center"}switch(headerStyle.bgLayoutVertical){case 3:headerBackgroundStyle["background-repeat"]="repeat-y";break;case 4:headerBackgroundStyle["background-size"]="auto 100%",headerBackgroundStyle["background-position"]="initial";break;case 8:headerBackgroundStyle["background-position-y"]="top";break;case 9:headerBackgroundStyle["background-position-y"]="bottom";break;case 6:default:headerBackgroundStyle["background-position-y"]="center"}}else 3===headerStyle.bgLayoutHorizontal&&(headerBackgroundStyle["background-repeat"]="repeat"),4===headerStyle.bgLayoutHorizontal&&(headerBackgroundStyle["background-size"]="cover");var _logoLayoutStr=layoutStr?layoutStr.charAt(2):null,pFixer=!0;!header.logo||null!=header.logoHeight&&null!=header.logoWidth||(pFixer=new Promise(function(resolve,reject){_tools2["default"].getImageSize(header.logo).done(function(res){if(header.logoHeight=res.height||0,header.logoWidth=res.width||0,header.logoWidth>1/3*formWidth){var _newLogoHeight=Math.ceil(header.logoHeight*Math.ceil(1/3*formWidth)/header.logoWidth);header.logoWidth=Math.ceil(1/3*formWidth),header.logoHeight=_newLogoHeight}resolve(!0)}).fail(function(){header.logoHeight=0,header.logoWidth=0,resolve(!0)})})),Promise.resolve(pFixer).then(function(){_MGDebugger2["default"].log("process...>");var _logoHeight=void 0,_logoWidth=void 0;if(header.logo&&("L"===_logoLayoutStr?headerData.style.logo+="float:left;":"R"===_logoLayoutStr?headerData.style.logo+="float:right;":"N"===_logoLayoutStr&&(headerData.style.logo+="float:left;"),_logoHeight=header.logoHeight,_logoWidth=header.logoWidth,_isMobile&&formWidth-header.logoWidth<160&&(headerLogoScale=(formWidth-160)/header.logoWidth,_logoHeight=Math.ceil(headerLogoScale*header.logoHeight),_logoWidth=Math.ceil(headerLogoScale*header.logoWidth)),headerData.style.logoImage="width:"+_logoWidth+"px;height:"+_logoHeight+"px;",headerData.logoBorder=header.logoBorder),headerData.style.headline+=headerStyle.headlineFontSize?"font-size:"+headerStyle.headlineFontSize+"px;":"",headerData.style.headline+=headerStyle.headlineColor?"color:"+headerStyle.headlineColor+";":"",headerData.style.headline+=0===headerStyle.headlineFontWeight?"font-weight:normal;":"",headerData.style.description+=headerStyle.subheadFontSize?"font-size:"+headerStyle.subheadFontSize+"px;":"",headerData.style.description+=headerStyle.subheadColor?"color:"+headerStyle.subheadColor+";":"",headerData.style.description+=headerStyle.subheadFontWeight?"font-weight:bold;":"",init=!0,header.logo&&"L"!==header.hasValue&&"C"!==_logoLayoutStr){if(header.logo){"L"!==_logoLayoutStr&&"R"!==_logoLayoutStr&&(_logoLayoutStr="L");var _wrapperStyle=("L"===_logoLayoutStr?"float:right;":"float:left;")+"width:"+(formWidth-(_logoWidth-(2===header.logoDisplay?HEADER_PADDING_LR/2:0)+(!header.logoBorder||4!==header.logoBorder&&5!==header.logoBorder?0:4))-HEADER_PADDING_LR-10)+"px;";headerData.newLine?(headerData.style.headline+=_wrapperStyle,_header=_headerRenderC(header,headerData)):(headerData.style.wrapper=_wrapperStyle,_header=_headerRenderB(header,headerData))}}else _header=_headerRenderA(header,headerData);var _headerStyle={};if(!_lodash2["default"].isEmpty(headerStyle)&&(headerStyle.bgColor||null!=headerStyle.bgOpacityValue&&1!==headerStyle.bgOpacityValue)&&(_headerStyle={backgroundColor:headerStyle.bgColor},1!==headerStyle.bgOpacityValue)){var newColor=new _MGColor.OColor(headerStyle.bgColor||"#669acc");newColor.set("a",Math.min(headerStyle.bgOpacityValue,1)),_headerStyle.backgroundColor=newColor.getRGBA(),_headerStyle.zoom=1,_utils2["default"].isIE8&&(_style.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",_style["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",_style.backgroundColor="transparent")}$form.find(".header").css(_headerStyle).html('<div class="fb_headerInfo" style="padding-top:'+(headerStyle.headerContentOffsetY||0)*headerContentTopScale+'px">'+_header+"</div>"),calculateFormSize(),resizeBind()})}}Object.defineProperty(exports,"__esModule",{value:!0});var _utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_MGColor=__webpack_require__(35),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),FORM_WIDTH_PADDING=100,HEADER_PADDING=30,HEADER_PADDING_LR=40,$form=void 0,init=!0,formWidth=void 0,layoutStr=void 0,headerBackgroundSize=null,headerBackgroundStyle={},headerRenderType=null,headerContentTopScale=1,headerLogoScale=1,isMobile=void 0,getCurrentWidth=void 0,getMode=void 0,decorationQueue=new DeferredQueue;exports["default"]={render:render,inject:inject},module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function inject(injection){isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode,getContent=injection.getContent}function render($b){var SHARE_PADDING=0!==_utils2["default"].getSettings().isShowShare?100:20;FORM_WIDTH_PADDING=isMobile()?0:SHARE_PADDING,_addons2["default"].render(_addons2["default"].createElement(Body,{isMobile:isMobile()}),$b[0])}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_CInput=__webpack_require__(42),_CInput2=_interopRequireDefault(_CInput),_CRadioCheckbox=__webpack_require__(48),_CRadioCheckbox2=_interopRequireDefault(_CRadioCheckbox),_CDropDown=__webpack_require__(50),_CDropDown2=_interopRequireDefault(_CDropDown),_CDropDown3=__webpack_require__(52),_CDropDown4=_interopRequireDefault(_CDropDown3),_CMultiLevelDropdown=__webpack_require__(53),_CMultiLevelDropdown2=_interopRequireDefault(_CMultiLevelDropdown),_CMultiLevelDropdown3=__webpack_require__(54),_CMultiLevelDropdown4=_interopRequireDefault(_CMultiLevelDropdown3),_CNumber=__webpack_require__(55),_CNumber2=_interopRequireDefault(_CNumber),_CDateTime=__webpack_require__(56),_CDateTime2=_interopRequireDefault(_CDateTime),_CDateTime3=__webpack_require__(60),_CDateTime4=_interopRequireDefault(_CDateTime3),_CAttachment=__webpack_require__(63),_CAttachment2=_interopRequireDefault(_CAttachment),_CRate=__webpack_require__(68),_CRate2=_interopRequireDefault(_CRate),_CTabular=__webpack_require__(70),_CTabular2=_interopRequireDefault(_CTabular),_CTabular3=__webpack_require__(71),_CTabular4=_interopRequireDefault(_CTabular3),_CRank=__webpack_require__(72),_CRank2=_interopRequireDefault(_CRank),_CRank3=__webpack_require__(85),_CRank4=_interopRequireDefault(_CRank3),_CCurrency=__webpack_require__(86),_CCurrency2=_interopRequireDefault(_CCurrency),_CCityLocation=__webpack_require__(87),_CCityLocation2=_interopRequireDefault(_CCityLocation),_CCityLocation3=__webpack_require__(89),_CCityLocation4=_interopRequireDefault(_CCityLocation3),_CAddress=__webpack_require__(90),_CAddress2=_interopRequireDefault(_CAddress),_CAddress3=__webpack_require__(91),_CAddress4=_interopRequireDefault(_CAddress3),_CCommodity=__webpack_require__(92),_CCommodity2=_interopRequireDefault(_CCommodity),_cart=__webpack_require__(97),_cart2=_interopRequireDefault(_cart),_CMap=__webpack_require__(98),_CMap2=_interopRequireDefault(_CMap),_CPictureRadioCheckbox=__webpack_require__(100),_CPictureRadioCheckbox2=_interopRequireDefault(_CPictureRadioCheckbox),_CPictureAttachment=__webpack_require__(101),_CPictureAttachment2=_interopRequireDefault(_CPictureAttachment),_CPictureStatic=__webpack_require__(102),_CPictureStatic2=_interopRequireDefault(_CPictureStatic),_CStaticText=__webpack_require__(104),_CStaticText2=_interopRequireDefault(_CStaticText),_CSeparator=__webpack_require__(105),_CSeparator2=_interopRequireDefault(_CSeparator),_CAuthCode=__webpack_require__(106),_CAuthCode2=_interopRequireDefault(_CAuthCode),_CVideo=__webpack_require__(107),_CVideo2=_interopRequireDefault(_CVideo),_CName=__webpack_require__(109),_CName2=_interopRequireDefault(_CName),_CMobileVerification=__webpack_require__(110),_CMobileVerification2=_interopRequireDefault(_CMobileVerification),_CInputMulti=__webpack_require__(111),_CInputMulti2=_interopRequireDefault(_CInputMulti),_CWeChatMulti=__webpack_require__(112),_CWeChatMulti2=_interopRequireDefault(_CWeChatMulti),_CIMSNSGroup=__webpack_require__(113),_CIMSNSGroup2=_interopRequireDefault(_CIMSNSGroup),_PopPay=__webpack_require__(114),_PopPay2=_interopRequireDefault(_PopPay),isMobile=void 0,getCurrentWidth=void 0,getMode=void 0,getContent=void 0,FORM_WIDTH_PADDING=20,pureRenderMixin=_addons2["default"].addons.PureRenderMixin,hasAuthCodeMobile=!1,Body=_addons2["default"].createClass({displayName:"Body",mixins:[pureRenderMixin],getInitialState:function(){_formStore2["default"].setDefaultFillingData(),this.Rank={};var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());return _lodash2["default"].assign({formWidth:formWidth,forceUpdateCount:0},_formStore2["default"].getState())},_postHeightChange:function(){var self=this;window.clearInterval(self.updateHeightLooper),1===getMode()&&_utils2["default"].canPostMessage()&&!function(){var count=5;self.updateHeightLooper=window.setInterval(function(){count--,count<=0&&window.clearInterval(self.updateHeightLooper);var currentHeight=getContent().$container.outerHeight(!0)+30;currentHeight!==self.containerHeight&&(self.containerHeight=currentHeight,_utils2["default"].postMessage({height:self.containerHeight}))},1e3)}()},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange),this._postHeightChange()},componentWillUpdate:function(){var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());formWidth!==this.state.formWidth&&this.setState({formWidth:formWidth})},componentDidUpdate:function(){var _this=this;this._postHeightChange();var _scrollToPosition=!1;1===getMode()&&this.state.valid&&!_lodash2["default"].isEmpty(this.state.valid)&&this.scrollToErrorElement&&!function(){var valid=_this.state.valid;_lodash2["default"].forEach(_this.currentComponent,function(component){var _isValid=!1;if("squeezeBox"===component.type?_lodash2["default"].forEach(component.children,function(sqId){if(valid[sqId])return _isValid=sqId,!1}):valid[component.id]&&(_isValid=component.id),_isValid){var _ret3=function(){var _position=Math.max((0,_jquery2["default"])("#"+_isValid).offset().top+getContent().$submitForm.prop("scrollTop")-20,0);return _utils2["default"].getParentInfo([{t:"self",v:"rect",e:1,n:"rect"},{t:"scrollParent",v:"scrollTop",n:"scrollTop"}]).then(function(res){if(res&&res.innerState){var _iframePosition=_position+res.scrollTop+res.rect.top;_utils2["default"].getParentInfo([{t:"window",v:"scrollTo",e:[0,_iframePosition]}])}else getContent().$scrollContainer.animate({scrollTop:_position},300),_scrollToPosition=!0,_this.scrollToErrorElement=!1}),{v:!1}}();if("object"===("undefined"==typeof _ret3?"undefined":_typeof(_ret3)))return _ret3.v}})}(),this.scrollToTop&&(getContent().$scrollContainer.scrollTop(0),this.scrollToTop=!1)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){if(this.scrollToTop=!1,"$$resize"===action.type){var _newState={},formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());this.state.formWidth!==formWidth&&(_newState.formWidth=formWidth),1!==getMode()&&(_newState.forceUpdateCount=((this.state.forceUpdateCount||0)+1)%100),this.setState(_newState)}else if("$$messenger"===action.type){var _newState2={};_newState2.forceUpdateCount=((this.state.forceUpdateCount||0)+1)%100,this.setState(_newState2)}else"cashierInfo"===action.type?1===getMode()&&_addons2["default"].render(_addons2["default"].createElement(_PopPay2["default"],{isMobile:isMobile(),payment:this.state.payment}),document.getElementById("popwin")):["submitValid","duplicateDataError","page","MobileValidCodeError","MobileValidEmpty","commodityQuotaError","optionQuotaError"].indexOf(action.type)>-1?this.scrollToErrorElement=!0:this.scrollToErrorElement=!1;"page"===action.type&&(this.scrollToTop=!0),this.setState(_formStore2["default"].getState())},renderComponent:function(id,settings,style,componentStyle){var extProps=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},fillInfo=this.state.data,valid=this.state.valid,width=this.state.formWidth,componentData=_utils2["default"].getComponents(id);if(!componentData)return _MGDebugger2["default"].log("JUMP...ERROR COMPONENT",id),null;var fillData=fillInfo[id],validData=valid?valid[id]:null,_isMobile=isMobile(),_props=_lodash2["default"].assign({key:"c"+id,data:componentData,fill:fillData,type:componentData.type,valid:validData,style:style,isMobile:_isMobile,mode:getMode(),componentStyle:componentStyle,forceUpdateCount:this.state.forceUpdateCount,fw:width},extProps);"commodity"===componentData.type&&(_props.cartValid=valid.cart);var TempRank=null;1===settings.showQuestionNo&&_utils2["default"].isFillingComponent(componentData.type)&&(this._num++,_props.num=this._num,_props.showQuestionNo=!0,_props.questionNoType=settings.questionNoType||1);var _c=null;switch(componentData.type){case"input":_c=_addons2["default"].createElement(_CInput2["default"],_props);break;case"checkbox":case"radio":_c=_addons2["default"].createElement(_CRadioCheckbox2["default"],_props);break;case"dropDown":_c=_isMobile?_addons2["default"].createElement(_CDropDown4["default"],_props):_addons2["default"].createElement(_CDropDown2["default"],_props);break;case"multiLevel":_c=_isMobile?_addons2["default"].createElement(_CMultiLevelDropdown4["default"],_props):_addons2["default"].createElement(_CMultiLevelDropdown2["default"],_props);break;case"number":_c=_addons2["default"].createElement(_CNumber2["default"],_props);break;case"dateTime_both":case"dateTime_date":case"dateTime_time":_c=_isMobile?_addons2["default"].createElement(_CDateTime4["default"],_props):_addons2["default"].createElement(_CDateTime2["default"],_props);break;case"birthDate":_c=_isMobile?_addons2["default"].createElement(_CDateTime4["default"],_extends({},_props,{isBirthDate:!0})):_addons2["default"].createElement(_CDateTime2["default"],_extends({},_props,{isBirthDate:!0}));break;case"attachment":_c=_addons2["default"].createElement(_CAttachment2["default"],_props);break;case"rate":_c=_addons2["default"].createElement(_CRate2["default"],_props);break;case"tabular":_c=_isMobile?_addons2["default"].createElement(_CTabular4["default"],_props):_addons2["default"].createElement(_CTabular2["default"],_props);break;case"rank":_isMobile?_c=_addons2["default"].createElement(_CRank4["default"],_props):(this.Rank[id]||(this.Rank[id]=(0,_CRank2["default"])()),TempRank=this.Rank[id],_c=_addons2["default"].createElement(TempRank,_props));break;case"currency":_c=_addons2["default"].createElement(_CCurrency2["default"],_props);break;case"city":case"location":_c=_isMobile?_addons2["default"].createElement(_CCityLocation4["default"],_props):_addons2["default"].createElement(_CCityLocation2["default"],_props);break;case"address":_c=_isMobile?_addons2["default"].createElement(_CAddress4["default"],_props):_addons2["default"].createElement(_CAddress2["default"],_props);break;case"commodity":_c=_addons2["default"].createElement(_CCommodity2["default"],_props);break;case"picRadio":case"picCheckbox":_c=_addons2["default"].createElement(_CPictureRadioCheckbox2["default"],_props);break;case"picAttachment":_c=_addons2["default"].createElement(_CPictureAttachment2["default"],_props);break;case"staticPic":_c=_addons2["default"].createElement(_CPictureStatic2["default"],_props);break;case"staticText":_c=_addons2["default"].createElement(_CStaticText2["default"],_props);break;case"separator":_c=_addons2["default"].createElement(_CSeparator2["default"],_props);break;case"authCode":_c=_addons2["default"].createElement(_CAuthCode2["default"],_props);break;case"staticVideo":_c=_addons2["default"].createElement(_CVideo2["default"],_props);break;case"staticMap":_c=_addons2["default"].createElement(_CMap2["default"],_props);break;case"name":_c=_addons2["default"].createElement(_CName2["default"],_props);break;case"avatar":_c=_addons2["default"].createElement(_CPictureAttachment2["default"],_extends({},_props,{isAcceptMultipleFile:!0}));break;case"gender":case"title":_c=2===+componentData.componentType?_isMobile?_addons2["default"].createElement(_CDropDown4["default"],_props):_addons2["default"].createElement(_CDropDown2["default"],_props):_addons2["default"].createElement(_CRadioCheckbox2["default"],_props);break;case"company":case"department":case"position":_c=2===+componentData.searchComponentType?_addons2["default"].createElement(_CRadioCheckbox2["default"],_props):3===+componentData.searchComponentType?_isMobile?_addons2["default"].createElement(_CDropDown4["default"],_props):_addons2["default"].createElement(_CDropDown2["default"],_props):_addons2["default"].createElement(_CInput2["default"],_props);break;case"IM":case"SNS":_c=_addons2["default"].createElement(_CIMSNSGroup2["default"],_props);break;case"mobile":!_props.data.isSendMsgAuth||hasAuthCodeMobile&&hasAuthCodeMobile!==id?_c=_addons2["default"].createElement(_CInputMulti2["default"],_props):(hasAuthCodeMobile=id,_c=_addons2["default"].createElement(_CMobileVerification2["default"],_props));break;case"wechat":_c=window.IN_WECHAT?_addons2["default"].createElement(_CWeChatMulti2["default"],_props):_addons2["default"].createElement(_CInputMulti2["default"],_props);break;case"email":case"website":case"tel":case"fax":case"qq":case"skype":case"whatsApp":case"messenger":case"viber":case"line":case"telegram":case"weibo":case"linkedIn":case"twitter":case"facebook":case"instagram":case"mkGooglePlus":_c=_addons2["default"].createElement(_CInputMulti2["default"],_props);break;case"paging":_c=null;break;default:_c=_addons2["default"].createElement("div",{className:"fb_component",key:"c"+id},"ERROR:: miss renderer "+componentData.type+" "+JSON.stringify(componentData))}return _c},renderComponents:function(){var _this2=this,_componentsList=[],currentComponent=_utils2["default"].getPage(this.state.page)||[];if(!currentComponent)return null;this.currentComponent=currentComponent;var _shownItemsInfo=[];this._num=_utils2["default"].getPageStartOffset(this.state.page);var settings=_utils2["default"].getSettings(),style=_utils2["default"].getStyle();return _lodash2["default"].forEach(currentComponent,function(data){"normal"===data.type?(_shownItemsInfo.push(data.id),_componentsList.push(_this2.renderComponent(data.id,settings,style))):"squeezeBox"===data.type&&!function(){var _key="sq"+data.children.join(""),unitWidth=Math.floor(1e3/data.layout.reduce(function(a,b){return a+b}))/10,len=data.children.length,content=_lodash2["default"].map(data.children,function(sqId,idx){return _shownItemsInfo.push(sqId),_this2.renderComponent(sqId,settings,style,{width:data.layout[idx]*unitWidth+"%"},{itemNum:len})});_componentsList.push(_addons2["default"].createElement("div",{className:"clearB",key:"sqbf"+_key})),_componentsList.push(_addons2["default"].createElement("div",{className:"fb_group",key:_key},content,_addons2["default"].createElement("div",{className:"clearB"})))}()}),_utils.isOldIE&&(0,_utils.hasAttachmentComponent)()&&_lodash2["default"].forEach(_utils2["default"].getLayout(),function(data){if("normal"===data.type){if(_shownItemsInfo.indexOf(data.id)>-1)return!0;_componentsList.push(_this2.renderComponent(data.id,settings,style,{display:"none"}))}else if("squeezeBox"===data.type){var _ret5=function(){var _key="sq"+data.children.join(""),unitWidth=Math.floor(1e3/data.layout.reduce(function(a,b){return a+b}))/10,len=data.children.length,content=[];return _lodash2["default"].forEach(data.children,function(sqId,idx){return _shownItemsInfo.indexOf(sqId)>-1||void content.push(_this2.renderComponent(sqId,settings,style,{width:data.layout[idx]*unitWidth+"%",display:"none"},{itemNum:len}))}),content.length>0?(_componentsList.push(_addons2["default"].createElement("div",{className:"clearB",key:"sqbf"+_key})),void _componentsList.push(_addons2["default"].createElement("div",{className:"fb_group",key:_key},content,_addons2["default"].createElement("div",{className:"clearB"})))):{v:!0}}();if("object"===("undefined"==typeof _ret5?"undefined":_typeof(_ret5)))return _ret5.v}}),_componentsList},render:function(){var valid=this.state.valid;return _addons2["default"].createElement("div",null,_addons2["default"].createElement("div",{className:"fb_componentWrapper"},this.renderComponents(),_addons2["default"].createElement("div",{className:"clearB",key:"clearB"})),_addons2["default"].createElement(_cart2["default"],{key:"cart",forceUpdateCount:this.state.forceUpdateCount,valid:valid.cart}))}});exports["default"]={inject:inject,render:render},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function saveDataProcess(data,action){var i,newData={},_newData=void 0,_idx=void 0;return function(){switch(action.type){case"numberBlur":if(action.value){var _number=+action.value;if(!isNaN(_number)&&_lodash2["default"].isNumber(_number)){var component=_utils2["default"].getComponents(action.id);1===component.isAcceptDecimals&&1===component.isLimitDecDigits&&component.decDigits&&(_number=_number.toFixed(+component.decDigits)),newData[action.id]=""+_number}else newData[action.id]=action.value}else newData[action.id]=action.value;break;case"inputBlur":case"setValue":_lodash2["default"].isObject(action.value)?newData[action.id]=_lodash2["default"].assign({},data[action.id],action.value):newData[action.id]=action.value;break;case"setRate":data[action.id]===action.value?newData[action.id]=null:newData[action.id]=action.value;break;case"setRank":var rankId=action.id,rankNum=action.num,rankValue=action.value,oldData=data[rankId];oldData?newData[rankId]=_lodash2["default"].assign({},oldData):newData[rankId]={};var changePosition=!1;_lodash2["default"].forEach(oldData,function(id,key){if(id===rankValue)return changePosition=key,!1}),oldData&&!oldData[rankNum]&&changePosition===!1||!oldData?newData[rankId][rankNum]=rankValue:changePosition!==!1&&oldData?(newData[rankId][rankNum]=rankValue,oldData[rankNum]?newData[rankId][changePosition]=oldData[rankNum]:delete newData[rankId][changePosition]):delete newData[rankId];break;case"setNextRank":var _oldRankData=data[action.id];_oldRankData?newData[action.id]=_lodash2["default"].assign({},_oldRankData):newData[action.id]={};var changed=!1;for(i=0;i<action.total;i++)if(!newData[action.id][i]){changed=!0,newData[action.id][i]=action.value;break}changed||delete newData[action.id];break;case"removeRank":var oldRankData=data[action.id];if(oldRankData){var _changePosition=!1;_lodash2["default"].forEach(oldRankData,function(id,key){if(id===action.value)return _changePosition=key,!1}),_changePosition&&(newData[action.id]=_lodash2["default"].assign({},oldRankData),delete newData[action.id][_changePosition])}break;case"addContactInfoGroup":if(action){var oldContactGroupData=(data[action.id]||[]).slice();_lodash2["default"].isEmpty(oldContactGroupData)&&oldContactGroupData.push({}),oldContactGroupData.push({}),newData[action.id]=oldContactGroupData}break;case"removeContactInfoGroup":if(action){var _oldContactGroupData=(data[action.id]||[]).slice();_oldContactGroupData.splice(action.index,1),newData[action.id]=_oldContactGroupData}break;case"setGroupType":if(action){var _oldContactGroupData2=(data[action.id]||[]).slice();_oldContactGroupData2[action.index]||(_oldContactGroupData2[action.index]={}),_oldContactGroupData2[action.index]=_lodash2["default"].assign({},_oldContactGroupData2[action.index],{type:action.value}),newData[action.id]=_oldContactGroupData2}break;case"setGroupInfo":if(action){var _oldContactGroupData3=(data[action.id]||[]).slice();_oldContactGroupData3[action.index]||(_oldContactGroupData3[action.index]={}),_oldContactGroupData3[action.index]=_lodash2["default"].assign({},_oldContactGroupData3[action.index],{type:action.contentType,info:action.value}),newData[action.id]=_oldContactGroupData3}break;case"setCommodityValue":var oldCommodityData=data[action.id],newItemInfo={};if(newItemInfo[action.cId]=+action.value,newItemInfo[action.cId]<=0){var _commodity=_lodash2["default"].assign({},oldCommodityData);delete _commodity[action.cId],newData[action.id]=_commodity}else newData[action.id]=_lodash2["default"].assign({},oldCommodityData,newItemInfo);break;case"toggleCommodityState":break;case"inputMultiAdd":newData[action.id]=(data[action.id]||[""]).slice(),newData[action.id].push("");break;case"inputMultiRemove":newData[action.id]=(data[action.id]||[""]).slice(),newData[action.id].splice(action.idx,1);break;case"inputMultiBlur":case"setMultiValue":newData[action.id]=(data[action.id]||[""]).slice(),newData[action.id][action.idx]=action.value;break;case"setTabularValue":switch(_newData=_lodash2["default"].assign({},data[action.id]||{}),action.componentType){case 2:var _itemIdx=(_newData[action.qId]||[]).indexOf(action.value);_itemIdx>-1?(_newData[action.qId].splice(_itemIdx,1),_newData[action.qId]=_newData[action.qId].slice()):(_newData[action.qId]||(_newData[action.qId]=[]),_newData[action.qId].push(action.value));break;case 3:case 4:_newData[action.qId]=action.value;break;case 1:default:_newData[action.qId]=[action.value]}newData[action.id]=_newData;break;case"setSelector":if(console.log("---->?"),_newData=(data[action.id]||[]).slice(),action.isCheckbox){var _dIdx=_newData.map(function(v){return _lodash2["default"].isObject(v)?v.id:v}).indexOf(action.value);if(_dIdx===-1){var _selected=action.value;otherInfoPool[_selected]&&(_selected={id:action.value,value:otherInfoPool[_selected]}),_newData.push(_selected)}else _newData.splice(_dIdx,1)}else if(null===action.value)_newData=[];else{var _selected2=action.value;_lodash2["default"].isObject(_newData[0])&&_newData[0].id===action.value?_newData=[]:_newData[0]===action.value?_newData=[]:(otherInfoPool[_selected2]&&(_selected2={id:action.value,value:otherInfoPool[_selected2]}),_newData=[_selected2])}newData[action.id]=_newData;break;case"setSelectorValue":case"blurSelectorInput":_newData=(data[action.id]||[]).slice(0),_idx=-1;var _isObj=!1;_lodash2["default"].forEach(_newData,function(info,key){if(_lodash2["default"].isObject(info)){if(info.id===action.optionId)return _isObj=!0,_idx=key,!1}else if(info===action.optionId)return _isObj=!1,_idx=key,!1}),_idx!==-1&&(otherInfoPool[action.optionId]=action.value,_isObj?_newData[_idx].value=action.value:_newData[_idx]={id:action.optionId,value:action.value}),newData[action.id]=_newData;break;case"setMultiLevelSelector":_newData=[{id:action.value,current:action.current}],newData[action.id]=_newData;break;case"setMultiLevelSelectorValue":_newData=[{id:action.optionId,value:action.value,current:action.current}],newData[action.id]=_newData;break;case"setLocationInput":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{
content:action.value});break;case"setLocationStruct":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{struct:action.value});break;case"setAddressSelector":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{struct:action.value});break;case"setAddressInput":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{content:action.value});break;case"setAddressZipCode":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{zipCode:action.value});break;case"addFile":var FILE_TYPE_LIST=["","txt","doc/docx","xls/xlsx","ppt/pptx","html/htm","pdf","jpg/jpeg","png","gif","bmp","psd","tiff","avi","swf","wmv","rmvb","m4a/mp4","m4a/3gp","m4a/mov","mp3","m4a","wma","rar","zip","7z"];action.value&&!function(){var attachmentComponent=_utils2["default"].getComponents(action.id),legal=!0,fileName=action.value.name||"",_sfx=fileName.split(".");_sfx=_sfx.length>1?_sfx[_sfx.length-1].toLowerCase():null;var _res=null;if(_sfx&&_sfx.match(/[\?\@\#\$\&\(\)\/\|\;\'\"\â€™\â€˜\â€œ\â€\<\>\*\\]/)?(legal=!1,_res="ILLEGAL_SUFFIX"):(legal=!0,1!==attachmentComponent.isLimitFileType||_lodash2["default"].isEmpty(attachmentComponent.fileTypes)||(legal=!1,_res="ILLEGAL_SUFFIX",_lodash2["default"].forEach(FILE_TYPE_LIST,function(t,idx){return!legal&&void((attachmentComponent.fileTypes||[]).indexOf(idx)>-1&&_lodash2["default"].forEach(t.split("/"),function(_t){(""+_t).toLowerCase()===_sfx&&(legal=!0,_res=null)}))}))),action.isImage)if(_sfx){var fileType=action.value.type;fileType&&("image"!==fileType.split("/")[0].toLowerCase()?(legal=!1,_res="ILLEGAL_SUFFIX"):(legal=!0,_res=null)),legal||(["art","bm","bmp","dwg","dxf","fif","flo","fpx","g3","gif","psd","ico","ief","iefs","jfif","jfif-tbnl","jpe","jpeg","jpg","jps","jut","mcf","nap","nif","niff","pbm","pct","pcx","pgm","pic","pict","pm","png","pnm","ppm","qif","qti","qtif","ras","rf","rgb","rp","svf","tif","tiff","turbot","xbm","xif","xpm","x-png","xwd"].indexOf(_sfx.toLowerCase())===-1?(legal=!1,_res="ILLEGAL_SUFFIX"):(legal=!0,_res=null))}else legal=!1,_res="ILLEGAL_SUFFIX";if(1===attachmentComponent.isLimitFileSize&&legal&&(legal=!1,_res="ILLEGAL_FILE_SIZE",(action.value.size||0)<=1048576*(attachmentComponent.fileSize?+attachmentComponent.fileSize:500)&&(legal=!0,_res=null)),action.isImage&&attachmentComponent.isLimitPicResolution&&action.imageSize&&legal){legal=!1,_res="ILLEGAL_FILE_RESOLUTION";var _maxHeight=!0,_minHeight=!0,_maxWidth=!0,_minWidth=!0;attachmentComponent.picMaxHeight&&(_maxHeight=action.imageSize.height<=+attachmentComponent.picMaxHeight),attachmentComponent.picMinHeight&&(_minHeight=action.imageSize.height>=+attachmentComponent.picMinHeight),attachmentComponent.picMaxWidth&&(_maxWidth=action.imageSize.width<=+attachmentComponent.picMaxWidth),attachmentComponent.picMinWidth&&(_minWidth=action.imageSize.width>=+attachmentComponent.picMinWidth),_maxHeight&&_minHeight&&_maxWidth&&_minWidth&&(legal=!0,_res=null)}_newData=(data[action.id]||[]).slice(0),filePool[action.id]||(filePool[action.id]={_it:0,fileList:{}});var _filePool=filePool[action.id];if(null!==action.idx){_filePool.fileList[+action.idx]=action.value;var _fillIdx=_lodash2["default"].findIndex(_newData,{idx:+action.idx});_fillIdx>-1&&(_newData[_fillIdx]=_lodash2["default"].assign({},_newData[_fillIdx],{name:action.value.name,size:action.value.size,error:legal?null:_res})),action.callback&&action.callback(action.imgData,+action.idx,action.imageOrientation)}else _filePool.fileList[_filePool._it]=action.value,_newData.push({idx:_filePool._it,name:action.value.name,size:action.value.size,error:legal?null:_res}),action.callback&&action.callback(action.imgData,_filePool._it,action.imageOrientation),_filePool._it++;newData[action.id]=_newData}();break;case"removeFile":if(null!==action.idx){_newData=(data[action.id]||[]).slice(0);var _dataIdx=_lodash2["default"].findIndex(_newData,{idx:+action.idx});delete filePool[action.id].fileList[+action.idx],_dataIdx>-1&&(_newData.splice(_dataIdx,1),newData[action.id]=_newData)}break;case"validMobile":_newData=data[action.id]||{},_newData.verificationToken=null,_newData.verificationCode=null,newData[action.id]=_lodash2["default"].assign({},_newData);break;case"setMobileValue":_newData=data[action.id]||{},_newData.mobile!==action.value&&(_newData.verificationToken=null,_newData.verificationCode=null),newData[action.id]=_lodash2["default"].assign({},_newData,{mobile:action.value});break;case"setVerificationToken":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{verificationToken:action.value[0],verificationMobileToken:action.value[1]});break;case"setVerificationCode":_newData=data[action.id]||{},newData[action.id]=_lodash2["default"].assign({},_newData,{verificationCode:action.value})}}(),_lodash2["default"].isEmpty(newData)?data:_lodash2["default"].assign({},data,newData)}function pageProcess(state,action){var newPageNum=state.page;switch(action.type){case"page":if(state.valid&&!_lodash2["default"].isEmpty(state.valid)){var _ret3=function(){var _hasError=!1;if(_lodash2["default"].forEach(_utils2["default"].getPage(newPageNum),function(d){if("squeezeBox"===d.type?_lodash2["default"].forEach(d.children,function(id){if(_hasError=state.valid[id]&&state.valid[id].length>0)return!1}):d.id&&(_hasError=state.valid[d.id]&&state.valid[d.id].length>0),_hasError)return!1}),_hasError)return{v:newPageNum}}();if("object"===("undefined"==typeof _ret3?"undefined":_typeof(_ret3)))return _ret3.v}newPageNum=action.data;break;case"MobileValidEmpty":case"MobileValidCodeError":case"duplicateDataError":newPageNum=_utils2["default"].getCurrentComponentPageNum(action.errorId);break;case"optionQuotaError":case"commodityQuotaError":newPageNum=_utils2["default"].getCurrentComponentPageNum(action.errorInfo[0])}return newPageNum}function paymentProcess(state,action){var _newPayment=state.payment;if(_utils2["default"].processCart(state.data).length<=0)return _newPayment;switch(_newPayment=_lodash2["default"].assign({},state.payment),action.type){case"setCommodityValue":_newPayment.type||(_newPayment.type=_utils2["default"].getPaymentType());break;case"paymentType":_newPayment.type=action.data,_utils2["default"].setPaymentType(action.data);break;case"cashierInfo":_newPayment=_lodash2["default"].assign({},_newPayment,action.data);break;case"paymentState":_newPayment=_lodash2["default"].assign({},_newPayment,action.data)}return _newPayment}function actionsProcess(state,action){var _newData=saveDataProcess(state.data,action),_newValid=state.valid,_newPaymentInfo=state.payment;1===getMode()&&(_newValid=(0,_formValid2["default"])({data:_newData,valid:state.valid,page:state.page},action));var _newPageNum=pageProcess({page:state.page,data:_newData,valid:_newValid},action);1===getMode()&&(_newPaymentInfo=paymentProcess({page:_newPageNum,data:_newData,valid:_newValid,payment:state.payment},action));var shownChanged=_utils2["default"].changeShownComponent(_newData);return shownChanged&&!function(){var _changedData={},_defaultData=_utils2["default"].getDefaultValue();_lodash2["default"].forEach(_utils2["default"].getActive(),function(id){(_newData.hasOwnProperty(""+id)||_defaultData.hasOwnProperty(""+id))&&(_newData.hasOwnProperty(id)?_changedData[id]=_newData[id]:_defaultData[id]&&(_changedData[id]=_defaultData[id]))}),_newData=_changedData}(),{page:_newPageNum,data:_newData,valid:_newValid,payment:_newPaymentInfo}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_MGWsUtil=__webpack_require__(38),_MGWsUtil2=_interopRequireDefault(_MGWsUtil),_formValid=__webpack_require__(40),_formValid2=_interopRequireDefault(_formValid),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_MGCache=__webpack_require__(41),_MGCache2=_interopRequireDefault(_MGCache),_MGDebugger=__webpack_require__(24),_config=(_interopRequireDefault(_MGDebugger),__webpack_require__(9)),_FormMetaInfoMappingUtil=__webpack_require__(30),ws={ajax:_MGWsUtil2["default"].ajax,post:function(url,options){var _default={url:url,type:"POST",dataType:"json"};return _MGWsUtil2["default"].ajax(_jquery2["default"].extend({mode:"abort"},options,_default))},abort:_MGWsUtil2["default"].abort},_FORM_COMPONENTS_NAME_DETAILS=(0,_FormMetaInfoMappingUtil.FORM_COMPONENTS_NAME_DETAILS)({np:_config.lang.cnamePrefix,nf:_config.lang.cnameFirst,nm:_config.lang.cnameMiddle,nl:_config.lang.cnameLast,ns:_config.lang.cnameSuffix,nn:_config.lang.cnameNick}),isDispatching=!1,_HANDLER_GETTER="handler/web/form_runtime/",listeners=[],otherInfoPool={},currentState={page:0,data:{},valid:{},payment:{}},filePool={},isMobile=void 0,getMode=void 0,updateRawInfo=void 0,setRawInfo=void 0,getContent=void 0,formStore={inject:function(injection){listeners=[],otherInfoPool={},currentState={page:0,data:{},valid:{},payment:{}},isMobile=injection.isMobile,getMode=injection.getMode,updateRawInfo=injection.updateRawInfo,setRawInfo=injection.setRawInfo,getContent=injection.getContent},addChangeListener:function(callback){listeners.push(callback);var isSubscribed=!0;return function(){if(isSubscribed){isSubscribed=!1;var _idx=listeners.indexOf(callback);listeners.splice(_idx,1)}}},setDefaultFillingData:function(){if(1===getMode()){currentState.data||(currentState.data={});var d=_utils2["default"].getDefaultValue(),_currentAllComponent=[];do _currentAllComponent=_utils2["default"].getActive(),_lodash2["default"].forEach(_currentAllComponent,function(id){currentState.data.hasOwnProperty(""+id)&&currentState.data[id]&&!_lodash2["default"].isEmpty(currentState.data[id])||(currentState.data[id]=d[id])}),!currentState.payment.type&&_utils2["default"].processCart(currentState.data).length>0&&(currentState.payment=_lodash2["default"].assign({},currentState.payment,{type:_utils2["default"].getPaymentType()})),currentState=actionsProcess(currentState,{});while(_utils2["default"].getActive().length!==_currentAllComponent.length)}},setUvdData:function(){if(1===getMode()){currentState.data||(currentState.data={});var uvdInfo=_utils2["default"].getUvdContactInfo(),_currentAllComponent=[],_setList={};do _currentAllComponent=_utils2["default"].getActive(),_lodash2["default"].forEach(_currentAllComponent,function(id){var component=_utils2["default"].getComponents(id),_structureMapping=["I","II","III","IV"];if(uvdInfo[component.type]&&(!currentState.data.hasOwnProperty(""+id)||!currentState.data[id]||_lodash2["default"].isEmpty(currentState.data[id]))){var _ret5=function(){switch(component.type){case"gender":case"title":var item=_lodash2["default"].find(component.options,{id:+uvdInfo[component.type]});item&&(currentState.data[id]=[item.sId]);break;case"mobile":if(_setList[component.type])return{v:!0};_setList[component.type]=!0,component.isSendMsgAuth?currentState.data[id]={mobile:uvdInfo[component.type]||null}:currentState.data[id]=[uvdInfo[component.type]];break;case"email":case"website":case"tel":case"fax":case"wechat":case"qq":case"skype":case"whatsApp":case"messenger":case"viber":case"line":case"telegram":case"weibo":case"linkedIn":case"twitter":case"facebook":case"instagram":case"mkGooglePlus":if(_setList[component.type])return{v:!0};_setList[component.type]=!0,currentState.data[id]=[uvdInfo[component.type]];break;case"company":case"department":case"position":component.searchComponentType&&1!==+component.searchComponentType||(currentState.data[id]=uvdInfo[component.type]||currentState.data[id]);break;case"address":_structureMapping=_structureMapping.slice(0,+(component.minLevel||3));var _addressInfo=uvdInfo[component.type]||[{},null,null],_valid=!1;component&&component.isLimitCountry&&+component.limitCountry===+(_addressInfo[0]||{}).I&&0!==+component.limitCountry?_valid=!0:component&&!component.isLimitCountry&&0!==component.limitCountry&&(_valid=!0),_valid&&!function(){var _structure=[];_lodash2["default"].forEach(_structureMapping.slice(component.isLimitCountry?1:0),function(lvl){return!!_addressInfo[0][lvl]&&void _structure.push(_addressInfo[0][lvl])}),2===component.componentType?currentState.data[id]={struct:null,content:(currentState.data[id]||{}).content||_addressInfo[1]}:currentState.data[id]={struct:_lodash2["default"].isEmpty(_structure)?null:_structure,content:(currentState.data[id]||{}).content||_addressInfo[1],zipCode:(currentState.data[id]||{}).zipCode||_addressInfo[2]}}();break;case"location":_structureMapping=_structureMapping.slice(0,+(component.minLevel||3));var _locationInfo=uvdInfo[component.type]||{};component.isLimitCountry&&+component.limitCountry===+_locationInfo.I?_valid=!0:component.isLimitCountry||(_valid=!0),_valid&&!function(){var _structure=[];_lodash2["default"].forEach(_structureMapping.slice(component.isLimitCountry?1:0),function(lvl){return!!_locationInfo[lvl]&&void _structure.push(_locationInfo[lvl])}),2!==component.componentType&&(currentState.data[id]={struct:_lodash2["default"].isEmpty(_structure)?null:_structure})}();break;case"name":uvdInfo[component.type]&&(component.isOpenDetails?!function(){var legalNameInfo={};_lodash2["default"].isPlainObject(uvdInfo[component.type])&&_lodash2["default"].forEach(_FORM_COMPONENTS_NAME_DETAILS,function(info){(component.detailsItem||[2,4]).indexOf(+info.id)>-1&&uvdInfo[component.type][info.name]&&(legalNameInfo[info.name]=uvdInfo[component.type][info.name])}),_lodash2["default"].isEmpty(legalNameInfo)||(currentState.data[id]=legalNameInfo)}():!function(){var combineName=null;_lodash2["default"].isPlainObject(uvdInfo[component.type])?uvdInfo[component.type].n?combineName=uvdInfo[component.type].n:(combineName=[],_lodash2["default"].forEach(_FORM_COMPONENTS_NAME_DETAILS,function(info){uvdInfo[component.type][info.name]&&combineName.push(uvdInfo[component.type][info.name])}),combineName=combineName.join(" ")):uvdInfo[component.type]&&_lodash2["default"].isString(uvdInfo[component.type])&&(combineName=""+uvdInfo[component.type]),combineName&&(currentState.data[id]={n:combineName})}());break;default:currentState.data[id]=uvdInfo[component.type]||null}}();if("object"===("undefined"==typeof _ret5?"undefined":_typeof(_ret5)))return _ret5.v}}),currentState=actionsProcess(currentState,{});while(_utils2["default"].getActive().length!==_currentAllComponent.length)}},setIpLoc:function(){if(1===getMode()){currentState.data||(currentState.data={});var ipLocInfo=_utils2["default"].getIpLoc();if(ipLocInfo&&!_lodash2["default"].isEmpty(ipLocInfo)){var _currentAllComponent=[];do _currentAllComponent=_utils2["default"].getActive(),_lodash2["default"].forEach(_currentAllComponent,function(id){var component=_utils2["default"].getComponents(id);if(("location"===component.type||"address"===component.type)&&(!currentState.data.hasOwnProperty(""+id)||!currentState.data[id]||_lodash2["default"].isEmpty(currentState.data[id]))){var _valid=!1;component.isLimitCountry&&+component.limitCountry===+ipLocInfo.I?_valid=!0:component.isLimitCountry||(_valid=!0),_valid&&2!==component.componentType&&(currentState.data[id]=_lodash2["default"].assign({},currentState.data[id],{struct:_lodash2["default"].isEmpty(ipLocInfo)?null:ipLocInfo.slice(component.isLimitCountry?1:0,+(component.minLevel||3))}))}}),currentState=actionsProcess(currentState,{});while(_utils2["default"].getActive().length!==_currentAllComponent.length)}}},checkDMW:function(dwnT,node,done,pureCheck){(pureCheck||1===getMode())&&ws.post("handler/web/form/util/handleGetDmwProgress.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:dwnT,n:node}})}}).done(function(res){pureCheck||0===res.r&&formStore.dispatch({type:"paymentState",data:{isFin:1===+res.dn,isSuccess:1===+res.sc,message:res.msg}}),done&&done(res)})},getState:function(){return currentState},getFiles:function(){return filePool},getPreparedFileIdx:function(id){return filePool[id]?filePool[id]._it:0},validPassword:function(pwd){var _this=this;1!==getMode()&&4!==getMode()||ws.post(_HANDLER_GETTER+"handleVerifyVisitPass.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:_utils2["default"].token(),p:_utils2["default"].getPassword(pwd),iro:4===getMode()?1:0}})}}).done(function(res){0===res.r?(JHR=0,_lodash2["default"].forEach(res.d,function(val,key){_lodash2["default"].isString(val)?window[key]=JSON.parse(val):_lodash2["default"].isPlainObject(val)?window[key]=_lodash2["default"].assign({},window[key],val):window[key]=val}),updateRawInfo(),_utils2["default"].setAsRaw(setRawInfo()),getContent().$form.trigger("viewRender")):res.r===-821&&_this.dispatch({type:"passwordValid",data:"error"})})},getPhoneVerificationCode:function(id){if(1===getMode())return ws.post(_HANDLER_GETTER+"handleGetPhoneVerificationCode.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:_utils2["default"].token(),cp:id,mb:currentState.data[id].mobile}})}}).done(function(res){0===res.r?formStore.dispatch({type:"setVerificationToken",id:id,value:[res.d.t,res.d.vv]}):formStore.dispatch({type:"validMobile",id:id,errId:[res.r]})}).then()},validVerificationCode:function(id,cb){1===getMode()&&ws.post(_HANDLER_GETTER+"handleVerifyVC.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:_utils2["default"].token(),vt:currentState.data[id].verificationToken,vc:currentState.data[id].verificationCode}})}}).done(function(res){cb(0===res.r)})},wxAuth:function(){if(1===getMode()){var _data={t:_utils2["default"].token()};return"https:"===location.protocol&&(_data.s=1),ws.post(_HANDLER_GETTER+"handleGetOrRefreshWcUserInfo.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:_data})}}).done(function(res){return 0===res.r&&(res.uvd?(window.VST&&(window.VST.uvd=res.uvd),updateRawInfo(),_utils2["default"].updateUvdContactInfo(res.uvd.ct),formStore.setUvdData()):res.rWx_jump&&(_MGCache2["default"].set("FPR",document.referrer),(0,_jquery2["default"])(window).trigger("triggerSaveCache"),document.cookie="uvi="+escape(unescape(""))+"; path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.href=res.rWx_jump)),res}).then()}},getLocationInfo:function(pId,maxGEOLvl,size,cb,isMobile){return _utils2["default"].hasGeoCache(pId)?void cb(pId,_utils2["default"].getGeoCache(pId)):void ws.post(_HANDLER_GETTER+"handleGetADsByPid.php",{hideErrorAlert:!0,mode:"queue",portKey:"FS_",queueKey:"handleGetADsByPid",data:{d:JSON.stringify({cvs:{p:pId,mgl:maxGEOLvl||3}})}}).done(function(res){0===res.r&&res.d.l?(null===pId?!function(){var _common=[],_list=[];(res.d._1||res.d._2)&&(_common=_lodash2["default"].uniq([].concat(res.d._1,res.d._2)),_lodash2["default"].forEach(_common,function(id){var _res=_lodash2["default"].find(res.d.l,function(o){return o[0]===id});_res&&_list.push({id:_res[0],name:_res[1],width:isMobile?null:_MGString2["default"].getWidth(_res[1],(size||14)+"px/1 "+_utils2["default"]._FONT)})})),_lodash2["default"].forEach(res.d.l||[],function(info){_common.indexOf(info[0])>-1||_list.push({id:info[0],name:info[1],width:isMobile?null:_MGString2["default"].getWidth(info[1],(size||14)+"px/1 "+_utils2["default"]._FONT)})}),_utils2["default"].setGeoCache(pId,_list)}():_utils2["default"].setGeoCache(pId,_lodash2["default"].map(res.d.l||[],function(info){return{id:info[0],name:info[1],width:isMobile?null:_MGString2["default"].getWidth(info[1],(size||14)+"px/1 "+_utils2["default"]._FONT)}})),cb(pId,_utils2["default"].getGeoCache(pId))):0===res.r&&null===res.d.l&&(_utils2["default"].setGeoCache(pId,null),cb(pId,_utils2["default"].getGeoCache(pId)))})},getLocationInfoByTyping:function(data,pId,maxLevel){return ws.abort(_HANDLER_GETTER+"handleGetADsByTyping.php"),ws.post(_HANDLER_GETTER+"handleGetADsByTyping.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:data,l1:pId,mgl:maxLevel||3}})}})},getRawLocationInfo:function(rawStr,locationId){var needStaticEveryLvl=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ws.abort(_HANDLER_GETTER+"handleGetADsFromRawAddress.php"),ws.post(_HANDLER_GETTER+"handleGetADsFromRawAddress.php",{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{a:rawStr,e:needStaticEveryLvl,l:locationId}})}})},dispatch:function(action){if(action.type){if(isDispatching)throw new Error("processHandler may not dispatch actions.");try{isDispatching=!0,currentState=actionsProcess(currentState,action)}finally{isDispatching=!1}return listeners.slice().forEach(function(listener){return listener(action)}),action}}};exports["default"]=formStore,module.exports=exports["default"]},,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _requiredValid(component,value){return component.isRequired?value?_lodash2["default"].isArray(value)&&""===value.join("")?["required"]:[]:["required"]:[]}function _contentRegexValid(component,value){if(!component.isUseRegEx&&!component.isValidate)return[];var regType=""+component.regExType,_arrayValue=!1;if(component.isValidate)switch(component.type){case"email":_lodash2["default"].isArray(value)?(_arrayValue=[],_lodash2["default"].forEach(value,function(v){_arrayValue=_arrayValue.concat((v||"").split(/[\;\ï¼›]/g))})):_arrayValue=[],regType="2";break;case"mobile":_lodash2["default"].isArray(value)?(_arrayValue=[],_lodash2["default"].forEach(value,function(v){_arrayValue=_arrayValue.concat((v||"").split(/[\;\ï¼›]/g))})):_arrayValue=[],regType="5";break;case"website":_lodash2["default"].isArray(value)?(_arrayValue=[],_lodash2["default"].forEach(value,function(v){_arrayValue=_arrayValue.concat((v||"").split(/[\;\ï¼›]/g))})):_arrayValue=[],regType="3";break;case"qq":_lodash2["default"].isArray(value)?(_arrayValue=[],_lodash2["default"].forEach(value,function(v){_arrayValue=_arrayValue.concat((v||"").split(/[\;\ï¼›]/g))})):_arrayValue=[],regType="4"}if(value){var _checkRes=!0;switch(regType){case"3":_arrayValue?(_checkRes=!0,_lodash2["default"].forEach(_arrayValue,function(v){v&&!_MGString2["default"].isUrl(_lodash2["default"].trim(v))&&(_checkRes=!1)})):_checkRes=_MGString2["default"].isUrl(_lodash2["default"].trim(value));break;case"4":_arrayValue?(_checkRes=!0,_lodash2["default"].forEach(_arrayValue,function(v){v&&!_MGString2["default"].isQQ(_lodash2["default"].trim(v))&&(_checkRes=!1)})):_checkRes=_MGString2["default"].isQQ(_lodash2["default"].trim(value));break;case"5":_arrayValue?(_checkRes=!0,_lodash2["default"].forEach(_arrayValue,function(v){v&&!_MGString2["default"].isMobileCN(_lodash2["default"].trim(v))&&(_checkRes=!1)})):_checkRes=_MGString2["default"].isMobileCN(_lodash2["default"].trim(value));break;case"hk5":_arrayValue?(_checkRes=!0,_lodash2["default"].forEach(_arrayValue,function(v){v&&!_MGString2["default"].isMobileHK(_lodash2["default"].trim(v))&&(_checkRes=!1)})):_checkRes=_MGString2["default"].isMobileHK(_lodash2["default"].trim(value));break;case"6":_checkRes=_MGString2["default"].isCnIdCard(_lodash2["default"].trim(value));break;case"7":_checkRes=_MGString2["default"].isIP(_lodash2["default"].trim(value));break;case"8":_checkRes=_MGString2["default"].isNumber(_lodash2["default"].trim(value));break;case"-1":_checkRes=!0,component.regEx&&(_checkRes=_MGString2["default"].strRegCheck(component.regEx+"",_lodash2["default"].trim(value)));break;case"2":default:_arrayValue?(_checkRes=!0,_lodash2["default"].forEach(_arrayValue,function(v){v&&!_MGString2["default"].isEmail(_lodash2["default"].trim(v))&&(_checkRes=!1)})):_checkRes=_MGString2["default"].isEmail(_lodash2["default"].trim(value))}if(!_checkRes)return["contentRegex"]}return[]}function _verificationMobileValid(component,value){return value&&value.mobile?_MGString2["default"].isMobileCN(value.mobile)?[]:["mobileError"]:["mobileRequired"]}function _requiredNameValid(component,value){if(!component.isRequired)return[];var hasValue=!1;return value&&(_lodash2["default"].forEach(value,function(v,k){if(v&&_lodash2["default"].trim(v))return hasValue=!0,!1}),hasValue)?[]:["required"]}function _requiredInfoGroupValid(component,value){if(!component.isRequired)return[];var hasValue=!1;return value&&(_lodash2["default"].forEach(value,function(d){if(d.info&&_lodash2["default"].trim(d.info))return hasValue=!0,!1}),hasValue)?[]:["required"]}function _requiredTabularValid(component,value){if(!component.isRequired)return[];var _hasEmpty=!1;return value?_lodash2["default"].forEach(component.questions,function(question){(!value[question.id]||_lodash2["default"].isArray(value[question.id])&&_lodash2["default"].isEmpty(value[question.id]))&&(_hasEmpty=!0)}):_hasEmpty=!0,_hasEmpty?["required"]:[]}function _requiredCommodityValid(component,value){if(!component.isRequired)return[];var _itemCount=0;return _lodash2["default"].forEach(value,function(num){_itemCount+=+num}),_itemCount>0?[]:["required"]}function _requiredAttachmentValid(component,value){if(!component.isRequired)return[];var isAllValid=value&&value.length>0;return _MGDebugger2["default"].log(value),_lodash2["default"].forEach(value,function(info){info.error&&(isAllValid=!1)}),isAllValid?[]:["required"]}function _inputLengthValid(component,value){var hasError=[];if(component.isWordLimit&&value&&!_lodash2["default"].isEmpty(value)){var valueLen=value.length;valueLen>0&&(component.wordLimitFrom&&valueLen<component.wordLimitFrom||component.wordLimitTo&&valueLen>component.wordLimitTo)&&hasError.push("tip")}return hasError}function _nameLengthValid(component,value){var hasError=[],_NAME_LENGTH={n:255,np:63,nf:63,nm:63,nl:63,ns:63,nn:63};if(!value)return hasError;var _lenError=[];return _lodash2["default"].forEach(value,function(part,nkey){part&&(part+"").length>_NAME_LENGTH[nkey]&&(_lenError.push(nkey),hasError.push("length"))}),_lodash2["default"].isEmpty(_lenError)||(_errorInfo[component.id]={length:_lenError}),_lodash2["default"].uniq(hasError)}function _checkboxChooseLimitValid(component,value){var hasError=[];return"checkbox"!==component.type&&"picCheckbox"!==component.type?hasError:(1===component.isLimitChooseNum&&(void 0!==component.chooseNumFrom&&""!==component.chooseNumFrom&&(!value||value&&value.length<+component.chooseNumFrom)&&hasError.push("tip"),void 0!==component.chooseNumTo&&""!==component.chooseNumTo&&value&&value.length>+component.chooseNumTo&&hasError.push("tip")),hasError)}function _otherInputRequiredValid(component,value){var hasError=[];if(1!==component.isAddOtherOption)return hasError;if(1!==component.otherOptionIsRequired)return hasError;var otherInfo=null;if(_lodash2["default"].forEach(value,function(val){if(_lodash2["default"].isObject(val)){if(val.id===component.otherId)return otherInfo=val,!1}else if(val===component.otherId)return otherInfo=val,!1}),null===otherInfo)return hasError;if(_errorInfo[component.id]||(_errorInfo[component.id]={}),_lodash2["default"].isObject(otherInfo)){if(otherInfo.value)return hasError;_errorInfo[component.id].otherInputRequired=component.otherOptionTitle,hasError.push("otherInputRequired")}else _errorInfo[component.id].otherInputRequired=component.otherOptionTitle,hasError.push("otherInputRequired");return hasError}function _contentInputRequiredValid(component,value){var hasError=[];return 1===component.isAfterInput&&1===component.afterInputIsRequired&&!function(){var _setInput=!0,_illegalOpt=[];_lodash2["default"].forEach(value,function(val){_lodash2["default"].isObject(val)?val.id!==component.otherId&&(val.value||(_setInput=!1,_illegalOpt.push(val.id))):val!==component.otherId&&(_setInput=!1,_illegalOpt.push(val))}),_errorInfo[component.id]||(_errorInfo[component.id]={}),_setInput||(hasError.push("inputRequired"),_errorInfo[component.id].inputRequired=_illegalOpt)}(),hasError}function _requiredMultiLevelValid(component,value){if(value){var _selected=value[0];if(_selected){if(_selected.current&&!_lodash2["default"].isEmpty(_selected.current)){if(!_selected.id)return["required"]}else if((!_selected.current||_lodash2["default"].isEmpty(_selected.current))&&component.isRequired&&!_selected.id)return["required"]}else if(component.isRequired)return["required"]}else if(component.isRequired)return["required"];return[]}function _numberRangeValid(component,value){var hasError=[];if(component.isNumRange&&null!==value&&void 0!==value&&""!==value){var valueLen=+value;(component.numRangeFrom&&valueLen<component.numRangeFrom||component.numRangeTo&&valueLen>component.numRangeTo)&&hasError.push("tip")}return hasError}function _numberSaveValid(component,value){var hasError=[],_v=+value;return Math.floor(_v)===_v&&(value>Number.MAX_SAFE_INTEGER||value<Number.MIN_SAFE_INTEGER)&&hasError.push("numberSaveRange"),hasError}function _numberValueTypeValid(component,value){var hasError=[];if(value){var _number=+value;isNaN(_number)&&hasError.push("number"),_lodash2["default"].isNumber(_number)?(1!==component.isAcceptDecimals&&Math.floor(_number)!==_number&&hasError.push("numberDecimals"),1!==component.isAcceptNegative&&_number<0&&hasError.push("numberNegative")):hasError.push("number")}return hasError}function _numberDecimalLengthValid(component,value){var hasError=[];return hasError}function _rankComponentFillingValid(component,value){var _allIds=[];_lodash2["default"].forEach(component.options,function(info){_allIds.indexOf(info.sId)===-1&&_allIds.push(info.sId)});var _digits=Math.min(+component.trueDigits,_allIds.length);if(component.isRequired){if(_digits!==Object.keys(value||{}).length)return["required"]}else if(!_lodash2["default"].isEmpty(value||{})&&_digits!==Object.keys(value||{}).length)return["required"];return[]}function _dateTimeFillingValid(component,value){if(value=_lodash2["default"].trim(value)){var REG_FULL=/^(\d{4}?)-(\d{1,2}?)-(\d{1,2}?)/g,REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)/g,REG_DAY=/^--(\d{1,2}?)/g,REG_MONTH=/^-(\d{1,2}?)-/g,REG_YEAR=/^(\d{3,4}?)--/g,REG_TIME=/(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?/g,_dataType=null;if(value.match(REG_FULL)?_dataType=1:value.match(REG_YEAR_MONTH)?_dataType=2:value.match(REG_MONTH_DAY)?_dataType=3:value.match(REG_YEAR)?_dataType=4:value.match(REG_MONTH)?_dataType=5:value.match(REG_DAY)&&(_dataType=6),"dateTime_time"===component.type&&null===_dataType){if(!value.match(REG_TIME))return["calendarDataError"]}else if((component.dateFormat||("birthDate"===component.type?[1,3]:[1])).indexOf(_dataType)===-1)return["calendarTypeError"];var moment=(0,_MGMoment2["default"])(value);if(1===_dataType){if(component.isLimitDays&&!_lodash2["default"].isEmpty(component.limitDays)&&component.limitDays.indexOf(moment.week()+1)===-1)return["calendarValidError"];if(component.isLimitDayInterval){var _fMoment=void 0,_tMoment=void 0;if(component.dayIntervalFrom){component.dayIntervalFrom===!0?_fMoment=(0,_MGMoment2["default"])().startOf("date"):component.dayIntervalFrom&&component.dayIntervalFrom!==-1&&(_fMoment=(0,_MGMoment2["default"])(component.dayIntervalFrom).startOf("date")),component.dayIntervalTo===!0?_tMoment=(0,_MGMoment2["default"])().endOf("date"):component.dayIntervalTo&&component.dayIntervalTo!==-1&&(_tMoment=(0,_MGMoment2["default"])(component.dayIntervalTo).endOf("date"));var _valid=!0;if(_fMoment&&(_valid=_valid&&_fMoment.time()<=moment.time()),_tMoment&&(_valid=_valid&&_tMoment.time()>=moment.time()),!_valid)return["calendarValidError"]}}}if((1===_dataType||"dateTime_time"===component.type&&null===_dataType)&&component.isLimitTimeInterval&&"dateTime_date"!==component.type){var _fTime=void 0,_tTime=void 0,_currentTime=1e4*moment.hours()+100*moment.minutes()+moment.seconds(),_valid2=!0,_isChecked=!1;if(component.timeIntervalFrom&&component.timeIntervalTo){var splitTime=component.timeIntervalFrom.split(":");_fTime=1e4*splitTime[0]+100*splitTime[1]+ +splitTime[2],splitTime=component.timeIntervalTo.split(":"),_tTime=1e4*splitTime[0]+100*splitTime[1]+ +splitTime[2],
_fTime>_tTime&&(_isChecked=!0,_valid2=_currentTime>=_fTime&&_currentTime<235959||_currentTime<=_tTime&&_currentTime>0)}if(!_isChecked){if(component.timeIntervalFrom){var _splitTime=component.timeIntervalFrom.split(":");_fTime=1e4*_splitTime[0]+100*_splitTime[1]+ +_splitTime[2]}if(component.timeIntervalTo){var _splitTime2=component.timeIntervalTo.split(":");_tTime=1e4*_splitTime2[0]+100*_splitTime2[1]+ +_splitTime2[2]}_fTime&&(_valid2=_valid2&&_currentTime>=_fTime),_tTime&&(_valid2=_valid2&&_currentTime<=_tTime)}if(!_valid2)return["calendarValidError"]}}return[]}function _attachmentFileValid(component,value){var isAllValid=!0;return _lodash2["default"].forEach(value,function(info){info.error&&(isAllValid=!1)}),isAllValid?[]:["tip"]}function _requiredLocationValid(component,value){if(!component.isRequired)return[];var hasError=["required"];return value&&value.struct?value.struct&&_lodash2["default"].isEmpty(value.struct)?hasError:hasError=[]:hasError}function _requiredAddressValid(component,value){return component.isRequired?value&&(value.struct&&!_lodash2["default"].isEmpty(value.struct)||value.content||value.zipCode)?[]:["required"]:[]}function _commodityFillingNumValid(data){var _cartInfo=_utils2["default"].processCart(data),_innerPayInfo=_utils2["default"].getInnerFormPayInfo();_MGDebugger2["default"].log(_cartInfo),_MGDebugger2["default"].log(_innerPayInfo);var _totalNum=0,_totalPrice=0;if(_lodash2["default"].forEach(_cartInfo,function(cartItem){_totalPrice+=cartItem.total||0,_totalNum+=cartItem.num||0}),_MGDebugger2["default"].log(_totalPrice,_totalNum),_cartInfo&&_cartInfo.length>0){if(_innerPayInfo.isLimitAmount&&(_innerPayInfo.limitAmountTo||0===_innerPayInfo.limitAmountTo)&&_innerPayInfo.limitAmountTo<_totalPrice)return["amountOver"];if(_innerPayInfo.isLimitQuantity&&(_innerPayInfo.limitQuantityTo||0===_innerPayInfo.limitQuantityTo)&&_innerPayInfo.limitQuantityTo<_totalNum)return["quantityOver"]}return[]}function _commodityLimitValid(data){var _sales=_utils2["default"].getCommodities();if(_sales&&_sales.length>0){var _cartInfo=_utils2["default"].processCart(data),_innerPayInfo=_utils2["default"].getInnerFormPayInfo(),_totalNum=0,_totalPrice=0;if(_lodash2["default"].forEach(_cartInfo,function(cartItem){_totalPrice+=cartItem.total||0,_totalNum+=cartItem.num||0}),_innerPayInfo.isLimitAmount){if((_innerPayInfo.limitAmountFrom||0===_innerPayInfo.limitAmountFrom)&&_innerPayInfo.limitAmountFrom>_totalPrice)return["amountShort"];if((_innerPayInfo.limitAmountTo||0===_innerPayInfo.limitAmountTo)&&_innerPayInfo.limitAmountTo<_totalPrice)return["amountOver"]}if(_innerPayInfo.isLimitQuantity){if((_innerPayInfo.limitQuantityFrom||0===_innerPayInfo.limitQuantityFrom)&&_innerPayInfo.limitQuantityFrom>_totalNum)return["quantityShort"];if((_innerPayInfo.limitQuantityTo||0===_innerPayInfo.limitQuantityTo)&&_innerPayInfo.limitQuantityTo<_totalNum)return["quantityOver"]}}return[]}function _allValid(d){var isPage=arguments.length>1&&void 0!==arguments[1]&&arguments[1],valid={};_errorInfo={};var currentAll=_utils2["default"].getActive(isPage);_lodash2["default"].forEach(_utils2["default"].getComponents(),function(info,id){if(currentAll.indexOf(+id)===-1)return!0;var component=info,err=[];switch(component.type){case"name":err=err.concat(_nameLengthValid(component,d[id]),_requiredNameValid(component,d[id]),_requiredValid(component,d[id]));break;case"input":case"email":case"tel":case"fax":case"website":case"wechat":case"qq":case"skype":case"whatsApp":case"messenger":case"viber":case"line":case"telegram":case"weibo":case"linkedIn":case"twitter":case"facebook":case"instagram":case"mkGooglePlus":err=err.concat(_inputLengthValid(component,d[id]),_requiredValid(component,d[id]),_contentRegexValid(component,d[id]));break;case"mobile":var _value=d[id];component.isSendMsgAuth&&_lodash2["default"].isObject(_value)&&(_value=_value.mobile),err=err.concat(_inputLengthValid(component,_value),_requiredValid(component,_value),_contentRegexValid(component,_value));break;case"number":case"currency":err=err.concat(_numberValueTypeValid(component,d[id]),_numberSaveValid(component,d[id]),_numberRangeValid(component,d[id]),_numberDecimalLengthValid(component,d[id]),_requiredValid(component,d[id]));break;case"checkbox":case"radio":case"picCheckbox":case"picRadio":case"dropDown":case"gender":case"title":err=err.concat(_checkboxChooseLimitValid(component,d[id]),_contentInputRequiredValid(component,d[id]),_otherInputRequiredValid(component,d[id]),_requiredValid(component,d[id]));break;case"company":case"position":err=err.concat(_requiredValid(component,d[id])),2!==+component.searchComponentType&&3!==+component.searchComponentType||(err=err.concat(_contentInputRequiredValid(component,d[id]),_otherInputRequiredValid(component,d[id])));break;case"multiLevel":err=err.concat(_requiredMultiLevelValid(component,d[id]));break;case"rate":err=err.concat(_requiredValid(component,d[id]));break;case"rank":err=err.concat(_rankComponentFillingValid(component,d[id]));break;case"tabular":err=err.concat(_requiredTabularValid(component,d[id]));break;case"commodity":err=err.concat(_requiredCommodityValid(component,d[id]));break;case"picAttachment":case"attachment":err=err.concat(_requiredAttachmentValid(component,d[id]),_attachmentFileValid(component,d[id]));break;case"city":case"location":err=err.concat(_requiredValid(component,d[id]),_requiredLocationValid(component,d[id]));break;case"address":err=err.concat(_requiredValid(component,d[id]),_requiredAddressValid(component,d[id]));break;case"dateTime_both":case"dateTime_date":case"dateTime_time":case"birthDate":err=err.concat(_requiredValid(component,d[id]),_dateTimeFillingValid(component,d[id]));break;case"IM":case"SNS":err=err.concat(_requiredInfoGroupValid(component,d[id]));break;default:err=err.concat(_requiredValid(component,d[id]))}err.length>0&&(valid[id]=_lodash2["default"].uniq(err))});var _valid={};_lodash2["default"].forEach(valid,function(data,id){data&&!_lodash2["default"].isEmpty(data)&&(_valid[id]=data)});var commodityValid=_commodityLimitValid(d);return commodityValid&&!_lodash2["default"].isEmpty(commodityValid)&&(_valid.cart=commodityValid),0===Object.keys(_valid).length?null:(_MGDebugger2["default"].log(_valid),_valid)}function validProcess(currentState,action){var valid=currentState.valid,data=currentState.data,page=currentState.page,newValid={},component=_utils2["default"].getComponents(action.id),err=void 0;switch(action.type){case"setValue":case"setMultiValue":if(valid&&valid[action.id]){var _err=[];switch(valid[action.id].indexOf("required")>-1&&(_err=_err.concat(_requiredValid(component,action.value))),component.type){case"input":valid[action.id].indexOf("tip")>-1&&(_err=_err.concat(_inputLengthValid(component,action.value)));break;case"number":valid[action.id].indexOf("tip")>-1&&(_err=_err.concat(_numberRangeValid(component,action.value),_numberSaveValid(component,action.value))),(valid[action.id].indexOf("numberDecimals")>-1||valid[action.id].indexOf("numberNegative")>-1||valid[action.id].indexOf("number")>-1)&&(_err=_err.concat(_numberValueTypeValid(component,action.value)))}newValid[action.id]=_lodash2["default"].uniq(_err)}break;case"inputBlur":err=[],valid&&valid[action.id]&&valid[action.id].indexOf("required")>-1&&(err=err.concat(_requiredValid(component,action.value))),err=err.concat(_inputLengthValid(component,action.value)),newValid[action.id]=_lodash2["default"].uniq(err);break;case"numberBlur":err=[],err=err.concat(_numberRangeValid(component,data[action.id]),_numberSaveValid(component,data[action.id]),_numberValueTypeValid(component,data[action.id])),newValid[action.id]=_lodash2["default"].uniq(err);break;case"setGroupInfo":valid[action.id]&&valid[action.id].length>0&&(err=[],err=err.concat(_requiredInfoGroupValid(component,data[action.id])),newValid[action.id]=_lodash2["default"].uniq(err));break;case"setSelector":case"setSelectorValue":case"blurSelectorInput":err=[],valid[action.id]&&valid[action.id].length>0&&(action.isCheckbox&&valid[action.id].indexOf("tip")>-1&&(err=err.concat(_checkboxChooseLimitValid(component,action.value))),valid[action.id].indexOf("inputRequired")>-1&&(err=err.concat(_contentInputRequiredValid(component,data[action.id]))),valid[action.id].indexOf("otherInputRequired")>-1&&(err=err.concat(_otherInputRequiredValid(component,data[action.id])))),newValid[action.id]=err;break;case"setMultiLevelSelector":err=[],valid[action.id]&&valid[action.id].length>0&&(err=err.concat(_requiredMultiLevelValid(component,data[action.id]))),newValid[action.id]=err;break;case"setCommodityValue":var _commodityErrorInfo=_commodityFillingNumValid(data);err=[].concat(_commodityErrorInfo),newValid[action.id]=err,_commodityErrorInfo.length>0?newValid.cart=_commodityErrorInfo:newValid.cart=null,_MGDebugger2["default"].log(newValid,_commodityErrorInfo);break;case"submitValid":return newValid=_allValid(data),newValid||{};case"duplicateDataError":newValid=_allValid(data)||{},action.errorId&&(_errorInfo[action.errorId]={duplicateData:data[action.errorId]},newValid[action.errorId]=["duplicateData"].concat(newValid[action.errorId]));break;case"page":return action.data>page?(newValid=_allValid(data,!0),newValid||{}):valid;case"optionQuotaError":newValid=_allValid(data)||{},action.errorInfo&&(_errorInfo[action.errorInfo[0]]={optionQuota:[action.errorInfo[1]]},newValid[action.errorInfo[0]]=["optionQuota"].concat(newValid[action.errorInfo[0]]));break;case"commodityQuotaError":newValid=_allValid(data)||{},action.errorInfo&&(_errorInfo[action.errorInfo[0]]={commodityQuota:[action.errorInfo[1]]},newValid[action.errorInfo[0]]=["commodityQuota"].concat(newValid[action.errorInfo[0]]));break;case"validMobile":err=[];var errorCode={"-57":"extResourceUnavailable","-910":"mobileError","-911":"areaUnavailable"};action.errId&&action.errId in errorCode&&err.push(errorCode[action.errId]),err=err.concat(_verificationMobileValid(component,data[action.id])),newValid[action.id]=_lodash2["default"].uniq(err);break;case"setMobileValue":if(valid&&valid[action.id]){var _err2=[];newValid[action.id]=_lodash2["default"].uniq(_err2)}break;case"MobileValidEmpty":newValid=_allValid(data)||{},action.errorId&&(newValid[action.errorId]=["mobileVCRequired"].concat(newValid[action.errorId]));break;case"MobileValidCodeError":newValid=_allValid(data)||{},action.errorId&&(newValid[action.errorId]=["mobileVCError"].concat(newValid[action.errorId]))}if(!_lodash2["default"].isEmpty(newValid)){var _ret2=function(){var _valid={};return _lodash2["default"].forEach(_lodash2["default"].assign({},valid||{},newValid),function(data,id){data&&!_lodash2["default"].isEmpty(data)&&(_valid[id]=data)}),_lodash2["default"].isEmpty(_valid)?{v:{}}:{v:_valid}}();if("object"===("undefined"==typeof _ret2?"undefined":_typeof(_ret2)))return _ret2.v}return valid||{}}function getErrorDetail(type,id){var _res="";return _errorInfo[id]&&!function(){var _info=_errorInfo[id],component=_utils2["default"].getComponents(id);if(_info[type])switch(component.type){case"checkbox":case"radio":case"picCheckbox":case"picRadio":case"dropDown":case"title":case"gender":_res="",_lodash2["default"].forEach(component.options,function(info){_info[type].indexOf(info.sId)>-1&&(_res+=" "+info.value)});break;case"commodity":_res="",_lodash2["default"].forEach(component.commodities,function(info){_info[type].indexOf(info.sId)>-1&&(_res+=" "+info.name)});break;default:_res=_info[type]}}(),_res}function getErrorInfo(errorType,id){return _errorInfo[id]&&_errorInfo[id][errorType]?_errorInfo[id][errorType]:null}function getErrorContent(errorType,id){var component=_utils2["default"].getComponents(id);return"required"===errorType&&("rank"===component.type?errorType="rankRequired":"tabular"===component.type?errorType="tabularRequired":"multiLevel"===component.type?errorType="multiRequired":"number"!==component.type&&"currency"!==component.type||(errorType="number")),_ERROR_INFO[errorType](getErrorDetail(errorType,id))}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.getErrorInfo=getErrorInfo,exports.getErrorContent=getErrorContent;var _utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_config=__webpack_require__(9),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_extensions=__webpack_require__(33),_MGDebugger=(_interopRequireDefault(_extensions),__webpack_require__(24)),_MGDebugger2=_interopRequireDefault(_MGDebugger),_errorInfo={};exports["default"]=validProcess;var _ERROR_INFO={required:function(){return _config.lang.errRequired},multiRequired:function(){return _config.lang.errMultiRequired},rankRequired:function(){return _config.lang.errRankRequired},tabularRequired:function(){return _config.lang.errTabularRequired},duplicateData:function(data){return _config.lang.errDuplicateData},otherInputRequired:function(optInfo){return _config.lang.errOptionInputRequiredFunc({options:optInfo})},inputRequired:function(optInfo){return _config.lang.errOptionInputRequiredFunc({options:optInfo})},numberDecimals:function(){return _config.lang.errNumberInteger},numberDecimalLength:function(){return _config.lang.errDecimalLength},numberNegative:function(){return _config.lang.errPositiveNumber},number:function(){return _config.lang.errNumber},numberSaveRange:function(){return _config.lang.errNumberRange},contentRegex:function(type){return _config.lang.errContentReg},calendarDataError:function(){return _config.lang.errCalendarData},calendarTypeError:function(){return _config.lang.errCalendarType},calendarValidError:function(){return _config.lang.errCalendarValid},optionQuota:function(optInfo){return _config.lang.errOptionQuotaFullErrFunc({options:optInfo})},commodityQuota:function(optInfo){return _config.lang.errCommodityQuotaFullErrFunc({options:optInfo})},amountShort:function(){var _innerPayInfo=_utils2["default"].getInnerFormPayInfo();return _config.lang.errCommodityAmountShortFunc({num:_innerPayInfo.limitAmountFrom})},amountOver:function(){var _innerPayInfo=_utils2["default"].getInnerFormPayInfo();return _config.lang.errCommodityAmountOverFunc({num:_innerPayInfo.limitAmountTo})},quantityShort:function(){var _innerPayInfo=_utils2["default"].getInnerFormPayInfo();return _config.lang.errCommodityQuantityShortFunc({num:_innerPayInfo.limitQuantityFrom})},quantityOver:function(){var _innerPayInfo=_utils2["default"].getInnerFormPayInfo();return _config.lang.errCommodityQuantityOverFunc({num:_innerPayInfo.limitQuantityTo})},mobileRequired:function(){return _config.lang.errMobileRequired},mobileError:function(){return _config.lang.errMobileError},extResourceUnavailable:function(){return _config.lang.errMobileExtResourceUnavailable},areaUnavailable:function(){return _config.lang.errMobileAreaUnavailable},mobileVCRequired:function(){return _config.lang.errMobileVCRequired},mobileVCError:function(){return _config.lang.errMobileVCError}}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cache=function(){function _findExist(arr,key){for(var len=arr.length;len--;)if(arr[len]===key)return!0;return!1}function _removeElems(arr,key){return arr.filter(function(val){return val!==key})}function checkExpired(){var _newCachePlaceInfo,_cacheMapping,_cachePlaceInfo,_now=(new Date).getTime();_isLocalStorage?(_cacheMapping=JSON.parse(_localStorage.getItem(__cacheMapping)||"{}"),_cachePlaceInfo=_cacheMapping[_cachePlace]||"",_cachePlaceInfo=_cachePlaceInfo.split(","),_newCachePlaceInfo=[],_cachePlaceInfo.forEach(function(item){_cache.get(item,!0)-_now<0?(_cache.remove(item),_localStorage.removeItem(_cachePlace+item+"_time")):_newCachePlaceInfo.push(item)}),Object.keys(_localStorage).forEach(function(itemKey){var _matchInfo=itemKey.match(new RegExp("^"+_cachePlace+"(FR_.*?_)"));_matchInfo&&_cachePlaceInfo.indexOf(_matchInfo[1])===-1&&(_cache.remove(_matchInfo[1]),_localStorage.removeItem(_cachePlace+_matchInfo[1]+"_time"))}),_cacheMapping[_cachePlace]=_newCachePlaceInfo.join(","),_localStorage.setItem(__cacheMapping,JSON.stringify(_cacheMapping))):_isUserData&&(_dataDom.load(__cacheMapping),_cacheMapping=_dataDom.getAttribute(_cachePlace)||"",_cachePlaceInfo=_cacheMapping.split(","),_newCachePlaceInfo=[],_cachePlaceInfo.forEach(function(item){_cache.get(item,!0)-_now<0?(_cache.remove(item),_dataDom.load(_cachePlace),_dataDom.removeAttribute(item+"_time"),_dataDom.save(_cachePlace)):_newCachePlaceInfo.push(item)}),_cacheMapping=_newCachePlaceInfo.join(","),_dataDom.setAttribute(_cachePlace,_cacheMapping),_dataDom.save(__cacheMapping))}function _cacheInit(){if(!_dataDom&&!_isLocalStorage){try{_dataDom=document.createElement("input"),_dataDom.type="hidden",_dataDom.style.display="none",_dataDom.addBehavior("#default#userData"),document.body.appendChild(_dataDom);var expiresDate=new Date;expiresDate.setDate(expiresDate.getDate()+30),_dataDom.expires=expiresDate.toUTCString()}catch(error){return!1}return!0}}var _dataDom=null,_localStorage=window.localStorage,_isLocalStorage=!!_localStorage;try{window.localStorage.test="test"}catch(_){_isLocalStorage=!1}_isLocalStorage&&_localStorage.removeItem("test");var _isUserData,_cachePlace,hostName=(window.location.hostname||"").replace(/[\.\\\-]/gim,""),__cacheMapping="cmp";isNaN(+hostName)||(hostName="lc"+hostName),_cachePlace=hostName?hostName:"localStatus";var _cache={setConstrains:function(constrainsString){_cachePlace+=constrainsString,window.setTimeout(function(){checkExpired()},1e3)},get:function(key,time){var _cacheMapping,_hasValue;if(_isLocalStorage){_cacheMapping=JSON.parse(_localStorage.getItem(__cacheMapping)||"{}");var _cachePlaceInfo=_cacheMapping[_cachePlace]||"";return _cachePlaceInfo=_cachePlaceInfo.split(","),_hasValue=_findExist(_cachePlaceInfo,key),!!_hasValue&&_localStorage.getItem(_cachePlace+key+(time?"_time":""))}if(_isUserData)return _dataDom.load(__cacheMapping),_cacheMapping=_dataDom.getAttribute(_cachePlace)||"",_cacheMapping=_cacheMapping.split(","),_hasValue=_findExist(_cacheMapping,key),!!_hasValue&&(_dataDom.load(_cachePlace),_dataDom.getAttribute(key+(time?"_time":"")))},set:function(key,value){var _cacheMapping,_tempPlaceObj={},_currentDate=new Date,_expiredDate=_currentDate.setDate(_currentDate.getDate()+30);if(_isLocalStorage){_cacheMapping=JSON.parse(_localStorage.getItem(__cacheMapping)||"{}");var _cachePlaceInfo=_cacheMapping[_cachePlace]||"";_cachePlaceInfo=_cachePlaceInfo.split(","),_cachePlaceInfo.push(key),_cachePlaceInfo.forEach(function(v){_tempPlaceObj[v]=1}),_cachePlaceInfo=Object.keys(_tempPlaceObj),_cachePlaceInfo=_cachePlaceInfo.join(","),_cacheMapping[_cachePlace]=_cachePlaceInfo,_localStorage.setItem(__cacheMapping,JSON.stringify(_cacheMapping)),_localStorage.setItem(_cachePlace+key,value),_localStorage.setItem(_cachePlace+key+"_time",_expiredDate)}else _isUserData&&(_dataDom.load(__cacheMapping),_cacheMapping=_dataDom.getAttribute(_cachePlace)||"",_cacheMapping=_cacheMapping.split(","),_cacheMapping.push(key),_cacheMapping.forEach(function(v){_tempPlaceObj[v]=1}),_cacheMapping=Object.keys(_tempPlaceObj),_cacheMapping=_cacheMapping.join(","),_dataDom.setAttribute(_cachePlace,_cacheMapping),_dataDom.save(__cacheMapping),_dataDom.load(_cachePlace),_dataDom.setAttribute(key.replace(/\(|\)/g,"_"),value),_dataDom.setAttribute(key.replace(/\(|\)/g,"_")+"_time",_expiredDate),_dataDom.save(_cachePlace))},remove:function(key){var _cacheMapping,_hasValue;if(_isLocalStorage){_cacheMapping=JSON.parse(_localStorage.getItem(__cacheMapping)||"{}");var _cachePlaceInfo=_cacheMapping[_cachePlace]||"";return _cachePlaceInfo=_cachePlaceInfo.split(","),_hasValue=_findExist(_cachePlaceInfo,key),_hasValue&&(_cachePlaceInfo=_removeElems(_cachePlaceInfo,key),_cacheMapping[_cachePlace]=_cachePlaceInfo.join(","),_localStorage.setItem(__cacheMapping,JSON.stringify(_cacheMapping)),_localStorage.removeItem(_cachePlace+key),_localStorage.removeItem(_cachePlace+key+"_time")),!0}if(_isUserData)return _dataDom.load(__cacheMapping),_cacheMapping=_dataDom.getAttribute(_cachePlace)||"",_cacheMapping=_cacheMapping.split(","),_hasValue=_findExist(_cacheMapping,key),_hasValue&&(_cacheMapping=_removeElems(_cacheMapping,key),_cacheMapping.length>0?_dataDom.setAttribute(_cachePlace,_cacheMapping.join(",")):_dataDom.removeAttribute(_cachePlace),_dataDom.save(__cacheMapping),_dataDom.load(_cachePlace),key&&(_dataDom.removeAttribute(key.replace(/\(|\)/g,"_")),_dataDom.removeAttribute(key.replace(/\(|\)/g,"_")+"_time")),_dataDom.save(_cachePlace)),!0},clear:function(){var _cacheMapping;if(_isLocalStorage){_cacheMapping=JSON.parse(_localStorage.getItem(__cacheMapping)||"{}");var _cachePlaceInfo=_cacheMapping[_cachePlace]||"";return _cachePlaceInfo=_cachePlaceInfo.split(","),delete _cacheMapping[_cachePlace],_localStorage.setItem(__cacheMapping,JSON.stringify(_cacheMapping)),_cachePlaceInfo.forEach(function(key){_localStorage.removeItem(_cachePlace+key),_localStorage.removeItem(_cachePlace+key+"_time")}),!0}if(_isUserData)return _dataDom.load(__cacheMapping),_cacheMapping=_dataDom.getAttribute(_cachePlace)||"",_cacheMapping=_cacheMapping.split(","),_dataDom.removeAttribute(_cachePlace),_dataDom.save(__cacheMapping),_dataDom.load(_cachePlace),_cacheMapping.forEach(function(key){_dataDom&&key&&(_dataDom.removeAttribute(key),_dataDom.removeAttribute(key.replace(/\(|\)/g,"_")+"_time"))}),_dataDom.save(_cachePlace),!0}};return _isUserData=_cacheInit(),_cache}();exports["default"]=cache,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formMetaUtil=__webpack_require__(47),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Input)",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputBlur",id:this.props.data.id,value:e.target.value})},renderTips:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle;if(1!==data.isWordLimit)return null;var content=null,wrapperError=!1,isErrorTip=(valid||[]).indexOf("tip")>-1;return _lodash2["default"].isNumber(data.wordLimitFrom)&&_lodash2["default"].isNumber(data.wordLimitTo)?content=[_addons2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_tip_input",{error:isErrorTip}),key:"inputLength"},(fill||"").length),_addons2["default"].createElement("span",{key:"tipContent"},"/"+data.wordLimitFrom+"~"+data.wordLimitTo)]:_lodash2["default"].isNumber(data.wordLimitFrom)?(wrapperError=!0,content=_config.lang.cInputWordLimitFormFunc({num:data.wordLimitFrom})):_lodash2["default"].isNumber(data.wordLimitTo)&&(content=[_addons2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_tip_input",{error:isErrorTip}),key:"inputLength"},(fill||"").length),_addons2["default"].createElement("span",{key:"tipContent"},"/"+data.wordLimitTo)]),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},content)},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,style=_props2.style,itemNum=_props2.itemNum,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,textAreaStyle=_formStyle2.textAreaStyle,inputWithIconStyle=_formStyle2.inputWithIconStyle,inputIconStyle=_formStyle2.inputIconStyle,Component="input";"0"==data.isOnlySingle&&(Component="textarea");var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},_addons2["default"].createElement(_FCTextBox2["default"],{component:Component,className:(0,_classnames2["default"])("fbc_input",{textarea:"0"==data.isOnlySingle,error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",icon:"input"===data.type?null:_formMetaUtil.FIELD_INFO_MAPPING[data.type].icon,iconStyle:inputIconStyle,themeColor:style.themeColor,style:"input"===data.type?"0"==data.isOnlySingle?textAreaStyle:inputStyle:inputWithIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill||""}))))}}),module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_MGColor=__webpack_require__(35),_MGColor2=_interopRequireDefault(_MGColor),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_tools=__webpack_require__(25),_formValid=__webpack_require__(40),_FormGeneratorUtil=__webpack_require__(45),_config=__webpack_require__(9),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),gList=["",_FormGeneratorUtil.serialNumberGenerator.numberSimple,_FormGeneratorUtil.serialNumberGenerator.numberRightBrackets,_FormGeneratorUtil.serialNumberGenerator.numberAllBrackets,_FormGeneratorUtil.serialNumberGenerator.numberAllMiddleBrackets,_FormGeneratorUtil.serialNumberGenerator.numberWithBar,_FormGeneratorUtil.serialNumberGenerator.cnNumberSimple,_FormGeneratorUtil.serialNumberGenerator.cnNumberAllBrackets,_FormGeneratorUtil.serialNumberGenerator.romanNumberUpper,_FormGeneratorUtil.serialNumberGenerator.romanNumberLower,_FormGeneratorUtil.serialNumberGenerator.numberWithQ];exports["default"]={renderRichContent:function(info){function _isRichRenderTag(text){return!!richContent_TAG.test(text)&&+text.replace(richContent_TAG,function($0,$1){return $1})}function _processInfo(content){if(""===content)return"";var info=content.replace(LINK_REG,function($0,$1,$2){var linkId=linkRenderArray.length,textContent=$1;_isRichRenderTag($1)&&(textContent=richRenderArray[_isRichRenderTag($1)]);var link=$2,linkParseUrl=(0,_tools.parseURL)($2);return linkParseUrl.protocol&&linkParseUrl.host!==location.host||(_MGString2["default"].isUrl($2)?$2.match(/^(http:\/\/|https:\/\/)/)||(link="http://"+$2):link="http://"+$2),linkRenderArray.push(_addons2["default"].createElement("a",{className:"fbc_descriptionLink",title:$2,key:"linkDom"+linkId,href:link,target:"_blank"},textContent,_addons2["default"].createElement("i",{className:"iconfont"},String.fromCharCode(59086)))),"<$-MK-$><$-MK-linkDOM::"+linkId+"-$><$-MK-$>"}),res=[];return res=_lodash2["default"].filter(info.split("<$-MK-$>"),function(d){return""!==d}),_lodash2["default"].forEach(res,function(data,idx){linkDOM_TAG.test(data)&&(res[idx]=linkRenderArray[+data.replace(linkDOM_TAG,function($0,$1){return $1})])}),res}var LINK_REG=/\{\{LINK\[([^\[\]]+?)\]\(([^\(\)]*?)\)\}\}/g,richRenderArray=[],linkRenderArray=[],linkDOM_TAG=/\<\$\-MK\-linkDOM\:\:([0-9]+?)\-\$\>$/g,richContent_TAG=/\<\$\-MK\-richDOM\:\:([0-9]+?)\-\$\>$/g;if(!_lodash2["default"].isArray(info))return _processInfo(info.replace("\\[","[").replace("\\]","]"));var _ret=function(){var infoLen=info.length;return{v:_lodash2["default"].map(info,function(content,idx){var _content=_processInfo(content.replace("\\[","[").replace("\\]","]")),_wrap=idx+1===infoLen?null:_addons2["default"].createElement("br",null);return!content&&infoLen>1?_addons2["default"].createElement("br",{key:"emptyLine"+idx}):_addons2["default"].createElement("span",{key:"line"+idx},_content,_wrap)})}}();return"object"===("undefined"==typeof _ret?"undefined":_typeof(_ret))?_ret.v:void 0},handleAddMobile:function(){_formStore2["default"].dispatch({type:"inputMultiAdd",id:this.props.data.id})},renderTitle:function(data,hasAddIcon){var required=null,_props=this.props,showQuestionNo=_props.showQuestionNo,num=_props.num,questionNoType=_props.questionNoType;data.isRequired&&(required=_addons2["default"].createElement("span",{className:"fbc_required"},"*"));var _add=null;return hasAddIcon&&(_add=_addons2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,onClick:this.handleAddMobile},String.fromCharCode(58979))),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_title",{"has-addIcon":hasAddIcon}),style:this.formStyle().titleStyle},showQuestionNo&&num?gList[questionNoType](num):null,this.renderRichContent(data.title||""),required,hasAddIcon?"ã€€":"",_add)},renderSubtitle:function(data,hasAddIcon){if(!data.subtitle||0===data.subtitle.length)return null;var _add=null;return hasAddIcon&&(_add=_addons2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,onClick:this.handleAddMobile},String.fromCharCode(58979))),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_describe",{"has-addIcon":hasAddIcon}),style:this.formStyle().describeStyle},this.renderRichContent(data.subtitle||""),hasAddIcon?"ã€€":"",_add)},renderError:function(valid){var data=this.props.data;if(!valid)return null;var _shownValid=_lodash2["default"].without(valid,"tip","tipHint");return 0===_shownValid.length?null:_addons2["default"].createElement("p",{className:"fbc_errorTips"},(0,_formValid.getErrorContent)(_shownValid[0],data.id))},formStyle:function(){var _props2=this.props,style=_props2.style,data=_props2.data,isMobile=_props2.isMobile,lineHeight=style.lineHeight/10,themeColor=style.themeColor,bodyStyle=style.bodyStyle||{},submitStyle=style.submitStyle||{},alignArray=["","left","center","right"],titleStyle={textAlign:alignArray[data.titleAlign],lineHeight:lineHeight+(isMobile?.2:0),fontSize:(bodyStyle.titleFontSize||16)+(isMobile?1:0),
fontWeight:bodyStyle.titleFontWeight?"bold":"normal",color:bodyStyle.titleColor},describeStyle={textAlign:alignArray[data.subTitleAlign||data.picSubTitleAlign],lineHeight:lineHeight,fontSize:bodyStyle.describeFontSize,fontWeight:bodyStyle.describeFontWeight?"bold":"normal",color:bodyStyle.describeColor},tipsColor=_MGColor2["default"].convertToRGBObj.fromHex(bodyStyle.describeColor||"#666666"),tipsStyle={lineHeight:lineHeight,fontSize:(bodyStyle.describeFontSize||14)-2,color:"rgba("+[tipsColor.r,tipsColor.g,tipsColor.b,.7]+")"},textAreaStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize},inputStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+12),lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize},inputBtnStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,color:submitStyle.fontColor,backgroundColor:submitStyle.btnColor},inputUnitStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,color:bodyStyle.describeColor},inputWithIconStyle=_lodash2["default"].assign({},inputStyle,{paddingLeft:Math.max(14,bodyStyle.optionFontSize||14)*(16/14)+6}),iconColor=_MGColor2["default"].convertToRGBObj.fromHex(themeColor||"#2D8FD9"),inputIconStyle={lineHeight:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+10)+"px",fontSize:Math.max(16,bodyStyle.optionFontSize||14),color:"rgba("+[iconColor.r,iconColor.g,iconColor.b,.6]+")"},commodityNameStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal",color:bodyStyle.optionColor},commodityDescribeStyle={fontSize:(bodyStyle.optionFontSize||14)-2,color:bodyStyle.describeColor||"#666666"},optionStyle={minHeight:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+10),lineHeight:lineHeight+(isMobile?.2:0),fontSize:(bodyStyle.optionFontSize||14)+(isMobile?1:0),fontWeight:bodyStyle.optionFontWeight?"bold":"normal",color:bodyStyle.optionColor},optionTipsStyle={fontSize:(bodyStyle.optionFontSize||14)-2,fontWeight:"normal",color:"rgba("+[tipsColor.r,tipsColor.g,tipsColor.b,.7]+")"},selectStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+12),lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal"},selectPlaceholderStyle={height:Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+12),lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal"},selectArrowStyle={lineHeight:lineHeight,fontSize:bodyStyle.optionFontSize,fontWeight:bodyStyle.optionFontWeight?"bold":"normal"},buttonStyle={fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,backgroundColor:submitStyle.btnColor},buttonDisabledStyle={fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal"};return isMobile&&(inputStyle.height+=6,inputWithIconStyle.height+=6,inputIconStyle.lineHeight=Math.floor((lineHeight||1.4)*(bodyStyle.optionFontSize||14)+15)+"px",selectStyle.height+=6),{titleStyle:titleStyle,describeStyle:describeStyle,tipsStyle:tipsStyle,textAreaStyle:textAreaStyle,inputStyle:inputStyle,inputUnitStyle:inputUnitStyle,inputWithIconStyle:inputWithIconStyle,inputIconStyle:inputIconStyle,inputBtnStyle:inputBtnStyle,commodityNameStyle:commodityNameStyle,commodityDescribeStyle:commodityDescribeStyle,optionStyle:optionStyle,optionTipsStyle:optionTipsStyle,selectStyle:selectStyle,selectPlaceholderStyle:selectPlaceholderStyle,selectArrowStyle:selectArrowStyle,buttonStyle:buttonStyle,buttonDisabledStyle:buttonDisabledStyle}}},module.exports=exports["default"]},function(module,exports){"use strict";function number2CnNumberSimple(number){number=""+number;var _number_mapping=["ã€‡","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹"];return number.split("").map(function(v){return _number_mapping[v]}).join("")}function number2RomanNumber(number){for(var str="",symbol=["â†‚","Mâ†‚","â†","Mâ†","M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],value=[1e4,9e3,5e3,4e3,1e3,900,500,400,100,90,50,40,10,9,5,4,1],i=0;0!=number;++i)for(;number>=value[i];)number-=value[i],str+=symbol[i];return str}function number2Alphabet(number){var _res="",_alpha=Math.floor(Math.round(10*number/27)/10),_remainder=number-26*_alpha;return _alpha>0&&(_res=String.fromCharCode(_alpha+64)),_remainder>0&&(_res+=String.fromCharCode(_remainder+64)),_res}Object.defineProperty(exports,"__esModule",{value:!0});exports.serialNumberGenerator={numberSimple:function(idx){return idx+". "},numberRightBrackets:function(idx){return idx+") "},numberAllBrackets:function(idx){return"("+idx+") "},numberAllMiddleBrackets:function(idx){return"["+idx+"] "},numberWithBar:function(idx){return"-"+idx+"- "},cnNumberSimple:function(idx){return number2CnNumberSimple(idx)+"ã€"},cnNumberAllBrackets:function(idx){return"ï¼ˆ"+number2CnNumberSimple(idx)+"ï¼‰"},romanNumberLower:function(idx){return number2RomanNumber(idx).toLowerCase()+". "},romanNumberUpper:function(idx){return number2RomanNumber(idx).toUpperCase()+". "},alphaNumberLower:function(idx){return number2Alphabet(idx).toLowerCase()+". "},alphaNumberUpper:function(idx){return number2Alphabet(idx).toUpperCase()+". "},numberWithQ:function(idx){return"Q"+idx+". "}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,TextBox=_addons2["default"].createClass({displayName:"TextBox",mixins:[pureRenderMixin],getInitialState:function(){return{placeholder:!this.props.value,focus:!1}},componentWillUpdate:function(nextProps){this.setState({placeholder:!nextProps.value})},getContent:function(){return this.refs.input.getDOMNode()},handleMouseDown:function(e){e.preventDefault(),this.refs.input.getDOMNode().focus()},handleFocus:function(e){this.setState({focus:!0}),this.props.onFocus&&this.props.onFocus(e)},handleBlur:function(e){this.setState({focus:!1}),this.props.onBlur&&this.props.onBlur(e)},render:function(){var _props=this.props,className=_props.className,style=_props.style,themeColor=_props.themeColor,iconStyle=_props.iconStyle,icon=_props.icon,placeholder=_props.placeholder,component=_props.component,extProps=(_props.onFocus,_props.onBlur,_objectWithoutProperties(_props,["className","style","themeColor","iconStyle","icon","placeholder","component","onFocus","onBlur"])),isShownPlaceholder=this.state.placeholder,Component=component||"input",iconColor={};return this.state.focus&&(iconColor={color:themeColor}),className.indexOf("error")>-1&&(iconColor={color:"#DA2824"}),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(className,{is_focus:this.state.focus,"has-icon":icon}),style:style},icon?_addons2["default"].createElement("i",{key:"ctIcon",className:"iconfont fbi_icon",style:_.assign({},iconStyle,iconColor)},icon):null,isShownPlaceholder&&placeholder?_addons2["default"].createElement("span",{className:"fbi_placeholder",style:{left:style.paddingLeft||0},onMouseDown:this.handleMouseDown},placeholder):null,_addons2["default"].createElement(Component,_extends({className:"fbi_input",tabIndex:0},extProps,{ref:"input",autoComplete:"off",spellCheck:!1,onMouseDown:extProps.onMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur})))}});exports["default"]=TextBox,module.exports=exports["default"]},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_jquery=__webpack_require__(2),_lodash=(_interopRequireDefault(_jquery),__webpack_require__(10)),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(49),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FormGeneratorUtil=__webpack_require__(45),_formValid=__webpack_require__(40),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Radio&Checkbox)",mixins:[pureRenderMixin,_mixins2["default"]],componentDidMount:function(){},currentLayout:function(){var isMobile=this.props.isMobile,data=this.props.data,_optionsLayout=data.optionsLayout;return isMobile&&(_optionsLayout=Math.min(2,_optionsLayout||0),data.isAfterInput&&(_optionsLayout=0),data.isLimitOptions&&data.isShowOptionLimit&&data.optionsQuotaInfo&&(_optionsLayout=0)),_optionsLayout},isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},handleSelectOption:function(id){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelector",id:data.id,value:id,isCheckbox:"checkbox"===data.type})},handleOptionInputMouseDown:function(e){e.stopPropagation()},handleOptionInputClick:function(e){e.stopPropagation()},handleOptionInputChange:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelectorValue",id:data.id,optionId:id,value:e.target.value})},handleOptionInputBlur:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"blurSelectorInput",id:data.id,optionId:id,value:e.target.value})},renderOptionInput:function(sId,data,isError){var _isMobile=this.props.isMobile,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,_input=_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input","fbc_optionInput",{error:isError}),type:"text",key:sId+"input",style:inputStyle,defaultValue:data,onMouseDown:this.handleOptionInputMouseDown,onClick:this.handleOptionInputClick,onChange:this.handleOptionInputChange.bind(this,sId),onBlur:this.handleOptionInputBlur.bind(this,sId)});return _isMobile?_addons2["default"].createElement("div",{className:"fbc_optionInputWrapper",key:sId+"inputWrapper"},_input):_input},renderOptions:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,isMobile=_props.isMobile,mode=_props.mode,_formStyle2=this.formStyle(),optionStyle=_formStyle2.optionStyle,optionTipsStyle=_formStyle2.optionTipsStyle,options=data.options||[],_inputRequiredErr=[],_validInputRequiredErr=!1;valid&&valid.indexOf("inputRequired")>-1&&(_validInputRequiredErr=!0,_inputRequiredErr=(0,_formValid.getErrorInfo)("inputRequired",data.id));var CommonDom="checkbox"===data.type?_svgBasicComponent.CommonCheckbox:_svgBasicComponent.CommonRadio,_opts=[],_temp=null,_num=0,_full=!1;"checkbox"===data.type&&1===data.isLimitChooseNum&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&fill&&fill.length>=data.chooseNumTo&&(_full=!0);for(var _optionsLayout=this.currentLayout(),i=0,len=options.length;i<len;i++)if(_temp=options[i],1!==mode||_temp.sId){var _isFill=this.isFill(fill,_temp.sId),_fillData=this.isFill(fill,_temp.sId,!0),_remainFull=!1,_limitInfo=null;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_quota=null;if(_quota=_lodash2["default"].isNumber(_quotaInfo[1])?_quotaInfo[1]:null,null!==_quota){var _remaining=_quota-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainFull=!0),data.isShowOptionLimit?_limitInfo=_addons2["default"].createElement("span",{className:"fbc_optionTips",style:optionTipsStyle},_config.lang.cQuotaRemainingFunc({remaining:_remaining>0?_remaining:0})):_remainFull&&(_limitInfo=_addons2["default"].createElement("span",{className:"fbc_optionTips",style:_lodash2["default"].assign({},optionTipsStyle,{color:"#ccc"})},_config.lang.cQuotaRemainingFull))}}_num++,_opts.push(_addons2["default"].createElement("li",{key:"item"+i,className:(0,_classnames2["default"])("fbc_optionsLi",{"has-input":data.isAfterInput&&_isFill,clearB:_num%_optionsLayout===1}),onClick:!_full&&!_remainFull||_isFill?this.handleSelectOption.bind(this,_temp.sId):null},_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_optionVal",data.type,{checked:_isFill,disabled:!_isFill&&(_full||_remainFull),isFull:!_isFill&&_remainFull}),style:optionStyle},_addons2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_isFill,disabled:!_isFill&&(_full||_remainFull),style:{paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?18:20))/2,0))}}),_addons2["default"].createElement("span",{className:"fbc_optionLabel"},(data.isAutoNo?_optionNum(data.autoNo,_num):"")+_temp.value,_isFill&&data.isAfterInput&&data.afterInputIsRequired?_addons2["default"].createElement("span",{className:"fbc_required",key:_temp.sId+"inputRequired"},"*"):null),_limitInfo),data.isAfterInput&&_isFill?this.renderOptionInput(_temp.sId,_lodash2["default"].isObject(_fillData)?_fillData.value:"",_validInputRequiredErr&&_inputRequiredErr.indexOf(_temp.sId)>-1):null))}else console.error("component ID LOST ->."+_temp.id+" : "+_temp.value);if(1===data.isAddOtherOption){_num++;var _isFill2=this.isFill(fill,data.otherId),_fillData2=this.isFill(fill,data.otherId,!0),_limitInfo2=null,otherId=data.otherId,_ignore=!1,_remainFull2=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&otherId in data.optionsQuotaInfo){var _quotaInfo2=data.optionsQuotaInfo[otherId],_remaining2=_quotaInfo2[1]-_quotaInfo2[0];_remaining2<=0&&1===data.isHideFullOption&&(_ignore=!0),_remaining2<=0&&(_remainFull2=!0),data.isShowOptionLimit?_limitInfo2=_addons2["default"].createElement("span",{className:"fbc_optionTips",style:optionTipsStyle},_config.lang.cQuotaRemainingFunc({remaining:_remaining2>0?_remaining2:0})):_remainFull2&&(_limitInfo2=_addons2["default"].createElement("span",{className:"fbc_optionTips",style:_lodash2["default"].assign({},optionTipsStyle,{color:"#ccc"})},_config.lang.cQuotaRemainingFull))}_ignore||_opts.push(_addons2["default"].createElement("li",{key:"other",className:(0,_classnames2["default"])("fbc_optionsLi",{"has-input":_isFill2,clearB:_num%_optionsLayout===1}),onClick:!_full&&!_remainFull2||_isFill2?this.handleSelectOption.bind(this,otherId):null},_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_optionVal",data.type,{checked:_isFill2,disabled:!_isFill2&&(_full||_remainFull2),isFull:!_isFill2&&_remainFull2}),style:optionStyle},_addons2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_isFill2,disabled:!_isFill2&&(_full||_remainFull2),style:{paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}),_addons2["default"].createElement("span",{className:"fbc_optionLabel"},(data.isAutoNo?_optionNum(data.autoNo,_num):"")+(data.otherOptionTitle||_config.lang.cOptionOtherDefault),_isFill2&&data.otherOptionIsRequired?_addons2["default"].createElement("span",{className:"fbc_required",key:"otherRequired"},"*"):null),_limitInfo2),_isFill2?this.renderOptionInput(otherId,_lodash2["default"].isObject(_fillData2)?_fillData2.value:"",valid&&valid.indexOf("otherInputRequired")>-1):null))}return data.isLimitOptions&&data.optionsQuotaInfo&&0===_opts.length&&options.length>0&&_opts.push(_addons2["default"].createElement("li",{className:"fbc_emptyTip"},_config.lang.cOptionNull)),_opts},renderTips:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),_formStyle3=this.formStyle(),tipsStyle=_formStyle3.tipsStyle;if("checkbox"!==data.type)return null;if(1!==data.isLimitChooseNum)return null;var _tipContent="";return void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo?_tipContent+=data.chooseNumFrom==data.chooseNumTo?_config.lang.cOptionsLimitEqualFunc({num:data.chooseNumFrom}):_config.lang.cOptionsLimitRangeFunc({numForm:data.chooseNumFrom,numTo:data.chooseNumTo}):void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom?_tipContent+=_config.lang.cOptionsMoreThanNumFunc({numForm:data.chooseNumFrom}):void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&(_tipContent+=_config.lang.cOptionsLessThanNumFunc({numTo:data.chooseNumTo})),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:(valid||[]).indexOf("tip")>-1}),style:tipsStyle},_tipContent)},render:function(){var _props3=this.props,data=_props3.data,valid=_props3.valid,isMobile=_props3.isMobile,componentStyle=_props3.componentStyle,style=_props3.style,itemNum=_props3.itemNum,_optionsLayout=this.currentLayout(),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_content",_optionsLayout?"layout-"+_optionsLayout:"")},this.renderOptions(),_addons2["default"].createElement("li",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_MGUtil=__webpack_require__(39),_MGUtil2=_interopRequireDefault(_MGUtil),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,CRadio=_addons2["default"].createClass({displayName:"CRadio",mixins:[pureRenderMixin],render:function(){var _props=this.props,disabled=_props.disabled,selected=_props.selected,checked=_props.checked,className=_props.className,fallbackClassName=_props.fallbackClassName,style=_props.style,props=_objectWithoutProperties(_props,["disabled","selected","checked","className","fallbackClassName","style"]),isSelected=selected||checked;if(_MGUtil2["default"].browserCheck.msie&&parseInt(_MGUtil2["default"].browserCheck.version)<9)return _addons2["default"].createElement("i",{className:(0,_classnames2["default"])(fallbackClassName,{selected:isSelected,disabled:disabled})},"Â ");var fillColor=disabled?"#F7F7F7":"#FFFFFF",strokeColor=disabled?"#DEDEDE":"currentColor";return isSelected&&(strokeColor=disabled?"#DEDEDE":"currentColor"),_addons2["default"].createElement("svg",_extends({className:(0,_classnames2["default"])(className,{selected:isSelected})},props,{style:_.assign({},style,{pointerEvents:"visible"}),xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",preserveAspectRatio:"xMinYMin meet"}),_addons2["default"].createElement("circle",{fill:fillColor,stroke:strokeColor,strokeWidth:2,cx:15,cy:15,r:14}),isSelected?_addons2["default"].createElement("circle",{fill:strokeColor,cx:15,cy:15,r:7}):null)}}),CCheckbox=_addons2["default"].createClass({displayName:"CCheckbox",mixins:[pureRenderMixin],render:function(){var _props2=this.props,disabled=_props2.disabled,selected=_props2.selected,checked=_props2.checked,className=_props2.className,fallbackClassName=_props2.fallbackClassName,style=_props2.style,props=_objectWithoutProperties(_props2,["disabled","selected","checked","className","fallbackClassName","style"]),isSelected=selected||checked;if(_MGUtil2["default"].browserCheck.msie&&parseInt(_MGUtil2["default"].browserCheck.version)<9)return _addons2["default"].createElement("i",{className:(0,_classnames2["default"])(fallbackClassName,"checkbox",{selected:isSelected,disabled:disabled})},"Â ");var fillColor=disabled?"#F7F7F7":"#FFFFFF",strokeColor=disabled?"#DEDEDE":"currentColor";return isSelected&&(fillColor=disabled?"#DEDEDE":"currentColor",strokeColor=disabled?"#DEDEDE":"currentColor"),_addons2["default"].createElement("svg",_extends({className:(0,_classnames2["default"])(className,{selected:isSelected})},props,{style:_.assign({},style,{pointerEvents:"visible"}),xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",preserveAspectRatio:"xMinYMin meet"}),_addons2["default"].createElement("rect",{x:1,y:1,fill:fillColor,stroke:strokeColor,strokeWidth:2,width:28,height:28}),isSelected?_addons2["default"].createElement("polygon",{fill:"#FFF",points:"12.08,22.77 25.51,8.58 22.42,5.34 11.97,16.15 7.71,11.67 4.61,14.91"}):null)}});exports["default"]={CommonRadio:CRadio,CommonCheckbox:CCheckbox},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_utils=(_interopRequireDefault(_jquery),__webpack_require__(22)),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FCDropDown=__webpack_require__(51),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(DropDown)",mixins:[pureRenderMixin,_mixins2["default"]],isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},componentDidMount:function(){},handleSelectOption:function(id,e){e.stopPropagation();var data=this.props.data;_formStore2["default"].dispatch({type:"setSelector",id:data.id,value:id,isCheckbox:"checkbox"===data.type}),this.refs.dropdown.doClose()},handleOptionInputMouseDown:function(e){e.stopPropagation()},handleOptionInputClick:function(e){e.stopPropagation()},handleDropDownMouseDown:function(id,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(id,e))},handleOptionInputChange:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelectorValue",id:data.id,optionId:id,value:e.target.value})},handleOptionInputBlur:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"blurSelectorInput",id:data.id,optionId:id,value:e.target.value})},renderOptions:function(){var _props=this.props,data=_props.data,fill=_props.fill,options=(_props.valid,data.options||[]),_opts=[],_temp=null;!data.isRequired&&data.defaultTips&&_opts.push(_addons2["default"].createElement("li",{className:"fbc_selectLi",onMouseDown:this.handleDropDownMouseDown.bind(this,null),onClick:this.handleSelectOption.bind(this,null),key:"optplaceholder"},data.defaultTips));for(var i=0,len=options.length;i<len;i++){_temp=options[i];var _isFill=this.isFill(fill,_temp.sId),_limitInfo=null,_remainingFull=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainingFull=!0),data.isShowOptionLimit?_limitInfo=_addons2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFunc({remaining:_remaining})):_remainingFull&&(_limitInfo=_addons2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFull))}_opts.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:_isFill,fbc_disabled:_remainingFull}),key:"opt"+_temp.sId,onMouseDown:_remainingFull?null:this.handleDropDownMouseDown.bind(this,_temp.sId),onClick:_remainingFull?null:this.handleSelectOption.bind(this,_temp.sId)},_temp.value,_limitInfo))}if(1===data.isAddOtherOption){var otherId=data.otherId,_isFill2=this.isFill(fill,otherId),_limitInfo2=null,_ignore=!1,_remainingFull2=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&otherId in data.optionsQuotaInfo){var _quotaInfo2=data.optionsQuotaInfo[otherId],_remaining2=_quotaInfo2[1]-_quotaInfo2[0];_remaining2<=0&&1===data.isHideFullOption&&(_ignore=!0),_remaining2<=0&&(_remainingFull2=!0),data.isShowOptionLimit?_limitInfo2=_addons2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFunc({remaining:_remaining2})):_remainingFull2&&(_limitInfo2=_addons2["default"].createElement("span",{className:"fbc_selectTips"},_config.lang.cQuotaRemainingFull))}_ignore||_opts.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi","is-other",{fbc_currentSelected:_isFill2,fbc_disabled:_remainingFull2}),onMouseDown:_remainingFull2?null:this.handleDropDownMouseDown.bind(this,otherId),onClick:_remainingFull2?null:this.handleSelectOption.bind(this,otherId),key:"opt"+otherId},data.otherOptionTitle||_config.lang.cOptionOtherDefault,_limitInfo2))}return _opts},renderTips:function(){return null},render:function(){var _this=this,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,style=_props2.style,itemNum=_props2.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,selectPlaceholderStyle=_formStyle.selectPlaceholderStyle,selectArrowStyle=_formStyle.selectArrowStyle,dropDownSelected=null,_isOtherSelected=!1;if(fill&&fill.length>0){var fillInfo=this.isFill(fill,data.otherId,!0);1===data.isAddOtherOption&&fillInfo!==!1?(dropDownSelected=data.otherOptionTitle||_config.lang.cOptionOtherDefault,_isOtherSelected=!0):_lodash2["default"].forEach(data.options,function(info){var isFill=_this.isFill(fill,info.sId);if(isFill)return dropDownSelected=info.value,!1})}var options=this.renderOptions(),_dropdown=(data.isLimitOptions&&data.optionsQuotaInfo&&(data.options||[]).length>0&&options.length===(!data.isRequired&&data.defaultTips)?1:0)?_addons2["default"].createElement("div",{className:"fbc_emptyTip"},_config.lang.cOptionNull):_addons2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select",{hasValue:fill&&fill.length>0}),display:dropDownSelected||data.defaultTips,ref:"dropdown",selectArrowStyle:selectArrowStyle,style:fill&&fill.length>0?selectStyle:selectPlaceholderStyle},options),cpWidthPre=10*(data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content fbc_widthCp",{"has-input":_isOtherSelected}),style:{width:cpWidthPre+"%"}},_dropdown,_isOtherSelected?[data.otherOptionIsRequired?_addons2["default"].createElement("span",{className:"fbc_required",key:"otherRequired"},"*"):null,_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_input","fbc_selectInput",{error:valid&&valid.indexOf("otherInputRequired")>-1}),key:"otherInput",defaultValue:_lodash2["default"].isObject(fill[0])?fill[0].value:"",style:inputStyle,onChange:this.handleOptionInputChange.bind(this,data.otherId),onBlur:this.handleOptionInputBlur.bind(this,data.otherId)})]:null)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"FCDropDown",mixins:[pureRenderMixin],getInitialState:function(){return{isOpen:!1}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){"$$resize"===action.type&&this.doClose();
},isOpen:function(){return this.state.isOpen},doClose:function(){this.refs.focusContent&&this.refs.focusContent.getDOMNode().blur()},handleMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault()},handleDropDownMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault(),e.stopPropagation()},handleToggleSelector:function(e){e.preventDefault(),e.stopPropagation();var focusContent=this.refs.focusContent,open=this.currentIsOpen;if(focusContent){var $focusContent=focusContent.getDOMNode();open?$focusContent.blur():$focusContent.focus()}},handleExpandDropDown:function(e){e.stopPropagation(),this.props.onExpand&&this.props.onExpand(),this.setState({isOpen:!0})},handleCondenseDropDown:function(e){e.stopPropagation(),this.setState({isOpen:!1})},render:function(){var _props=this.props,display=_props.display,imageUri=_props.imageUri,children=_props.children,selectArrowStyle=_props.selectArrowStyle,props=_objectWithoutProperties(_props,["display","imageUri","children","selectArrowStyle"]),open=this.state.isOpen;return _addons2["default"].createElement("div",_extends({onClick:this.handleToggleSelector},props),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_selectValue",{hasImage:imageUri}),tabIndex:0,ref:"focusContent",style:imageUri?{backgroundImage:imageUri}:null,onMouseDown:this.handleDropDownMouseDown,onFocus:this.handleExpandDropDown,onBlur:this.handleCondenseDropDown},display),_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:selectArrowStyle,onMouseDown:this.handleMouseDown},String.fromCharCode(58983)),_addons2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_selectList",{fbc_showList:open}),onMouseDown:this.handleDropDownMouseDown},children))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_mixins=(_interopRequireDefault(_jquery),__webpack_require__(22),__webpack_require__(44)),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(DropDownMobile)",mixins:[pureRenderMixin,_mixins2["default"]],isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},handleSelectOption:function(e){var data=this.props.data;return""+e.target.value=="null"?void _formStore2["default"].dispatch({type:"setSelector",id:data.id,value:null,isCheckbox:!1}):void _formStore2["default"].dispatch({type:"setSelector",id:data.id,value:+e.target.value,isCheckbox:!1})},handleOptionInputChange:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelectorValue",id:data.id,optionId:id,value:e.target.value})},handleOptionInputBlur:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"blurSelectorInput",id:data.id,optionId:id,value:e.target.value})},renderTips:function(){return null},renderOptions:function(){var _props=this.props,data=_props.data,options=(_props.fill,_props.valid,data.options||[]),_opts=[],_temp=null;data.isRequired||!data.defaultTips?_opts.push(_addons2["default"].createElement("option",{key:"defaultDisabled",value:null,disabled:!0,selected:!0,hidden:!0,style:{display:"none"}},data.defaultTips||"")):_opts.push(_addons2["default"].createElement("option",{key:"defaultTips",className:"fbc_selectLi",value:null},data.defaultTips));for(var i=0,len=options.length;i<len;i++){_temp=options[i];var _limitInfo=null,_remainingFull=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainingFull=!0),data.isShowOptionLimit?_limitInfo="    ("+_config.lang.cQuotaRemainingFunc({remaining:_remaining})+")":_remainingFull&&(_limitInfo="    ("+_config.lang.cQuotaRemainingFull+")")}_opts.push(_addons2["default"].createElement("option",{key:"opt"+(_temp.sId||i),className:"fbc_selectLi",value:_temp.sId,disabled:_remainingFull},_temp.value+(_limitInfo||"")))}if(1===data.isAddOtherOption){var otherId=data.otherId,_limitInfo2=null,_ignore=!1,_remainingFull2=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&otherId in data.optionsQuotaInfo){var _quotaInfo2=data.optionsQuotaInfo[otherId],_remaining2=_quotaInfo2[1]-_quotaInfo2[0];_remaining2<=0&&1===data.isHideFullOption&&(_ignore=!0),_remaining2<=0&&(_remainingFull2=!0),data.isShowOptionLimit?_limitInfo2="    ("+_config.lang.cQuotaRemainingFunc({remaining:_remaining2})+")":_remainingFull2&&(_limitInfo2="    ("+_config.lang.cQuotaRemainingFull+")")}_ignore||_opts.push(_addons2["default"].createElement("option",{key:"opt"+(otherId||"other"),className:"fbc_selectLi",value:otherId,disabled:_remainingFull2},(data.otherOptionTitle||_config.lang.cOptionOtherDefault)+(_limitInfo2||"")))}return _opts},render:function(){var _this=this,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,dropDownSelected=(_formStyle.selectPlaceholderStyle,null),_isOtherSelected=!1,options=this.renderOptions();if(fill&&fill.length>0){var fillInfo=this.isFill(fill,data.otherId,!0);1===data.isAddOtherOption&&fillInfo!==!1?(dropDownSelected=data.otherId,_isOtherSelected=!0):_lodash2["default"].forEach(data.options,function(info){var isFill=_this.isFill(fill,info.sId);if(isFill)return dropDownSelected=info.sId,!1})}var _dropdown=(data.isLimitOptions&&data.optionsQuotaInfo&&(data.options||[]).length>0&&options.length===(!data.isRequired&&data.defaultTips)?1:0)?_addons2["default"].createElement("div",{className:"fbc_emptyTip"},_config.lang.cOptionNull):_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select",{hasValue:fill&&fill.length>0})},_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_addons2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),style:selectStyle,value:dropDownSelected,onChange:this.handleSelectOption},options));return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content",{"has-input":_isOtherSelected})},_dropdown,_isOtherSelected?[_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_input","fbc_selectInput",{error:valid&&valid.indexOf("otherInputRequired")>-1}),key:"otherInput",defaultValue:_lodash2["default"].isObject(fill[0])?fill[0].value:"",style:inputStyle,onChange:this.handleOptionInputChange.bind(this,data.otherId),onBlur:this.handleOptionInputBlur.bind(this,data.otherId)})]:null))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(51),_FCDropDown2=_interopRequireDefault(_FCDropDown),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(MultiLevel)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){function _fillingSelected(id){var info=_lodash2["default"].find(data.options,{id:id});info&&(_lvlSelected=[info].concat(_lvlSelected),info.pId&&_fillingSelected(info.pId))}function _setDefaultSelect(pId){var lvl=_utils2["default"].getChildrenIn(data.options,pId);_lodash2["default"].forEach(lvl,function(info){if(info.defaultValue){var len=_lvlSelected.length,_currentDepth=_utils2["default"].getTreeDepth(data.options,len,pId);return _lvlSelected.push(info),_currentDepth>len&&_setDefaultSelect(info.id),!1}})}this.depthInfo={};var data=this.props.data,fill=this.props.fill,_lvlSelected=[];if(fill&&fill[0]){var sId=fill[0];if(sId=_lodash2["default"].isObject(fill[0])&&fill[0].id?fill[0].id:fill[0].value,fill[0].current)_lvlSelected=fill[0].current;else{var fillInfo=_lodash2["default"].find(data.options,{sId:sId});fillInfo&&_fillingSelected(fillInfo.id)}}else _setDefaultSelect(null);return{currentSelected:_lvlSelected}},getDepth:function(list,position,pid){if(pid in this.depthInfo)return this.depthInfo[pid];var currentDepth=_utils2["default"].getTreeDepth(list,position,pid);return this.depthInfo[pid]=currentDepth,currentDepth},handleMouseDownOption:function(position,info,e){_utils2["default"].isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(position,info,e))},handleSelectOption:function(position,info){var newSelected=this.state.currentSelected.slice(0,position),data=this.props.data,options=data.options;info?newSelected[position]=info:info=newSelected[position-1]||{},1!==data.isAllowPartEmpty&&this.getDepth(options,newSelected.length,info.id)!==newSelected.length||!info||_lodash2["default"].isEmpty(info)?_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:null,current:newSelected,isCheckbox:!1}):_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:newSelected[newSelected.length-1].sId,current:newSelected,isCheckbox:!1}),this.setState({currentSelected:newSelected})},handleChangeOptionContent:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setMultiLevelSelectorValue",id:data.id,optionId:id,current:this.state.currentSelected,value:e.target.value})},_getSetPlaceholderInfo:function(pid){var data=this.props.data,defaultTips=data.defaultTips||{},parent={};pid&&(parent=_lodash2["default"].find(data.options,{id:pid}));var defaultPlaceholder=2===parent.type?_config.lang.cFillingPlaceholder:_config.lang.cSelectorPlaceholder;return null===pid?defaultTips[-1]||defaultPlaceholder:defaultTips[pid]||defaultPlaceholder},renderDropDownBy:function(position,pid,sid){var _this=this,_props=this.props,data=_props.data,fill=_props.fill,_formStyle=(_props.valid,this.formStyle()),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,selectArrowStyle=_formStyle.selectArrowStyle,_options=[],_optionsData=[],placeholder=this._getSetPlaceholderInfo(pid);_lodash2["default"].forEach(data.options,function(info){info.pId===pid&&_optionsData.push(info)});var _optionsWidth=0,_selectedContent="";if(!sid&&0===_optionsData.length){var parent=_lodash2["default"].find(data.options,{id:pid});return parent&&2===parent.type?_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_mlItem fbc_selectInput fbc_input fbc_other",value:fill[0]?fill[0].value:"",placeholder:placeholder,type:"text",key:"input"+parent.sId,style:inputStyle,onChange:this.handleChangeOptionContent.bind(this,parent.sId)}):null}if(1===_optionsData.length&&3===_optionsData[0].type)return _addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_mlItem fbc_selectInput fbc_input",value:fill[0]?fill[0].value:"",type:"text",key:"input"+_optionsData[0].sId,style:inputStyle,placeholder:_optionsData[0].content,onChange:this.handleChangeOptionContent.bind(this,_optionsData[0].sId)});_options.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:null===sid}),onMouseDown:this.handleMouseDownOption.bind(this,position,null),onClick:this.handleSelectOption.bind(this,position,null),key:"optPlaceholder"},placeholder)),_lodash2["default"].forEach(_optionsData,function(info){data.widthInfo[info.id]>_optionsWidth&&(_optionsWidth=data.widthInfo[info.id]),info.id===sid&&(_selectedContent=info.content),_options.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:info.id===sid}),onMouseDown:_this.handleMouseDownOption.bind(_this,position,info),onClick:_this.handleSelectOption.bind(_this,position,info),key:"opt"+info.id},info.content))});var _w=Math.round(Math.max(79,_optionsWidth+37,_MGString2["default"].getWidth(placeholder,((selectStyle||{}).optionFontSize||14)+"px/1 "+_utils2["default"]._FONT)+37));return _addons2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select fbc_mlItem",{hasValue:_selectedContent}),key:"dp"+pid,selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({},selectStyle,{width:_w}),display:_selectedContent||this._getSetPlaceholderInfo(pid),ref:"dropdown"+pid},_options)},render:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),componentStyle=_props2.componentStyle,style=_props2.style,itemNum=_props2.itemNum,currentSelected=this.state.currentSelected,_formStyle2=this.formStyle(),selectStyle=_formStyle2.selectStyle,_dropList=[];if(_lodash2["default"].isEmpty(currentSelected))_dropList.push(this.renderDropDownBy(_dropList.length,null,null)),_dropList.push(_addons2["default"].createElement("div",{className:"fbc_select fbc_mlItem",style:_lodash2["default"].assign({},selectStyle,{width:79}),key:"fakeSelect"},_addons2["default"].createElement("p",{className:"fbc_selectValue"},_config.lang.cSelectorPlaceholder),_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:selectStyle.lineHeight}},String.fromCharCode(58983))));else for(var i=0,len=currentSelected.length;i<=len;i++){var _current=currentSelected[i];if(0===i)_dropList.push(this.renderDropDownBy(i,null,_current?_current.id:void 0));else{var _prev=currentSelected[i-1];_dropList.push(this.renderDropDownBy(i,_prev?_prev.id:void 0,_current?_current.id:void 0))}}var cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_mlContent"},_dropList,_addons2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(MultiLevelMobile)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){function _fillingSelected(id){var info=_lodash2["default"].find(data.options,{id:id});info&&(_lvlSelected=[info].concat(_lvlSelected),info.pId&&_fillingSelected(info.pId))}function _setDefaultSelect(pId){var lvl=_utils2["default"].getChildrenIn(data.options,pId);_lodash2["default"].forEach(lvl,function(info){if(info.defaultValue){var len=_lvlSelected.length,_currentDepth=_utils2["default"].getTreeDepth(data.options,len,pId);return _lvlSelected.push(info),_currentDepth>len&&_setDefaultSelect(info.id),!1}})}this.depthInfo={};var data=this.props.data,fill=this.props.fill,_lvlSelected=[];if(fill&&fill[0]){var sId=fill[0];if(sId=_lodash2["default"].isObject(fill[0])&&fill[0].id?fill[0].id:fill[0].value,fill[0].current)_lvlSelected=fill[0].current;else{var fillInfo=_lodash2["default"].find(data.options,{sId:sId});fillInfo&&_fillingSelected(fillInfo.id)}}else _setDefaultSelect(null);return{currentSelected:_lvlSelected}},getDepth:function(list,position,pid){if(pid in this.depthInfo)return this.depthInfo[pid];var currentDepth=_utils2["default"].getTreeDepth(list,position,pid);return this.depthInfo[pid]=currentDepth,currentDepth},handleSelectOption:function(position,e){var newSelected=this.state.currentSelected.slice(0,position),data=this.props.data,options=data.options,_currentId=+e.target.value,_info=null;0!==_currentId?(_info=_lodash2["default"].find(options,{id:_currentId}),newSelected[position]=_info):(_info=newSelected[position-1],_currentId=_info.id),1!==data.isAllowPartEmpty&&this.getDepth(options,newSelected.length,_currentId)!==newSelected.length||!_info||_lodash2["default"].isEmpty(_info)?_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:null,current:newSelected,isCheckbox:!1}):_formStore2["default"].dispatch({type:"setMultiLevelSelector",id:data.id,value:newSelected[newSelected.length-1].sId,current:newSelected,isCheckbox:!1}),this.setState({currentSelected:newSelected})},handleChangeOptionContent:function(id,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setMultiLevelSelectorValue",id:data.id,optionId:id,current:this.state.currentSelected,value:e.target.value})},_getSetPlaceholderInfo:function(pid){var data=this.props.data,defaultTips=data.defaultTips||{},parent={};pid&&(parent=_lodash2["default"].find(data.options,{id:pid}));var defaultPlaceholder=2===parent.type?_config.lang.cFillingPlaceholder:_config.lang.cSelectorPlaceholder;return null===pid?defaultTips[-1]||defaultPlaceholder:defaultTips[pid]||defaultPlaceholder},renderDropDownBy:function(position,pid,sid){var _props=this.props,data=_props.data,fill=_props.fill,_formStyle=(_props.valid,this.formStyle()),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,_options=[],_optionsData=[];_lodash2["default"].forEach(data.options,function(info){info.pId===pid&&_optionsData.push(info)});var _optionsWidth=0,_selectedContent="";if(!sid&&0===_optionsData.length){var parent=_lodash2["default"].find(data.options,{id:pid});return parent&&2===parent.type?_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_mlItem fbc_selectInput fbc_input fbc_other",value:fill[0]?fill[0].value:"",style:inputStyle,type:"text",key:"input"+parent.sId,placeholder:this._getSetPlaceholderInfo(pid),onChange:this.handleChangeOptionContent.bind(this,parent.sId)}):null}return 1===_optionsData.length&&3===_optionsData[0].type?_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_mlItem fbc_selectInput fbc_input",value:fill[0]?fill[0].value:"",style:inputStyle,type:"text",key:"input"+_optionsData[0].sId,placeholder:_optionsData[0].content,onChange:this.handleChangeOptionContent.bind(this,_optionsData[0].sId)}):(_options.push(_addons2["default"].createElement("option",{key:"optplaceholder",value:0},this._getSetPlaceholderInfo(pid))),_lodash2["default"].forEach(_optionsData,function(info){data.widthInfo[info.id]>_optionsWidth&&(_optionsWidth=data.widthInfo[info.id]),info.id===sid&&(_selectedContent=info.content),_options.push(_addons2["default"].createElement("option",{key:"opt"+info.id,value:info.id},info.content))}),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select fbc_mlItem",{hasValue:_selectedContent}),key:"dp"+pid,style:_lodash2["default"].assign({},selectStyle,{width:"100%"})},_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_addons2["default"].createElement("select",{className:"fbc_innerSelect",value:sid,ref:"dropdown"+pid,style:selectStyle,onChange:this.handleSelectOption.bind(this,position)},_options)))},render:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),componentStyle=_props2.componentStyle,currentSelected=this.state.currentSelected,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,selectStyle=_formStyle2.selectStyle,_dropList=[];if(_lodash2["default"].isEmpty(currentSelected))_dropList.push(this.renderDropDownBy(_dropList.length,null,null)),_dropList.push(_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select fbc_mlItem"),key:"fakeSelect",style:_lodash2["default"].assign({},selectStyle,{width:"100%"})},_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_addons2["default"].createElement("p",{className:"fbc_selectValue",style:{lineHeight:2.6}},_config.lang.cSelectorPlaceholder),_addons2["default"].createElement("span",{className:"fbc_selectArrow"})));else for(var i=0,len=currentSelected.length;i<=len;i++){var _current=currentSelected[i];if(0===i)_dropList.push(this.renderDropDownBy(i,null,_current?_current.id:void 0));else{var _prev=currentSelected[i-1];_dropList.push(this.renderDropDownBy(i,_prev?_prev.id:void 0,_current?_current.id:void 0))}}return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_mlContent fbc_content"},_dropList,_addons2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_MGString=__webpack_require__(28),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_utils=__webpack_require__(22),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Number)",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"numberBlur",id:this.props.data.id,value:e.target.value})},renderTips:function(){var _props=this.props,data=_props.data,valid=(_props.fill,_props.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,content=null,wrapperError=!0,isErrorTip=(valid||[]).indexOf("tip")>-1;return data.isNumRange&&(_lodash2["default"].isNumber(data.numRangeFrom)&&_lodash2["default"].isNumber(data.numRangeTo)?content=_config.lang.cNumberValueRangeHintFunc({numRangeFrom:data.numRangeFrom,numRangeTo:data.numRangeTo}):_lodash2["default"].isNumber(data.numRangeFrom)?content=_config.lang.cNumberValueMoreThanValueFunc({numRangeFrom:data.numRangeFrom}):_lodash2["default"].isNumber(data.numRangeTo)&&(content=_config.lang.cNumberValueLessThanValueFunc({numRangeTo:data.numRangeTo}))),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},content)},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,fw=_props2.fw,itemNum=_props2.itemNum,style=_props2.style,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputUnitStyle=_formStyle2.inputUnitStyle,cpWidthPre=10*(isMobile?10:data.cpWidth||8),unitWidth=null;data.unit&&(unitWidth=Math.min((0,_MGString.getWidth)(data.unit,"14px/1 "+_utils._FONT),((fw/(itemNum||1)-60)*(cpWidthPre/10)-(isMobile?10:25))/20));var cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,style:_lodash2["default"].assign(inputStyle,{paddingRight:unitWidth?unitWidth+8:null}),onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:""+(_lodash2["default"].isNumber(fill)||fill?fill:"")}),data.unit?_addons2["default"].createElement("span",{className:(0,_classnames2["default"])("fbc_unit"),style:inputUnitStyle},data.unit):null)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function beautyValue(v){if(v){var REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)/g,REG_DAY=/^--(\d{1,2}?)/g,REG_MONTH=/^-(\d{1,2}?)-/g,REG_YEAR=/^(\d{4}?)--/g;if(v.match(REG_YEAR_MONTH))return v.replace(/-$/g,"");if(v.match(REG_MONTH_DAY))return v.replace(/^-/g,"");if(v.match(REG_YEAR))return v.replace("--","");if(v.match(REG_MONTH))return _config.lang.gMonth[+v.replace(/-/g,"")-1];if(v.match(REG_DAY))return v.replace("--","")}return v}function _simpleJudgeDateType(dateInfo,isEuro){var y=void 0,m=void 0,d=void 0;if(isEuro){if(+dateInfo[0]>0&&+dateInfo[0]<=12){var _dateInfo=_slicedToArray(dateInfo,3);m=_dateInfo[0],d=_dateInfo[1],y=_dateInfo[2]}}else if(3===dateInfo.length){var _dateInfo2=_slicedToArray(dateInfo,3);y=_dateInfo2[0],m=_dateInfo2[1],d=_dateInfo2[2]}else if(1===dateInfo.length)if(_config.lang.gMonth.indexOf(dateInfo[0])>-1)m=_config.lang.gMonth.indexOf(dateInfo[0])+1;else if((""+dateInfo[0]).length>2)y=dateInfo[0];else{var _dateInfo3=_slicedToArray(dateInfo,1);d=_dateInfo3[0]}else if(4===dateInfo[0].length){var _dateInfo4=_slicedToArray(dateInfo,2);y=_dateInfo4[0],m=_dateInfo4[1]}else if(+dateInfo[0]>12){var _ref=[(dateInfo[0]<30?"20":"19")+dateInfo[0],dateInfo[1]];y=_ref[0],m=_ref[1]}else if(_config.lang.gMonth.indexOf(dateInfo[0])>-1)m=_config.lang.gMonth.indexOf(dateInfo[0])+1,d=dateInfo[1];else{var _dateInfo5=_slicedToArray(dateInfo,2);m=_dateInfo5[0],d=_dateInfo5[1]}return[y,m,d]}function convertBeautyValue(v){var timePrecision=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,dateType=arguments[2],_res=null;if(v){var _isProcessed=!1,_hasTime=!1;if(v.match(/[:]/))if(_hasTime=!0,v.match(/[\s]/)){var _v$split=v.split(/[\s]/),_v$split2=_slicedToArray(_v$split,2),_date=_v$split2[0],_time=_v$split2[1],_splitDate=_date.split(/[\-\_\/]/g);if(_splitDate.length<3){_isProcessed=!0;var type=_simpleJudgeDateType(_splitDate,_date.match(/[\/]/)),_resDate=(type[0]||"")+"-"+(type[1]||"")+"-"+(type[2]||""),_resTime=_time.split(":");_resTime.length<3&&(_resTime=_resTime.concat("00","00").slice(0,timePrecision).concat("00","00").slice(0,3).join(":")),"dateTime_time"===dateType?_res=_resTime:"dateTime_date"===dateType?_res=_resDate:"dateTime_both"===dateType&&(_res=_resDate+" "+_resTime)}}else"dateTime_time"===dateType?_res=_lodash2["default"].trim(v):"dateTime_both"===dateType&&(_res=(0,_MGMoment2["default"])().getFullDate()+" "+_lodash2["default"].trim(v));else{var _splitDate2=v.split(/[\-\_\/]/g);if(_splitDate2.length<3){_isProcessed=!0;var _type=_simpleJudgeDateType(_splitDate2,v.match(/[\/]/));"dateTime_date"===dateType?_res=(_type[0]||"")+"-"+(_type[1]||"")+"-"+(_type[2]||""):"dateTime_both"===dateType&&(_res=(_type[0]||"")+"-"+(_type[1]||"")+"-"+(_type[2]||"")+" "+(0,_MGMoment2["default"])().getTime())}}if(!_isProcessed){var _date2=(0,_MGMoment2["default"])(v);if(_hasTime){var _resTime2=_date2.getTime().split(":").slice(0,timePrecision);"dateTime_time"===dateType?_res=_resTime2.concat("00","00").slice(0,3).join(":"):"dateTime_date"===dateType?_res=_date2.getFullDate():"dateTime_both"===dateType&&(_res=_date2.getFullDate()+" "+_resTime2.concat("00","00").slice(0,3).join(":"))}else"dateTime_date"===dateType?_res=_date2.getFullDate():"dateTime_both"===dateType&&(_res=_date2.getFullDate()+" "+(0,_MGMoment2["default"])().getTime())}}return _res}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FCCalendar=__webpack_require__(57),_FCCalendar2=_interopRequireDefault(_FCCalendar),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,Calendar=(0,
_FCCalendar2["default"])(_config.lang),_typeMapping={dateTime_date:1,dateTime_time:4,dateTime_both:5},_num=0;exports["default"]=_addons2["default"].createClass({displayName:"Component(DateTime)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return _num++,this.num=_num,{isOpen:!1,inputValue:beautyValue(this.props.fill)}},componentWillUpdate:function(nextProps,nextState){beautyValue(nextProps.fill)===this.state.inputValue||this.inEdit||this.setState({inputValue:beautyValue(nextProps.fill)})},componentDidMount:function(){this.$dom=(0,_jquery2["default"])(this.getDOMNode());var key=".calendar"+this.num;this.$dom.on("click"+key,this.handleKeepOpenCalendar),(0,_jquery2["default"])(document).on("click"+key,this.handleCloseCalendar)},componentWillUnmount:function(){this.$dom.off(".calendar"+this.num),(0,_jquery2["default"])(document).off(".calendar"+this.num)},handleCalendarSelect:function(e,date){4!==this.caType&&5!==this.caType&&(this._saveCurrentData(date),this.setState({isOpen:!1}))},handleCalendarConfirm:function(){var calendar=this.refs.calendar;this._saveCurrentData(calendar.getFormatDate(calendar.getCurrentSelected())),this.calendarMouseDown=!1,this.setState({isOpen:!1})},handleCalendarCancel:function(){this.calendarMouseDown=!1,this.setState({isOpen:!1})},handleInputClick:function(e){this.calendarMouseDown=!1,this.setState({isOpen:!0})},handleInputFocus:function(e){this.calendarMouseDown=!1,this.setState({isOpen:!0})},handleInputChange:function(e){this.inEdit=!0,this.setState({inputValue:e.target.value})},handleInputBlur:function(e){this.inEdit=!1;var _props=this.props,isBirthDate=_props.isBirthDate,data=_props.data;this._saveCurrentData(convertBeautyValue(e.target.value,data.timePrecision,isBirthDate?"dateTime_date":data.type)),this.calendarMouseDown||this.setState({isOpen:!1})},handleMouseDown:function(){this.calendarMouseDown=!0},handleKeepOpenCalendar:function(e){this.inCalendar=!0},handleCloseCalendar:function(e){return this.inCalendar?void(this.inCalendar=!1):(this.calendarMouseDown=!1,void this.setState({isOpen:!1}))},_saveCurrentData:function(dateStr){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:dateStr})},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isBirthDate=_props2.isBirthDate,isMobile=_props2.isMobile,style=_props2.style,itemNum=_props2.itemNum,id=data.id,dateFormat=data.dateFormat,type=data.type,formatType=data.formatType,timePrecision=data.timePrecision,isLimitDayInterval=data.isLimitDayInterval,dayIntervalFrom=data.dayIntervalFrom,dayIntervalTo=data.dayIntervalTo,isLimitDays=data.isLimitDays,limitDays=data.limitDays,_formStyle=this.formStyle(),inputIconStyle=(_formStyle.inputStyle,_formStyle.inputIconStyle),inputWithIconStyle=_formStyle.inputWithIconStyle,caType=_typeMapping[type]||1;isBirthDate&&(caType=1),this.caType=caType;var _disableDate=null;if(isLimitDays&&!_lodash2["default"].isEmpty(limitDays)){_disableDate=[];for(var i=0;i<7;i++)limitDays.indexOf(i+1)===-1&&_disableDate.push("W"+i)}var _calendarProps={className:(0,_classnames2["default"])("fbc_dtDropWrapper",{fbc_dtShowWrapper:this.state.isOpen}),ref:"calendar",type:caType,formatType:formatType,timeFormatType:[3,2,1][timePrecision-1]||1,formatList:_lodash2["default"].map(dateFormat||(isBirthDate?[1,3]:[1]),function(v){return v-1}),range:isLimitDayInterval?[dayIntervalFrom||-1,dayIntervalTo||-1]:!!isBirthDate&&[-1,!0],disabledDate:_disableDate,defaultValue:fill,triggerChange:1===caType,onChange:this.handleCalendarSelect,onMouseDown:this.handleMouseDown};4!==caType&&5!==caType||(_calendarProps.extOpeartion=_addons2["default"].createElement("div",{className:"calendar_operate"},_addons2["default"].createElement("a",{className:"fbc_button calendar_confirm",onClick:this.handleCalendarConfirm},_config.lang.gBtnConfirm),_addons2["default"].createElement("a",{className:"fbc_btnPrimitive calendar_cancel",onClick:this.handleCalendarCancel},_config.lang.gBtnCancel)));var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",type),id:id,style:componentStyle,ref:"cdDateTime"},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_addons2["default"].createElement("div",{className:"fbc_datetime",ref:"drop",name:"input_calendar_dropdown"},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",ref:"input",type:"text",spellCheck:!1,className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),icon:"birthDate"===data.type?String.fromCharCode(59081):"dateTime_time"===data.type?String.fromCharCode(59160):String.fromCharCode(59141),themeColor:style.themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,value:this.state.inputValue,onClick:this.handleInputClick,onFocus:this.handleInputFocus,onChange:this.handleInputChange,onBlur:this.handleInputBlur}),_addons2["default"].createElement(Calendar,_calendarProps)))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function valueFormat(v){var REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-$/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)$/g,REG_DAY=/^--(\d{1,2}?)$/g,REG_MONTH=/^-(\d{1,2}?)-$/g,REG_YEAR=/^(\d{4}?)--$/g;return v.match(REG_YEAR_MONTH)?{type:1,data:v+"1"}:v.match(REG_MONTH_DAY)?{type:2,data:"2000"+v}:v.match(REG_YEAR)?{type:3,data:v.replace("--","")+"-1-1"}:v.match(REG_MONTH)?{type:4,data:"2000"+v+"1"}:v.match(REG_DAY)?{type:5,data:"2000-1-"+v.replace("--","")}:{type:0,data:v}}function dateRange(type,range){var _resRange={start:null,end:null};return!range||!_lodash2["default"].isArray(range)||_lodash2["default"].isArray(range)&&2!==range.length?_resRange:(4===type?(range[0]!==-1&&(range[0]===!0?_resRange.start=[0,0,0]:_resRange.start=_lodash2["default"].map(range[0].split(":"),function(v){return+v}).concat([0,0,0]).slice(0,3)),range[1]!==-1&&(range[1]===!0?_resRange.end=[23,59,59]:_resRange.end=_lodash2["default"].map(range[1].split(":"),function(v){return+v}).concat([0,0,0]).slice(0,3))):(range[0]!==-1&&(range[0]===!0?_resRange.start=(0,_MGMoment2["default"])().startOf("date"):_resRange.start=(0,_MGMoment2["default"])(range[0])),range[1]!==-1&&(range[1]===!0?_resRange.end=(0,_MGMoment2["default"])().endOf("date"):_resRange.end=(0,_MGMoment2["default"])(range[1]))),_resRange)}function checkDateValid(date,type,formatType,startOf,endOf){var _resValid=!0,_newDate=date.clone();if(startOf||endOf)if(4===type){var sNum=void 0,eNum=void 0;startOf&&(sNum=1e4*startOf[0]+100*startOf[1]+startOf[2]),endOf&&(eNum=1e4*endOf[0]+100*endOf[1]+endOf[2]);var currentTime=_lodash2["default"].map(date.getTime().split(":"),function(v){return+v||0}),cNum=1e4*currentTime[0]+100*currentTime[1]+currentTime[2];sNum&&cNum<sNum&&(_newDate.hours(startOf[0]),_newDate.minutes(startOf[1]),_newDate.seconds(startOf[2]+1)),eNum&&cNum>eNum&&(_newDate.hours(endOf[0]),_newDate.minutes(endOf[1]),_newDate.seconds(endOf[2]+1))}else{var _start=startOf?startOf.clone():null,_end=endOf?endOf.clone():null;1!==type&&5!==type||(2===formatType?(_start&&_start.year(1999),_end&&_end.year(2001)):1===formatType&&(_start&&_start.date(1).startOf("date"),_end&&_end.date(1).endOf("date"))),_start&&(_resValid=_resValid&&_newDate.time()>=_start.time(),_resValid||(_newDate=_start.clone().add(1,"s"),0!==formatType&&(_resValid=!0))),_end&&(_resValid=_resValid&&_newDate.time()<=_end.time(),_resValid||(_newDate=_end.clone().add(-1,"s"),0!==formatType&&(_resValid=!0)))}return{date:_newDate,valid:_resValid}}function calendar(){var SwitchLabel=_addons2["default"].createClass({displayName:"SwitchLabel",mixins:[pureRenderMixin],getDefaultProps:function(){return{hasPrev:!0,hasNext:!0}},handleMouseDown:function(e){e.preventDefault()},render:function(){var props=this.props,_className={calendar_hTitle:!0,canSwitch:props.hasNext||props.hasPrev},_prevInfo={className:"iconfont calendar_hDecrease"},_nextInfo={className:"iconfont calendar_hIncrease"},_labelInfo={className:(0,_classnames2["default"])({hasTopLayer:props.onClick,calendar_CurrentVal:!0})};return props.hasNext&&(_nextInfo.onMouseDown=this.handleMouseDown,_nextInfo.onClick=props.onNextClick),props.hasPrev&&(_prevInfo.onMouseDown=this.handleMouseDown,_prevInfo.onClick=props.onPrevClick),props.onClick&&(_labelInfo.onMouseDown=this.handleMouseDown,_labelInfo.onClick=props.onClick),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(_className,props.className)},_addons2["default"].createElement("a",_prevInfo,String.fromCharCode(58989)),_addons2["default"].createElement("span",_labelInfo,props.label),_addons2["default"].createElement("a",_nextInfo,String.fromCharCode(58990)))}}),TypeTitle=_addons2["default"].createClass({displayName:"TypeTitle",mixins:[pureRenderMixin],getDefaultProps:function(){return{formatType:0}},handleMouseDown:function(e){e.preventDefault()},render:function(){var props=this.props,_expandArrow=null,_labelProps={className:"calendar_sTitle"};return props.onClick&&(_expandArrow=_addons2["default"].createElement("span",{className:"iconfont calendar_sArrow"},String.fromCharCode(58983)),_labelProps.onClick=props.onClick,_labelProps.onMouseDown=this.handleMouseDown),_addons2["default"].createElement("div",{className:"calendar_switcher",key:"format"},_addons2["default"].createElement("p",_labelProps,_addons2["default"].createElement("span",{className:"calendar_sType"},dateTypeList[props.formatType]),_expandArrow))}}),FillingTypeSelector=_addons2["default"].createClass({displayName:"FillingTypeSelector",mixins:[pureRenderMixin],handleMouseDown:function(e){e.preventDefault()},handleChangeFormat:function(formatType){this.props.onChange&&this.props.onChange("type",formatType)},renderItems:function(){var _this=this,_items=[],_props=this.props,formatList=_props.formatList,formatType=_props.formatType,_now=(0,_MGMoment2["default"])(),_ep={0:_now.getFullDate(),1:_now.getYearMonth(),2:_now.getMonthDay(),3:_now.year(),4:$lang.gMonth[_now.month()],5:_now.date()};return _lodash2["default"].forEach(dateTypeList,function(type,key){if((formatList||[]).indexOf(+key)===-1)return!0;var _itemProps={key:"typeItem"+key,className:(0,_classnames2["default"])({calendar_typeItem:!0,selected:formatType===+key}),onMouseDown:_this.handleMouseDown,onClick:_this.handleChangeFormat.bind(_this,+key)};_items.push(_addons2["default"].createElement("li",_itemProps,_addons2["default"].createElement("p",{className:"calendar_typeTitle"},type),_addons2["default"].createElement("p",{className:"calendar_typeExample"},_ep[key])))}),_items},render:function(){return _addons2["default"].createElement("div",{className:"calendar_body"},_addons2["default"].createElement("ul",{className:"calendar_typeList",key:"formatList"},this.renderItems()))}}),YearSelector=_addons2["default"].createClass({displayName:"YearSelector",mixins:[pureRenderMixin],getInitialState:function(){return this.animPrev=!1,this.animNext=!1,{decadeYear:this.props.date.decade()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({decadeYear:nextProps.date.decade()})},handleDecadePrev:function(){this.state.decadeYear>G_LIMIT_MIN_DATE.year()&&(this.setState({decadeYear:this.state.decadeYear-10}),this.animPrev=!0,this.animNext=!1)},handleDecadeNext:function(){this.setState({decadeYear:this.state.decadeYear+10}),this.animPrev=!1,this.animNext=!0},handleMouseDown:function(e){e.preventDefault()},handleChangeYear:function(year){var props=this.props;props.onChange&&props.onChange("year",year),props.isLeaf||props.onChangePanel&&props.onChangePanel("month")},renderYears:function(){for(var _years=[],decadeYear=this.state.decadeYear,_props2=this.props,selected=_props2.selected,startOf=_props2.startOf,endOf=_props2.endOf,_dFrom=decadeYear-1,_dTo=decadeYear+11,i=_dFrom;i<_dTo;i++){var disabled=i<G_LIMIT_MIN_DATE.year();startOf&&(disabled=disabled||i<startOf.year()),endOf&&(disabled=disabled||i>endOf.year());var yearProps={key:"year"+i,className:(0,_classnames2["default"])("calendar_bYearItem",{"current-decade":i>=decadeYear&&i<decadeYear+10,selected:!!selected&&i===selected.year(),disabled:disabled}),onMouseDown:this.handleMouseDown};disabled||(yearProps.onClick=this.handleChangeYear.bind(this,i)),_years.push(_addons2["default"].createElement("li",yearProps,i))}return _addons2["default"].createElement("ul",{className:"calendar_bYearList",key:"yearList"+decadeYear},_years)},render:function(){var decadeYear=this.state.decadeYear,hasPrev=decadeYear>G_LIMIT_MIN_DATE.year();return _addons2["default"].createElement("div",{className:"calendarMain"},_addons2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_addons2["default"].createElement(SwitchLabel,{className:"decade",label:decadeYear+"s",hasPrev:hasPrev,onPrevClick:this.handleDecadePrev,onNextClick:this.handleDecadeNext})),_addons2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",key:"calendarBody",transitionName:"listSwitch",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),enterTimeout:200,leaveTimeout:200},this.renderYears()))}}),MonthSelector=_addons2["default"].createClass({displayName:"MonthSelector",mixins:[pureRenderMixin],getInitialState:function(){return this.animPrev=!1,this.animNext=!1,{year:this.props.date.year()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({year:nextProps.date.year()})},handleYearPrev:function(){var _props3=this.props,isStatic=_props3.isStatic,onChange=_props3.onChange;if(!isStatic&&this.state.year>G_LIMIT_MIN_DATE.year()){var _newYear=this.state.year-1;onChange&&onChange("year",_newYear),this.setState({year:_newYear}),this.animPrev=!0,this.animNext=!1}},handleYearNext:function(){var _props4=this.props,isStatic=_props4.isStatic,onChange=_props4.onChange;if(!isStatic){var _newYear=this.state.year+1;onChange&&onChange("year",_newYear),this.setState({year:_newYear}),this.animPrev=!1,this.animNext=!0}},handleMouseDown:function(e){e.preventDefault()},handleLabelClick:function(name){this.props.onChangePanel&&this.props.onChangePanel(name)},handleSelectMonth:function(month){var _props5=this.props,onChange=_props5.onChange,isLeaf=_props5.isLeaf;onChange&&onChange("month",month),isLeaf||this.handleLabelClick("date")},renderMonths:function(){for(var _months=[],year=this.state.year,_props6=this.props,selected=_props6.selected,startOf=_props6.startOf,endOf=_props6.endOf,i=0;i<12;i++){var disabled=year<G_LIMIT_MIN_DATE.year();startOf&&(disabled=disabled||year<startOf.year()||year===startOf.year()&&i<startOf.month()),endOf&&(disabled=disabled||year>endOf.year()||year===endOf.year()&&i>endOf.month());var _monthProps={key:"month"+i,className:(0,_classnames2["default"])("calendar_bMonthItem",{selected:!!selected&&(selected.year()===year&&selected.month()===i),disabled:disabled}),onMouseDown:this.handleMouseDown};disabled||(_monthProps.onClick=this.handleSelectMonth.bind(this,i)),_months.push(_addons2["default"].createElement("li",_monthProps,$lang.gMonth[i]))}return _addons2["default"].createElement("ul",{className:"calendar_bMonthList",key:"monthsList"+year},_months)},render:function(){var isStatic=this.props.isStatic,year=this.state.year,_labelProps={className:isStatic?"month":"year",hasPrev:!isStatic&&year>G_LIMIT_MIN_DATE.year(),hasNext:!isStatic,label:isStatic?$lang.gCalendarChooseMonth:""+year,onClick:isStatic?null:this.handleLabelClick.bind(this,"year"),onPrevClick:this.handleYearPrev,onNextClick:this.handleYearNext};return _addons2["default"].createElement("div",{className:"calendarMain",key:"monthSelect"},_addons2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_addons2["default"].createElement(SwitchLabel,_labelProps)),_addons2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),key:"calendarBody",transitionName:"listSwitch",enterTimeout:200,leaveTimeout:200},this.renderMonths()))}}),DateSelector=_addons2["default"].createClass({displayName:"DateSelector",mixins:[pureRenderMixin],getInitialState:function(){this.animPrev=!1,this.animNext=!1;var date=this.props.date;return{year:date.year(),month:date.month()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({year:nextProps.date.year(),month:nextProps.date.month()})},handleLabelClick:function(name){this.props.onChangePanel&&this.props.onChangePanel(name)},handleYearPrev:function(){if(this.state.year>G_LIMIT_MIN_DATE.year()){var _newYear=this.state.year-1;this.setState({year:_newYear}),this.props.onChange&&this.props.onChange("year",_newYear),this.animPrev=!0,this.animNext=!1}},handleYearNext:function(){var _newYear=this.state.year+1;this.setState({year:_newYear}),this.props.onChange&&this.props.onChange("year",_newYear),this.animPrev=!1,this.animNext=!0},handleMonthPrev:function(){var _state=this.state,year=_state.year,month=_state.month,_change=this.props.onChange||function(){},_newYear=void 0,_newMonth=void 0;month>0?_newMonth=month-1:year>G_LIMIT_MIN_DATE.year()&&(_newMonth=11,_newYear=year-1);var _newState={};void 0!==_newYear&&(_newState.year=_newYear),void 0!==_newMonth&&(_newState.month=_newMonth),_lodash2["default"].isEmpty(_newState)||(this.setState(_newState),_change(_newState),this.animPrev=!0,this.animNext=!1)},handleMonthNext:function(){var _state2=this.state,year=_state2.year,month=_state2.month,_change=this.props.onChange||function(){},_newYear=void 0,_newMonth=void 0;month<11?_newMonth=month+1:(_newMonth=0,_newYear=year+1);var _newState={};void 0!==_newYear&&(_newState.year=_newYear),void 0!==_newMonth&&(_newState.month=_newMonth),_lodash2["default"].isEmpty(_newState)||(this.setState(_newState),_change(_newState),this.animPrev=!1,this.animNext=!0)},handleMouseDown:function(e){e.preventDefault()},handleSelectDay:function(day){this.props.onChange&&this.props.onChange({date:day,month:this.state.month,year:this.state.year})},renderWeek:function(){return _addons2["default"].createElement("ul",{className:"calendar_bWeekNameRow",key:"weekRow"},_lodash2["default"].map($lang.gWeekDay,function(val,i){return _addons2["default"].createElement("li",{className:"calendar_bWeekNameItem",key:"weekName"+i},val)}))},renderDays:function(){for(var _state3=this.state,year=_state3.year,month=_state3.month,_props7=this.props,startOf=_props7.startOf,endOf=_props7.endOf,disabledDate=_props7.disabledDate,selected=_props7.selected,_now=(0,_MGMoment2["default"])(),_hintMonth=(0,_MGMoment2["default"])(year+"-"+(month+1)+"-1"),startDate=_hintMonth.clone().startOf("month"),_currentDate=startDate.clone().day(0),_tempList=[],_weeks=[],_hasNextWeek=!0;_hasNextWeek;){var disabled=_currentDate.month()!==month;startOf&&(disabled=disabled||startOf.startOf("date").time()>_currentDate.time()),endOf&&(disabled=disabled||endOf.endOf("date").time()<_currentDate.time()),disabledDate&&(disabled=disabled||disabledDate.indexOf("W"+_currentDate.week())>-1);var selectDate=!1;selected&&(selectDate=_currentDate.date()===selected.date()&&_currentDate.month()===selected.month()&&_currentDate.year()===selected.year());var _dayProps={key:_currentDate.format("YYYYMMDD"),className:(0,_classnames2["default"])("calendar_bDayItem",{today:0===_currentDate.gap(_now),"current-month":_currentDate.month()===month,disabled:disabled,selected:selectDate}),onMouseDown:this.handleMouseDown};disabled||(_dayProps.onClick=this.handleSelectDay.bind(this,_currentDate.date())),_tempList.push(_addons2["default"].createElement("li",_dayProps,_addons2["default"].createElement("a",{href:"javascript:void(0);"},_currentDate.date()))),7===_tempList.length&&(_weeks.push(_addons2["default"].createElement("ul",{className:"calendar_bWeekRow",key:"week"+_weeks.length},_tempList)),_tempList=[],6===_weeks.length&&(_hasNextWeek=!1)),_currentDate=_currentDate.clone().add(1,"d")}return _weeks},render:function(){var _state4=this.state,year=_state4.year,month=_state4.month,yearProps={label:""+year,key:"dYear",className:"halfWidth year",onClick:this.handleLabelClick.bind(this,"year"),onPrevClick:this.handleYearPrev,onNextClick:this.handleYearNext},monthProps={label:$lang.gMonth[month],key:"dMonth",className:"halfWidth month",onClick:this.handleLabelClick.bind(this,"month"),onPrevClick:this.handleMonthPrev,onNextClick:this.handleMonthNext};return _addons2["default"].createElement("div",{className:"calendarMain",key:"dateSelect"},_addons2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_addons2["default"].createElement(SwitchLabel,yearProps),_addons2["default"].createElement(SwitchLabel,monthProps)),_addons2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),key:"calendarBody",transitionName:"listSwitch",enterTimeout:200,leaveTimeout:200},_addons2["default"].createElement("div",{className:"calendar_bWeekList",key:"ListO"+year+"Y"+month+"M"},this.renderWeek(),this.renderDays())))}}),StaticDateSelector=_addons2["default"].createClass({displayName:"StaticDateSelector",mixins:[pureRenderMixin],getInitialState:function(){return this.animPrev=!1,this.animNext=!1,{month:this.props.date.month()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({month:nextProps.date.month()})},handleLabelClick:function(type){this.props.onChangePanel&&this.props.onChangePanel(type)},handleMonthPrev:function(){var _props8=this.props,isStatic=_props8.isStatic,onChange=_props8.onChange,month=this.state.month;if(!isStatic){var _newMonth=month-1;_newMonth<0&&(_newMonth=11),onChange&&onChange("month",_newMonth),this.setState({month:_newMonth}),this.animPrev=!0,this.animNext=!1}},handleMonthNext:function(){var _props9=this.props,isStatic=_props9.isStatic,onChange=_props9.onChange,month=this.state.month;if(!isStatic){var _newMonth=month+1;_newMonth>11&&(_newMonth=0),onChange&&onChange("month",_newMonth),this.setState({month:_newMonth}),this.animPrev=!1,this.animNext=!0}},handleMouseDown:function(e){e.preventDefault()},handleSelectDay:function(day){this.props.onChange&&this.props.onChange("date",day)},renderDays:function(){for(var _props10=this.props,isStatic=_props10.isStatic,selected=_props10.selected,month=this.state.month,len=isStatic?31:STATIC_MONTH_DATE[month],_tempList=[],_weeks=[],i=0;i<len;i++){var _dayProps={key:"s"+(month+1)+(i+1),className:(0,_classnames2["default"])({calendar_bDayItem:!0,"current-month":!0,selected:!!selected&&(i+1===selected.date()&&month===selected.month())}),onMouseDown:this.handleMouseDown,onClick:this.handleSelectDay.bind(this,i+1)};_tempList.push(_addons2["default"].createElement("li",_dayProps,_addons2["default"].createElement("a",{href:"javascript:void(0);"},i+1))),7!==_tempList.length&&len!==i+1||(_weeks.push(_addons2["default"].createElement("ul",{className:"calendar_bWeekRow",key:"weekS"+_weeks.length},_tempList)),_tempList=[])}return _weeks},render:function(){var isStatic=this.props.isStatic,month=this.state.month,_labelProps={className:"month",hasPrev:!isStatic,hasNext:!isStatic,label:isStatic?$lang.gCalendarChooseDate:""+$lang.gMonth[month],onClick:isStatic?null:this.handleLabelClick.bind(this,"month"),onPrevClick:this.handleMonthPrev,onNextClick:this.handleMonthNext};return _addons2["default"].createElement("div",{className:"calendarMain",key:"dateSelect"},_addons2["default"].createElement("div",{className:"calendar_header",key:"calendarLabel"},_addons2["default"].createElement(SwitchLabel,_labelProps)),_addons2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendar_body",{cm_prev:this.animPrev,cm_next:this.animNext}),key:"calendarBody",transitionName:"listSwitch",enterTimeout:200,leaveTimeout:200},_addons2["default"].createElement("div",{className:"calendar_bWeekList",key:"ListS"+month+"M"},this.renderDays())))}}),TimerEditor=_addons2["default"].createClass({displayName:"TimerEditor",mixins:[pureRenderMixin],getInitialState:function(){this.animPrev=!1,this.animNext=!1;var date=this.props.date;return{hours:date.hours(),minutes:date.minutes(),seconds:date.seconds()}},componentWillUpdate:function(nextProps){nextProps.date.time()!==this.props.date.time()&&this.setState({hours:nextProps.date.hours(),minutes:nextProps.date.minutes(),seconds:nextProps.date.seconds()})},handleInputChange:function(type,e){var _value=e.target.value,_newState={};_newState[type]=_value,this.props.onChange&&this.props.onChange(type,_value),this.setState(_newState)},handleMouseDown:function(e){},render:function(){var _props11=this.props,className=_props11.className,accuracy=_props11.accuracy,children=_props11.children,_state5=this.state,hours=_state5.hours,minutes=_state5.minutes,seconds=_state5.seconds,_hour=[_addons2["default"].createElement("input",{className:(0,_classnames2["default"])("cp_calendar_input","calendar_hour",className),name:"hour",key:"hourInput",value:hours,onChange:this.handleInputChange.bind(this,"hour")}),_addons2["default"].createElement("span",{className:"calendarTips",key:"hourUnit"},$lang.gTimeUnit[0])],_minute=[_addons2["default"].createElement("input",{className:(0,_classnames2["default"])("cp_calendar_input","calendar_minute",className),name:"minute",key:"minuteInput",value:minutes,onChange:this.handleInputChange.bind(this,"minute")}),_addons2["default"].createElement("span",{className:"calendarTips",key:"minuteUnit"},$lang.gTimeUnit[1])],_second=[_addons2["default"].createElement("input",{className:(0,_classnames2["default"])("cp_calendar_input","calendar_second",className),name:"second",key:"secondInput",value:seconds,onChange:this.handleInputChange.bind(this,"second")}),_addons2["default"].createElement("span",{className:"calendarTips",key:"secondUnit"},$lang.gTimeUnit[2])],_timers=[_hour,_minute,_second];return accuracy<0&&0===_addons2["default"].Children.count(children)?null:_addons2["default"].createElement("div",{className:"calendar_footer"},_addons2["default"].createElement("div",{className:"calendar_time"},_addons2["default"].createElement("div",{className:"calendar_content"},_timers.slice(0,accuracy),_addons2["default"].createElement("div",{className:"clearB"}))),children)}});return _addons2["default"].createClass({displayName:"Calendar",mixins:[pureRenderMixin],getDefaultProps:function(){return{type:1,formatType:0,timeFormatType:1}},_preProcessState:function(props){var type=props.type,defaultValue=props.defaultValue,formatType=props.formatType,formatList=props.formatList,range=props.range,_defaultPanelMapping={1:"date",2:"date",3:"date",4:"time",5:"date"},_defaultValueInfo=valueFormat(defaultValue||""),_currentShowDate=(0,_MGMoment2["default"])().startOf("date");if(_defaultValueInfo.data&&(_currentShowDate=(0,_MGMoment2["default"])(_defaultValueInfo.data)),range){if(range[0]&&range[0]!==-1&&range[0]!==!0){var _rangeStart=(0,_MGMoment2["default"])(range[0]);_rangeStart.time()>_currentShowDate.time()&&(_currentShowDate=_rangeStart.clone().startOf("date"))}if(range[1]&&range[1]!==-1&&range[1]!==!0){var _rangeEnd=(0,_MGMoment2["default"])(range[1]);_rangeEnd.time()<_currentShowDate.time()&&(_currentShowDate=_rangeEnd.clone().startOf("date"))}}var _panelDefault=_defaultPanelMapping[type],_formatType=formatType,_formatList=formatList||[0,1,2];if(_formatList.indexOf(_defaultValueInfo.type)>-1?_formatType=_defaultValueInfo.type:_formatList.indexOf(_formatType)===-1&&(_formatType=_formatList[0]),this.formatList=_formatList,2===type||1===type||5===type){switch(_formatType){case 0:case 2:case 5:_panelDefault="date";break;case 1:case 4:_panelDefault="month";break;case 3:_panelDefault="year"}5!==_formatType&&2!==_formatType||(_currentShowDate=_currentShowDate.year(2e3))}var rangeInfo=dateRange(type,range);return this.start=rangeInfo.start,this.end=rangeInfo.end,{formatType:_formatType,panel:_panelDefault,pointer:_currentShowDate,selected:!!defaultValue&&_currentShowDate.clone()}},getInitialState:function(){this.animationMagnify=!1,this.animationShrink=!1,this.panelMapping={date:0,month:1,year:2,type:3};var p=this._preProcessState(this.props);return{formatType:p.formatType,panel:p.panel,pointer:p.pointer,selected:p.selected}},componentDidMount:function(){},componentWillUpdate:function(nextProps,nextState){if(this.animationMagnify=this.panelMapping[nextState.panel]<this.panelMapping[this.state.panel],this.animationShrink=!this.animationMagnify,nextProps.defaultValue!==this.props.defaultValue){var p=this._preProcessState(nextProps);this.setState({pointer:p.pointer,selected:p.selected})}},componentWillUnmount:function(){},toggleTypeSelector:function(newType){var currentFormatType=void 0!==newType?newType:this.state.formatType,currentPanel=this.state.panel;"type"===currentPanel?(1!==currentFormatType&&4!==currentFormatType||"month"===this.oldPanel?3===currentFormatType&&"year"!==this.oldPanel?this.oldPanel="year":5===currentFormatType&&"date"!==this.oldPanel&&(this.oldPanel="date"):this.oldPanel="month",this.handleChangePanel(this.oldPanel)):(this.oldPanel=currentPanel,this.handleChangePanel("type"))},handleMouseDown:function(e){},handleChangePanel:function(panel){this.setState({panel:panel})},handleChangePointer:function(d,newVal){var _this2=this,_props12=this.props,type=_props12.type,triggerChange=_props12.triggerChange,onSelect=_props12.onSelect,_state6=this.state,formatType=_state6.formatType,pointer=_state6.pointer,_keys=[],_value={};_lodash2["default"].isPlainObject(d)?(_keys=Object.keys(d),_value=d):(_keys=[d],_value={},_value[d]=newVal);var _change=(1===formatType||4===formatType)&&_keys.indexOf("month")>-1||(0===formatType||2===formatType||5===formatType)&&_keys.indexOf("date")>-1||3===formatType&&_keys.indexOf("year")>-1,_newPointer=pointer.clone();_lodash2["default"].forEach(_value,function(value,dateType){switch(dateType){case"second":_newPointer.seconds(+value);break;case"minute":_newPointer.minutes(+value);break;case"hour":_newPointer.hours(+value);break;case"date":_newPointer.date(+value);break;case"month":_newPointer.month(+value);break;case"year":_newPointer.year(+value);break;case"type":formatType!==value&&(2!==formatType&&2===value?_newPointer.year("2000"):2===formatType&&_newPointer.year((0,_MGMoment2["default"])().year()),_this2.setState({formatType:value})),_this2.toggleTypeSelector(value)}});var _checkInfo=checkDateValid(_newPointer,type,formatType,this.start,this.end);_newPointer=_checkInfo.date,_checkInfo.valid&&(this.setState({pointer:_newPointer}),triggerChange&&_change&&this.doChange(_newPointer),onSelect&&onSelect(_newPointer),this.setState({selected:_newPointer}))},getCurrentSelected:function(){return this.state.pointer},getFormatDate:function(date){var _props13=this.props,type=_props13.type,timeFormatType=_props13.timeFormatType,_state7=this.state,selected=_state7.selected,formatType=_state7.formatType;if(date||(date=selected),!date)return"";var _formatDate=date.getFullDate();if(1!==timeFormatType&&(2===timeFormatType?date.seconds(0):3===timeFormatType&&(date.seconds(0),
date.minutes(0))),1===type||2===type||5===type)switch(formatType){case 1:_formatDate=date.getYearMonth()+"-";break;case 2:_formatDate="-"+date.getMonthDay();break;case 3:_formatDate=date.year()+"--";break;case 4:_formatDate="-"+(date.month()+1)+"-";break;case 5:_formatDate="--"+date.date()}else 3===type?_formatDate=date.getFullDateTime():4===type&&(_formatDate=date.getTime());return 5===type&&(_formatDate+=" "+date.getTime()),_formatDate},doSetDate:function(dateStr){},doChange:function(date){var _formatDate=this.getFormatDate(date);this.setState({selected:date}),this.props.onChange&&this.props.onChange(null,_formatDate)},renderPanel:function(){var _props14=this.props,disabledDate=(_props14.type,_props14.disabledDate),_state8=this.state,panel=_state8.panel,formatType=_state8.formatType,pointer=_state8.pointer,selected=_state8.selected,_panel=null,_panelProps={date:pointer,selected:selected,key:"shown"+panel,startOf:this.start,endOf:this.end,isLeaf:(1===formatType||4===formatType)&&"month"===panel||(0===formatType||2===formatType||5===formatType)&&"date"===panel||3===formatType&&"year"===panel,onChange:this.handleChangePointer,onChangePanel:this.handleChangePanel};switch(panel){case"date":_panel=2===formatType||5===formatType?_addons2["default"].createElement(StaticDateSelector,_extends({},_panelProps,{isStatic:5===formatType})):_addons2["default"].createElement(DateSelector,_extends({},_panelProps,{disabledDate:disabledDate}));break;case"month":_panel=_addons2["default"].createElement(MonthSelector,_extends({},_panelProps,{isStatic:2===formatType||4===formatType}));break;case"year":_panel=_addons2["default"].createElement(YearSelector,_panelProps);break;case"type":_panel=_addons2["default"].createElement(FillingTypeSelector,_extends({},_panelProps,{formatType:formatType,formatList:this.formatList}))}return _panel},render:function(){var _props15=this.props,type=_props15.type,className=_props15.className,timeFormatType=_props15.timeFormatType,extOpeartion=_props15.extOpeartion,onMouseDown=_props15.onMouseDown,_state9=this.state,formatType=_state9.formatType,panel=_state9.panel,pointer=_state9.pointer,timerFormatMapping={1:3,2:2,3:1},_formatLabel=null,_timer=_addons2["default"].createElement(TimerEditor,{key:"calendarTimer",accuracy:timerFormatMapping[timeFormatType],startOf:this.start,endOf:this.end,date:pointer,onChange:this.handleChangePointer},extOpeartion);return 4===type?_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(className,"calendarContainer","calendarTimer"),key:"calendar",ref:"calendar",onMouseDown:onMouseDown},_timer):(1!==type&&5!==type||(_formatLabel=_addons2["default"].createElement(TypeTitle,{formatType:formatType,formatList:this.formatList,onClick:this.toggleTypeSelector})),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(className,"calendarContainer",["YMD","YM","MD","Y","M","D"][formatType],"panel_"+panel),key:"calendar",ref:"calendar",onMouseDown:onMouseDown},_formatLabel,_addons2["default"].createElement(_LegoAnimationGroup2["default"],{component:"div",className:(0,_classnames2["default"])("calendarWrapper",{calendarStatic:2===formatType||5===formatType,cm_magnify:this.animationMagnify,cm_shrink:this.animationShrink}),transitionName:"typeSwitch",enterTimeout:200,leaveTimeout:200},this.renderPanel()),[3,4,5].indexOf(type)>-1?_timer:null))}})}function calendarFactory(language){return $lang=language,dateTypeList={0:$lang.gCalendarTypeYMD,1:$lang.gCalendarTypeYM,2:$lang.gCalendarTypeMD,3:$lang.gCalendarTypeY,4:$lang.gCalendarTypeM,5:$lang.gCalendarTypeD},calendar()}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=calendarFactory;var _jquery=__webpack_require__(2),_lodash=(_interopRequireDefault(_jquery),__webpack_require__(10)),_lodash2=_interopRequireDefault(_lodash),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_LegoAnimationGroup=__webpack_require__(58),_LegoAnimationGroup2=_interopRequireDefault(_LegoAnimationGroup),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,G_LIMIT_MIN_DATE=(0,_MGMoment2["default"])("1900-1-1"),STATIC_MONTH_DATE=[31,29,31,30,31,30,31,31,30,31,30,31],$lang={},dateTypeList={};module.exports=exports["default"]},,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function beautyValue(v){var _date=valueStructureGetter(v),_dateStr=_date.dateStr;if(_dateStr){var REG_YEAR_MONTH=/^(\d{4}?)-(\d{1,2}?)-$/g,REG_MONTH_DAY=/^-(\d{1,2}?)-(\d{1,2}?)$/g,REG_DAY=/^--(\d{1,2}?)$/g,REG_MONTH=/^-(\d{1,2}?)-$/g,REG_YEAR=/^(\d{4}?)--$/g;if(_dateStr.match(REG_YEAR_MONTH))return _dateStr.replace(/-$/g,"");if(_dateStr.match(REG_MONTH_DAY))return _dateStr.replace(/^-/g,"");if(_dateStr.match(REG_YEAR))return _dateStr.replace("--","");if(_dateStr.match(REG_MONTH))return _config.lang.gMonth[+v.replace(/-/g,"")-1];if(_dateStr.match(REG_DAY))return _dateStr.replace("--","")}return _dateStr}function valueStructureGetter(dateStr){var _t=["00","00","00"],_d=(dateStr||"").replace(REG_TIME,function($,$1,$2,$3){return $1&&(_t[0]=$1),$2&&(_t[1]=$2),$3&&(_t[2]=$3),""});return{dateStr:_lodash2["default"].trim(_d),timeList:_t}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_classnames=(_interopRequireDefault(_jquery),__webpack_require__(43)),_classnames2=_interopRequireDefault(_classnames),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_MGMoment=__webpack_require__(29),_formStore=(_interopRequireDefault(_MGMoment),__webpack_require__(37)),_formStore2=_interopRequireDefault(_formStore),_PopCalendar=__webpack_require__(61),_PopCalendar2=_interopRequireDefault(_PopCalendar),_FCTextBox=__webpack_require__(46),pureRenderMixin=(_interopRequireDefault(_FCTextBox),_addons2["default"].addons.PureRenderMixin),_typeMapping={dateTime_date:1,dateTime_time:4,dateTime_both:5},REG_TIME=/(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?/g,_num=0;exports["default"]=_addons2["default"].createClass({displayName:"Component(DateTimeMobile)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return _num++,this.num=_num,{isOpen:!1,displayValue:beautyValue(this.props.fill)}},componentWillUpdate:function(nextProps,nextState){beautyValue(nextProps.fill)===this.state.displayValue||this.inEdit||this.setState({displayValue:beautyValue(nextProps.fill)})},_saveCurrentData:function(dateStr){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:dateStr})},handleChangeDate:function(date){var _currentDate=this.props.fill||"",_valueStructureGetter=valueStructureGetter(_currentDate),timeList=(_valueStructureGetter.dateStr,_valueStructureGetter.timeList),_t="";1!==this.caType&&(_t=timeList.join(":")),this._saveCurrentData(_lodash2["default"].trim(date+" "+_t))},handleChangeTime:function(key,e){var value=e.target.value,_currentDate=this.props.fill||"",_valueStructureGetter2=valueStructureGetter(_currentDate),dateStr=_valueStructureGetter2.dateStr,timeList=_valueStructureGetter2.timeList,_newTime=[];1!==this.caType&&(_newTime=timeList.slice(),_newTime[key]=value||"00"),this._saveCurrentData(_lodash2["default"].trim(dateStr+" "+_newTime.join(":")))},popCalendar:function(){var _props=this.props,isBirthDate=_props.isBirthDate,data=_props.data,fill=_props.fill,dateFormat=data.dateFormat,formatType=data.formatType,isLimitDayInterval=data.isLimitDayInterval,dayIntervalFrom=data.dayIntervalFrom,dayIntervalTo=data.dayIntervalTo,isLimitDays=data.isLimitDays,limitDays=data.limitDays,_disableDate=null;if(isLimitDays&&!_lodash2["default"].isEmpty(limitDays)){_disableDate=[];for(var i=0;i<7;i++)limitDays.indexOf(i+1)===-1&&_disableDate.push("W"+i)}var _defaultValue=fill||"";_defaultValue&&_defaultValue.match(/[:]/)&&(_defaultValue=_lodash2["default"].trim(_defaultValue.replace(REG_TIME,""))),_addons2["default"].render(_addons2["default"].createElement(_PopCalendar2["default"],{formatType:formatType,dateFormat:dateFormat||(isBirthDate?[1,3]:[1]),isLimitDayInterval:isLimitDayInterval,dayIntervalFrom:dayIntervalFrom,dayIntervalTo:dayIntervalTo,disableDate:_disableDate,defaultValue:_defaultValue,onChange:this.handleChangeDate}),document.getElementById("popwin"))},renderDropDown:function(data,dropRange,defaultValue,key,width,dataKey){var i=dropRange[0],rangeTo=dropRange[1],options=[];options.push(_addons2["default"].createElement("option",{key:"defaultDisabled",value:null,disabled:!0,selected:!0,hidden:!0,style:{display:"none"}},""));var _formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle;for(i;i<=rangeTo;i++)options.push(_addons2["default"].createElement("option",{value:i,key:"s"+i},i));return _addons2["default"].createElement("div",{className:"fbc_dateTimeSelectWrapper",key:key,style:{width:width}},_addons2["default"].createElement("div",{className:"fbc_select fbc_dateTimeSelect"},_addons2["default"].createElement("i",{className:"fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},_config.lang.gTimeUnit[dataKey]),_addons2["default"].createElement("select",{className:"fbc_innerSelect",value:data,style:inputStyle,onChange:this.handleChangeTime.bind(this,dataKey)},options)))},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isBirthDate=_props2.isBirthDate,id=data.id,type=data.type,timePrecision=data.timePrecision,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputIconStyle=_formStyle2.inputIconStyle,caType=_typeMapping[type]||1;isBirthDate&&(caType=1),this.caType=caType;var _fillDate=null;fill&&(_fillDate=valueStructureGetter(fill).timeList);var _content=null,_timePrecision=Math.min(3,+(timePrecision||3));return 4===caType?_content=_addons2["default"].createElement("div",{className:"fbc_timeSelector fbc_timeOnly"},this.renderDropDown(_fillDate?+_fillDate[0]:null,[0,23],_config.lang.cDateTimeHour,"dpHour",100/_timePrecision+"%",0),_timePrecision<2?null:this.renderDropDown(_fillDate?+_fillDate[1]:null,[0,59],_config.lang.cDateTimeMin,"dpMin",100/_timePrecision+"%",1),_timePrecision<3?null:this.renderDropDown(_fillDate?+_fillDate[2]:null,[0,59],_config.lang.cDateTimeSec,"dpSec",100/_timePrecision+"%",2)):5===caType?(_content=[],_content.push(_addons2["default"].createElement("div",{className:"fbc_datetime fbc_dateTimeSelector",key:"dateTimeSelector"},_addons2["default"].createElement("i",{className:"iconfont fbc_dtIcon",style:inputIconStyle},"birthDate"===data.type?String.fromCharCode(59081):String.fromCharCode(59141)),_addons2["default"].createElement("div",{className:"fbc_input",style:_lodash2["default"].assign({},inputStyle,{paddingLeft:(inputStyle.fontSize||14)+10}),onClick:this.popCalendar},_addons2["default"].createElement("div",{className:"fbi_input"},this.state.displayValue)))),_content.push(_addons2["default"].createElement("div",{className:"fbc_timeSelector fbc_dateTimeSelector",key:"timerSelector"},this.renderDropDown(_fillDate?+_fillDate[0]:null,[0,23],_config.lang.cDateTimeHour,"dpHour",100/_timePrecision+"%",0),_timePrecision<2?null:this.renderDropDown(_fillDate?+_fillDate[1]:null,[0,59],_config.lang.cDateTimeMin,"dpMin",100/_timePrecision+"%",1),_timePrecision<3?null:this.renderDropDown(_fillDate?+_fillDate[2]:null,[0,59],_config.lang.cDateTimeSec,"dpSec",100/_timePrecision+"%",2)))):1===caType&&(_content=_addons2["default"].createElement("div",{className:"fbc_datetime",key:"dateTimeSelector"},_addons2["default"].createElement("i",{className:"iconfont fbc_dtIcon",style:inputIconStyle},"birthDate"===data.type?String.fromCharCode(59081):String.fromCharCode(59141)),_addons2["default"].createElement("div",{className:"fbc_input",style:_lodash2["default"].assign({},inputStyle,{paddingLeft:(inputStyle.fontSize||14)+5}),onClick:this.popCalendar},_addons2["default"].createElement("div",{className:"fbi_input"},this.state.displayValue)))),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",type),id:id,style:componentStyle,ref:"cdDateTime"},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_content",style:{width:"100%"}},_content,_addons2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_classnames=__webpack_require__(43),_addons=(_interopRequireDefault(_classnames),__webpack_require__(14)),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_FCPopwin=__webpack_require__(62),_FCPopwin2=_interopRequireDefault(_FCPopwin),_FCCalendar=__webpack_require__(57),_FCCalendar2=_interopRequireDefault(_FCCalendar),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,Calendar=(0,_FCCalendar2["default"])(_config.lang);exports["default"]=_addons2["default"].createClass({displayName:"PopCalendar",mixins:[pureRenderMixin],getInitialState:function(){var _this=this;return _utils2["default"].getParentInfo([{t:"self",v:"rect",e:1,n:"rect"}]).then(function(res){res&&res.innerState&&_this.setState({rectTop:res.rect.top})}),{}},componentDidMount:function(){(0,_jquery2["default"])(".ie8").length>0?(0,_jquery2["default"])("html").addClass("ie8noscroll"):(0,_jquery2["default"])("html").addClass("noscroll")},componentWillUnmount:function(){(0,_jquery2["default"])("html").removeClass("noscroll").removeClass("ie8noscroll")},handleClose:function(){(0,_jquery2["default"])("html").removeClass("noscroll").removeClass("ie8noscroll"),this.refs.popwin.doClose()},handleDateChange:function(e,date){var _this2=this;this.props.onChange&&this.props.onChange(date),window.setTimeout(function(){_this2.handleClose()},80)},render:function(){var props=this.props,_calendarProps={ref:"calendar",type:1,formatType:props.formatType,formatList:_lodash2["default"].map(props.dateFormat||[1],function(v){return v-1}),range:props.isLimitDayInterval?[props.dayIntervalFrom||-1,props.dayIntervalTo||-1]:!!props.isBirthDate&&[-1,!0],disabledDate:props.disableDate,defaultValue:props.defaultValue,triggerChange:!0,onChange:this.handleDateChange};return _addons2["default"].createElement(_FCPopwin2["default"],{className:"pop_calendar",ref:"popwin",boxStyle:{marginTop:this.state.rectTop?Math.max(60-this.state.rectTop,60):null}},_addons2["default"].createElement(Calendar,_calendarProps))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames);exports["default"]=_addons2["default"].createClass({displayName:"FCPopwin",componentDidMount:function(){this.popElem=document.getElementById("popwin")},doClose:function(){this.props.onClose&&this.props.onClose(),_addons2["default"].unmountComponentAtNode(this.popElem)},handleClose:function(){this.props.isCantClose||this.doClose()},handlePreventDefault:function(e){e.preventDefault(),e.stopPropagation()},render:function(){var _props=this.props,className=_props.className,title=_props.title,isCantClose=_props.isCantClose,boxStyle=_props.boxStyle,_header=null;title&&(_header=_addons2["default"].createElement("div",{className:"pop_header"},_addons2["default"].createElement("p",{className:"pop_title"},title)));var _close=null;return isCantClose||(_close=_addons2["default"].createElement("a",{className:"iconfont pop_close",onClick:this.doClose},String.fromCharCode(58982))),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("pop_wrapper",className),onScroll:this.handlePreventDefault,onWheel:this.handlePreventDefault},_addons2["default"].createElement("div",{className:"pop_mask",onClick:this.handleClose}),_addons2["default"].createElement("div",{className:"pop_box popInnerAnimation",style:boxStyle||null},_header,_addons2["default"].createElement("div",{className:"pop_content"},this.props.children),_close))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_utils=__webpack_require__(22);__webpack_require__(64),__webpack_require__(65),__webpack_require__(66),__webpack_require__(67);var pureRenderMixin=_addons2["default"].addons.PureRenderMixin;global.jQuery=global.$=_jquery2["default"];var FILE_TYPE_LIST=["","txt","doc/docx","xls/xlsx","ppt/pptx","html/htm","pdf","jpg","png","gif","bmp","psd","tiff","avi","swf","wmv","rmvb","mp4","3gp","mov","mp3","m4a","wma","rar","zip","7z"];exports["default"]=_addons2["default"].createClass({displayName:"Component(Attachment)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return{tipHint:!1}},componentWillReceiveProps:function(nextProps){var valid=nextProps.valid;valid&&!this.isHint&&valid.indexOf("tipHint")>-1&&this.props.valid.indexOf("tipHint")===-1&&(this.isHint=!0,this.setState({tipHint:!0}))},componentDidMount:function(){var _this=this;this.bindFileUploader(),clearTimeout(this.hintTimeout),this.hintTimeout=setTimeout(function(){_this.isHint=!1,_this.setState({tipHint:!1})},1200)},componentDidUpdate:function(){var _this2=this;this.bindFileUploader(),clearTimeout(this.hintTimeout),this.hintTimeout=setTimeout(function(){_this2.isHint=!1,_this2.setState({tipHint:!1})},1200)},componentWillUnmount:function(){clearTimeout(this.hintTimeout)},_getFileNum:function(){var _props=this.props,data=_props.data,fill=_props.fill,_componentLength=data.isAcceptMultipleFile?(fill||[]).length+1:1;return data.isAcceptMultipleFile&&data.fileNumber&&(_componentLength=Math.min(_componentLength,+data.fileNumber)),_componentLength},_beautySize:function(bytes){if(!bytes)return" - ";for(var unitList=["B","KB","MB","GB"],unitCursor=0,_beauty=bytes;_beauty>1024;)unitCursor++,_beauty/=1024;return _beauty.toFixed(2)+unitList[unitCursor]},bindFileUploader:function(){if(!_utils.isOldIE)for(var _componentLength=this._getFileNum(),self=this,i=0;i<_componentLength;i++)if(this.refs["fileComponent"+i]){var $fileCp=(0,_jquery2["default"])(this.refs["fileComponent"+i].getDOMNode());$fileCp.fileupload({dataType:"json",replaceFileInput:!1,add:function(e,data){var idx=e.target.getAttribute("data-idx");self.handleAddFile(data.files[0],idx)},drop:function(){return!1}})}},handleRemoveFile:function(fIdx){_formStore2["default"].dispatch({type:"removeFile",id:this.props.data.id,idx:fIdx})},handleChangeFile:function(idx,e){if(_utils.isOldIE){var Files=e.target,filePath=_lodash2["default"].last(Files.value.split(/[\\\/]/g)),size=null;try{Files.select();var realPath=document.selection.createRange().text,fso=new ActiveXObject("Scripting.FileSystemObject"),file=fso.GetFile(realPath);size=file.size}catch(e){}this.handleAddFile({name:filePath,size:size},idx)}},handleAddFile:function(file,idx){_formStore2["default"].dispatch({type:"addFile",id:this.props.data.id,value:file,idx:idx})},renderTips:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle;if(1!==data.isLimitFileType)return null;var content=null,isErrorTip=(valid||[]).indexOf("tip")>-1;if(data.isLimitFileType&&!_lodash2["default"].isEmpty(data.fileTypes)){var types=_lodash2["default"].map(data.fileTypes||[],function(type){return FILE_TYPE_LIST[type]});content=_config.lang.cFileSupportFunc({fileTypes:types.join(", ")})}return _addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip||this.state.tipHint}),style:tipsStyle},content)},render:function(){for(var _props3=this.props,data=_props3.data,fill=_props3.fill,valid=_props3.valid,componentStyle=_props3.componentStyle,isMobile=_props3.isMobile,style=_props3.style,itemNum=_props3.itemNum,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputIconStyle=_formStyle2.inputIconStyle,_uploaderList=[],_componentLength=this._getFileNum(),i=0;i<_componentLength;i++){var info=(fill||[])[i],_uploaderContent=null;if(info){var content=_addons2["default"].createElement("a",{href:"javascript:void(0);"},info.name),extInfo=_addons2["default"].createElement("span",{className:"fbc_ufSize"},this._beautySize(info.size));info.error&&(content=_addons2["default"].createElement("span",null,_config.lang["cUploadFailed"+info.error]),extInfo=_addons2["default"].createElement("span",{className:"fbc_ufSize"},info.name)),_uploaderContent=_addons2["default"].createElement("p",{className:"fbc_ufText"},content,extInfo)}else _uploaderContent=_addons2["default"].createElement("p",{className:"fbc_ufText"},_addons2["default"].createElement("span",null,_config.lang.cFileSizeHint({fileSize:data.isLimitFileSize&&data.fileSize?data.fileSize:500})));var _dIndex=info?info.idx:_formStore2["default"].getPreparedFileIdx(data.id),_fpIndex=info?info.idx:null;_uploaderList.push(_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_uploadFile",{empty:!info,succeed:info,error:info&&info.error}),key:"fileUpload"+_dIndex,style:inputStyle},_addons2["default"].createElement("i",{className:"iconfont fbc_ufIcon",style:{lineHeight:inputIconStyle.lineHeight,fontSize:inputIconStyle.fontSize}},info?info.error?String.fromCharCode(58938):String.fromCharCode(58988):String.fromCharCode(58979)),_addons2["default"].createElement("div",{className:"fbc_ufContent"},_uploaderContent,info?_addons2["default"].createElement("a",{className:"iconfont fbc_ufRemove",title:_config.lang.cRemoveFile,style:{lineHeight:inputStyle.lineHeight},onClick:this.handleRemoveFile.bind(this,_dIndex)},String.fromCharCode(58980)):null),_addons2["default"].createElement("input",{className:"fbc_ufInput",type:"file",size:"1",ref:"fileComponent"+i,"data-idx":_fpIndex,onChange:this.handleChangeFile.bind(this,_fpIndex)})))}var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},_uploaderList)))}}),module.exports=exports["default"]}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
	* http://jqueryui.com
	* Includes: widget.js
	* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
!function(factory){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){/*!
	 * jQuery UI Widget 1.11.4
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/jQuery.widget/
	 */
var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{events=$._data(elem,"events"),events&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.each(function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))})),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){if(suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}});$.widget})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){"use strict";var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var form,iframe,addParamChar,initialIframeSrc=options.initialIframeSrc||"javascript:false;";return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>'),form.attr("accept-charset",options.formAcceptCharset),addParamChar=/\?/.test(options.url)?"&":"?","DELETE"===options.type?(options.url=options.url+addParamChar+"_method=DELETE",options.type="POST"):"PUT"===options.type?(options.url=options.url+addParamChar+"_method=PUT",options.type="POST"):"PATCH"===options.type&&(options.url=options.url+addParamChar+"_method=PATCH",options.type="POST"),counter+=1,iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{if(response=iframe.contents(),!response.length||!response[0].firstChild)throw new Error}catch(e){response=void 0}completeCallback(200,"success",{iframe:response}),$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form),window.setTimeout(function(){form.remove()},0)}),form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type),options.formData&&$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)}),options.fileInput&&options.fileInput.length&&"POST"===options.type&&(fileInputClones=options.fileInput.clone(),options.fileInput.after(function(index){return fileInputClones[index]}),options.paramName&&options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)}),form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),options.fileInput.removeAttr("form")),form.submit(),fileInputClones&&fileInputClones.length&&options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")).attr("form",clone.attr("form")),clone.replaceWith(input)})}),form.append(iframe).appendTo(document.body)},abort:function(){iframe&&iframe.unbind("load").prop("src",initialIframeSrc),form&&form.remove()}}}}),$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){"use strict";window.XDomainRequest&&!$.support.cors&&$.ajaxTransport(function(s){if(s.crossDomain&&s.async){s.timeout&&(s.xdrTimeout=s.timeout,delete s.timeout);var xdr;return{send:function(headers,completeCallback){function callback(status,statusText,responses,responseHeaders){xdr.onload=xdr.onerror=xdr.ontimeout=$.noop,xdr=null,completeCallback(status,statusText,responses,responseHeaders)}var addParamChar=/\?/.test(s.url)?"&":"?";xdr=new XDomainRequest,"DELETE"===s.type?(s.url=s.url+addParamChar+"_method=DELETE",s.type="POST"):"PUT"===s.type?(s.url=s.url+addParamChar+"_method=PUT",s.type="POST"):"PATCH"===s.type&&(s.url=s.url+addParamChar+"_method=PATCH",s.type="POST"),xdr.open(s.type,s.url),xdr.onload=function(){callback(200,"OK",{text:xdr.responseText},"Content-Type: "+xdr.contentType)},xdr.onerror=function(){callback(404,"Not Found")},s.xdrTimeout&&(xdr.ontimeout=function(){callback(0,"timeout")},xdr.timeout=s.xdrTimeout),xdr.send(s.hasContent&&s.data||null)},abort:function(){xdr&&(xdr.onerror=$.noop(),xdr.abort())}}}})})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2),__webpack_require__(64)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function($){"use strict";function getDragHandler(type){var isDragOver="dragover"===type;return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;dataTransfer&&$.inArray("Files",dataTransfer.types)!==-1&&this._trigger(type,$.Event(type,{delegatedEvent:e}))!==!1&&(e.preventDefault(),isDragOver&&(dataTransfer.dropEffect="copy"))}}$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled")),$.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),$.support.xhrFormDataFileUpload=!!window.FormData,$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){return message=this.messages[message]||message.toString(),context&&$.each(context,function(key,value){message=message.replace("{"+key+"}",value)}),message},formData:function(form){return form.serializeArray()},add:function(e,data){return!e.isDefaultPrevented()&&void((data.autoUpload||data.autoUpload!==!1&&$(this).fileupload("option","autoUpload"))&&data.process().done(function(){data.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;return(!this.bitrate||!interval||timeDiff>interval)&&(this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8,this.loaded=loaded,this.timestamp=now),this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;return"function"===$.type(options.formData)?options.formData(options.form):$.isArray(options.formData)?options.formData:"object"===$.type(options.formData)?(formData=[],$.each(options.formData,function(name,value){formData.push({name:name,value:value})}),formData):[]},_getTotal:function(files){var total=0;return $.each(files,function(index,file){total+=file.size||1}),total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};obj._progress?$.extend(obj._progress,progress):obj._progress=progress},_initResponseObject:function(obj){var prop;if(obj._response)for(prop in obj._response)obj._response.hasOwnProperty(prop)&&delete obj._response[prop];else obj._response={}},_onProgress:function(e,data){if(e.lengthComputable){var loaded,now=Date.now?Date.now():(new Date).getTime();if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total)return;data._time=now,loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0),this._progress.loaded+=loaded-data._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval),data._progress.loaded=data.loaded=loaded,data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval),this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data),this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();xhr.upload&&($(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable,e.loaded=oe.loaded,e.total=oe.total,that._onProgress(e,options)}),options.xhr=function(){return xhr})},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var formData,that=this,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName="array"===$.type(options.paramName)?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers),options.contentRange&&(options.headers["Content-Range"]=options.contentRange),multipart&&!options.blob&&this._isInstanceOf("File",file)||(options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'),multipart?$.support.xhrFormDataFileUpload&&(options.postMessage?(formData=this._getFormData(options),options.blob?formData.push({name:paramName,value:options.blob}):$.each(options.files,function(index,file){formData.push({name:"array"===$.type(options.paramName)&&options.paramName[index]||paramName,value:file})})):(that._isInstanceOf("FormData",options.formData)?formData=options.formData:(formData=new FormData,$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})),options.blob?formData.append(paramName,options.blob,file.name):$.each(options.files,function(index,file){(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file))&&formData.append("array"===$.type(options.paramName)&&options.paramName[index]||paramName,file,file.uploadName||file.name)})),options.data=formData):(options.contentType=file.type||"application/octet-stream",options.data=options.blob||file),options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||""),options.formData=this._getFormData(options),options.redirect&&targetHost&&targetHost!==location.host&&options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})},_initDataSettings:function(options){this._isXHRUpload(options)?(this._chunkedUpload(options,!0)||(options.data||this._initXHRData(options),this._initProgressListener(options)),options.postMessage&&(options.dataType="postmessage "+(options.dataType||""))):this._initIframeSettings(options)},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;return paramName?$.isArray(paramName)||(paramName=[paramName]):(paramName=[],fileInput.each(function(){for(var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;i;)paramName.push(name),i-=1}),paramName.length||(paramName=[fileInput.prop("name")||"files[]"])),paramName},_initFormSettings:function(options){options.form&&options.form.length||(options.form=$(options.fileInput.prop("form")),options.form.length||(options.form=$(this.options.fileInput.prop("form")))),options.paramName=this._getParamName(options),options.url||(options.url=options.form.prop("action")||location.href),options.type=(options.type||"string"===$.type(options.form.prop("method"))&&options.form.prop("method")||"").toUpperCase(),"POST"!==options.type&&"PUT"!==options.type&&"PATCH"!==options.type&&(options.type="POST"),options.formAcceptCharset||(options.formAcceptCharset=options.form.attr("accept-charset"))},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);return this._initFormSettings(options),this._initDataSettings(options),options},_getDeferredState:function(deferred){return deferred.state?deferred.state():deferred.isResolved()?"resolved":deferred.isRejected()?"rejected":"pending"},_enhancePromise:function(promise){return promise.success=promise.done,promise.error=promise.fail,promise.complete=promise.always,promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();return context=context||this.options.context||promise,resolveOrReject===!0?dfd.resolveWith(context,args):resolveOrReject===!1&&dfd.rejectWith(context,args),promise.abort=dfd.promise,this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){return(resolveFunc||rejectFunc)&&(data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).then(function(){return data.errorThrown?$.Deferred().rejectWith(that,[data]).promise():getPromise(arguments)}).then(resolveFunc,rejectFunc)),this._processQueue||getPromise([this])},data.submit=function(){return"pending"!==this.state()&&(data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==!1&&that._onSend(e,this)),this.jqXHR||that._getXHRPromise()},data.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",that._trigger("fail",null,this),that._getXHRPromise(!1))},data.state=function(){return this.jqXHR?that._getDeferredState(this.jqXHR):this._processQueue?that._getDeferredState(this._processQueue):void 0},data.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===that._getDeferredState(this._processQueue)},data.progress=function(){return this._progress},data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var jqXHR,upload,that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise();return!(!(this._isXHRUpload(options)&&slice&&(ub||mcs<fs))||options.data)&&(!!testOnly||(ub>=fs?(file.error=options.i18n("uploadedBytes"),this._getXHRPromise(!1,options.context,[null,"error",file.error])):(upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs,that._initXHRData(o),that._initProgressListener(o),jqXHR=(that._trigger("chunksend",null,o)!==!1&&$.ajax(o)||that._getXHRPromise(!1,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize,currentLoaded+o.chunkSize-o._progress.loaded&&that._onProgress($.Event("progress",{lengthComputable:!0,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o),options.uploadedBytes=o.uploadedBytes=ub,o.result=result,o.textStatus=textStatus,o.jqXHR=jqXHR,that._trigger("chunkdone",null,o),that._trigger("chunkalways",null,o),ub<fs?upload():dfd.resolveWith(o.context,[result,textStatus,jqXHR])}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR,o.textStatus=textStatus,o.errorThrown=errorThrown,that._trigger("chunkfail",null,o),that._trigger("chunkalways",null,o),dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})},this._enhancePromise(promise),promise.abort=function(){return jqXHR.abort()},upload(),promise)))},_beforeSend:function(e,data){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(data),this._initProgressObject(data),data._progress.loaded=data.loaded=data.uploadedBytes||0,data._progress.total=data.total=this._getTotal(data.files)||1,data._progress.bitrate=data.bitrate=0,this._active+=1,this._progress.loaded+=data.loaded,this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;options._progress.loaded<total&&this._onProgress($.Event("progress",{lengthComputable:!0,loaded:total,total:total}),options),response.result=options.result=result,response.textStatus=options.textStatus=textStatus,response.jqXHR=options.jqXHR=jqXHR,this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;options.recalculateProgress&&(this._progress.loaded-=options._progress.loaded,this._progress.total-=options._progress.total),response.jqXHR=options.jqXHR=jqXHR,response.textStatus=options.textStatus=textStatus,response.errorThrown=options.errorThrown=errorThrown,this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){data.submit||this._addConvenienceMethods(e,data);var jqXHR,aborted,slot,pipe,that=this,options=that._getAJAXSettings(data),send=function(){return that._sending+=1,options._bitrateTimer=new that._BitrateTimer,jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===!1)&&that._getXHRPromise(!1,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){if(that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options),that._sending-=1,that._active-=1,options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending)for(var nextSlot=that._slots.shift();nextSlot;){if("pending"===that._getDeferredState(nextSlot)){nextSlot.resolve();break}nextSlot=that._slots.shift()}0===that._active&&that._trigger("stop")})};return this._beforeSend(e,options),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(slot=$.Deferred(),this._slots.push(slot),pipe=slot.then(send)):(this._sequence=this._sequence.then(send,send),pipe=this._sequence),pipe.abort=function(){return aborted=[void 0,"abort","abort"],jqXHR?jqXHR.abort():(slot&&slot.rejectWith(options.context,aborted),send())},this._enhancePromise(pipe)):send()},_onAdd:function(e,data){var paramNameSet,paramNameSlice,fileSet,i,that=this,result=!0,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),j=0;if(!filesLength)return!1;if(limitSize&&void 0===files[0].size&&(limitSize=void 0),(options.singleFileUploads||limit||limitSize)&&this._isXHRUpload(options))if(options.singleFileUploads||limitSize||!limit)if(!options.singleFileUploads&&limitSize)for(fileSet=[],paramNameSet=[],i=0;i<filesLength;i+=1)batchSize+=files[i].size+overhead,(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize||limit&&i+1-j>=limit)&&(fileSet.push(files.slice(j,i+1)),paramNameSlice=paramName.slice(j,i+1),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice),j=i+1,batchSize=0);else paramNameSet=paramName;else for(fileSet=[],paramNameSet=[],i=0;i<filesLength;i+=limit)fileSet.push(files.slice(i,i+limit)),paramNameSlice=paramName.slice(i,i+limit),paramNameSlice.length||(paramNameSlice=paramName),paramNameSet.push(paramNameSlice);else fileSet=[files],paramNameSet=[paramName];return data.originalFiles=files,$.each(fileSet||files,function(index,element){var newData=$.extend({},data);return newData.files=fileSet?element:[element],newData.paramName=paramNameSet[index],that._initResponseObject(newData),that._initProgressObject(newData),that._addConvenienceMethods(e,newData),result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData)}),result},_replaceFileInput:function(data){var input=data.fileInput,inputClone=input.clone(!0),restoreFocus=input.is(document.activeElement);data.fileInputClone=inputClone,$("<form></form>").append(inputClone)[0].reset(),input.after(inputClone).detach(),restoreFocus&&inputClone.focus(),$.cleanData(input.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(i,el){return el===input[0]?inputClone[0]:el}),input[0]===this.element[0]&&(this.element=inputClone)},_handleFileTreeEntry:function(entry,path){var dirReader,that=this,dfd=$.Deferred(),errorHandler=function(e){e&&!e.entry&&(e.entry=entry),dfd.resolve([e])},successHandler=function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},readEntries=function(){dirReader.readEntries(function(results){results.length?(entries=entries.concat(results),readEntries()):successHandler(entries)},errorHandler)},entries=[];return path=path||"",entry.isFile?entry._file?(entry._file.relativePath=path,
dfd.resolve(entry._file)):entry.file(function(file){file.relativePath=path,dfd.resolve(file)},errorHandler):entry.isDirectory?(dirReader=entry.createReader(),readEntries()):dfd.resolve([]),dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;return items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)?this._handleFileTreeEntries($.map(items,function(item){var entry;return item.webkitGetAsEntry?(entry=item.webkitGetAsEntry(),entry&&(entry._file=item.getAsFile()),entry):item.getAsEntry()})):$.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var files,value,entries=fileInput.prop("webkitEntries")||fileInput.prop("entries");if(entries&&entries.length)return this._handleFileTreeEntries(entries);if(files=$.makeArray(fileInput.prop("files")),files.length)void 0===files[0].name&&files[0].fileName&&$.each(files,function(index,file){file.name=file.fileName,file.size=file.fileSize});else{if(value=fileInput.prop("value"),!value)return $.Deferred().resolve([]).promise();files=[{name:value.replace(/^.*\\/,"")}]}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){return fileInput instanceof $&&1!==fileInput.length?$.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(fileInput)},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that.options.replaceFileInput&&that._replaceFileInput(data),that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};items&&items.length&&($.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();file&&data.files.push(file)}),this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==!1&&this._onAdd(e,data))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};dataTransfer&&dataTransfer.files&&dataTransfer.files.length&&(e.preventDefault(),this._getDroppedFiles(dataTransfer).always(function(files){data.files=files,that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==!1&&that._onAdd(e,data)}))},_onDragOver:getDragHandler("dragover"),_onDragEnter:getDragHandler("dragenter"),_onDragLeave:getDragHandler("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),$.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=$.inArray(key,this._specialOptions)!==-1;reinit&&this._destroyEventHandlers(),this._super(key,value),reinit&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var options=this.options;void 0===options.fileInput?options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):options.fileInput instanceof $||(options.fileInput=$(options.fileInput)),options.dropZone instanceof $||(options.dropZone=$(options.dropZone)),options.pasteZone instanceof $||(options.pasteZone=$(options.pasteZone))},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();return parts.shift(),new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return"url"!==key&&"string"===$.type(value)&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options,data=this.element.data();$.each(this.element[0].attributes,function(index,attr){var value,key=attr.name.toLowerCase();/^data-/.test(key)&&(key=key.slice(5).replace(/-[a-z]/g,function(str){return str.charAt(1).toUpperCase()}),value=data[key],that._isRegExpOption(key,value)&&(value=that._getRegExp(value)),options[key]=value)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;data&&!this.options.disabled&&(data.fileInput&&!data.files?this._getFileInputFiles(data.fileInput).always(function(files){data.files=files,that._onAdd(null,data)}):(data.files=$.makeArray(data.files),this._onAdd(null,data)))},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var jqXHR,aborted,that=this,dfd=$.Deferred(),promise=dfd.promise();return promise.abort=function(){return aborted=!0,jqXHR?jqXHR.abort():(dfd.reject(null,"abort","abort"),promise)},this._getFileInputFiles(data.fileInput).always(function(files){if(!aborted){if(!files.length)return void dfd.reject();data.files=files,jqXHR=that._onSend(null,data),jqXHR.then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})}}),this._enhancePromise(promise)}if(data.files=$.makeArray(data.files),data.files.length)return this._onSend(null,data)}return this._getXHRPromise(!1,data&&data.context)}})})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_CRateGenerator=__webpack_require__(69),_CRateGenerator2=_interopRequireDefault(_CRateGenerator),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Rate)",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(i,e){_formStore2["default"].dispatch({type:"setRate",id:this.props.data.id,value:i})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_content"},_addons2["default"].createElement(_CRateGenerator2["default"],{data:data,tipsStyle:tipsStyle,value:fill,onChange:this.handleChange,isMobile:isMobile}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_MGColor=(_interopRequireDefault(_formStore),__webpack_require__(35)),_MGColor2=_interopRequireDefault(_MGColor),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(RateGenerator)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return{hover:0}},handleOnMouseOver:function(i,e){this.setState({hover:i})},handleOnMouseOut:function(i,e){this.setState({hover:0})},handleClick:function(i,e){this.props.onChange&&this.props.onChange(i,e)},renderRateItemMobile:function(info){var _props$data=this.props.data,rateMax=_props$data.rateMax,rateIcon=_props$data.rateIcon,selected=this.props.value?+this.props.value:0,isHeat=4==rateIcon,_maxRateWidth=Math.min(10,rateMax),_classNames={fbc_rateItem:!isHeat,fbc_heatItem:isHeat,selected:info.idx<=selected},_inner=null;if(isHeat){var _heatStyle={};info.idx<=selected&&(_heatStyle.backgroundColor=info.heatColorList[info.idx-1]||"#000"),_inner=_addons2["default"].createElement("span",{className:(0,_classnames2["default"])(_classNames),key:"rateItem"+info.idx},_addons2["default"].createElement("span",{style:_heatStyle}," "))}else _inner=_addons2["default"].createElement("span",{className:"fbc_rateItemBorder"},_addons2["default"].createElement("span",{className:(0,_classnames2["default"])(_classNames,"full-star")}," "));return _addons2["default"].createElement("span",{className:"fbc_rateItemWrapper",key:"rateItem"+info.idx,style:{width:(1/_maxRateWidth*100||20)+"%"},onClick:this.handleClick.bind(this,info.idx)},_inner)},renderRateItem:function(info){var hover=this.state.hover,_props$data2=this.props.data,rateMax=_props$data2.rateMax,rateIcon=_props$data2.rateIcon,isAllowHalf=_props$data2.isAllowHalf,selected=this.props.value?+this.props.value:0,isStar=1==rateIcon||void 0==rateIcon,isHeat=4==rateIcon;hover>0&&!this.props.isMobile&&(selected=hover);var _classNames={fbc_rateItem:!isHeat,fbc_heatItem:isHeat,selected:info.idx<=selected},_propsEvent={onMouseOver:this.handleOnMouseOver.bind(this,info.idx),onMouseOut:this.handleOnMouseOut.bind(this,info.idx),onClick:this.handleClick.bind(this,info.idx)};if(isStar){var _extClassName={selected:isAllowHalf?info.idx-.5<=selected:info.idx<=selected},_extPropsEvent=_lodash2["default"].assign({},_propsEvent);return isAllowHalf&&(_extPropsEvent.onMouseOver=this.handleOnMouseOver.bind(this,info.idx-.5),_extPropsEvent.onMouseOut=this.handleOnMouseOut.bind(this,info.idx-.5),_extPropsEvent.onClick=this.handleClick.bind(this,info.idx-.5)),_addons2["default"].createElement("div",{className:"fbc_rateItemWrapper",key:"rateItem"+info.idx},_addons2["default"].createElement("span",_extends({className:(0,_classnames2["default"])(_classNames,"left-half",_extClassName)},_extPropsEvent,{key:"rateItem"+info.idx-.5})," "),_addons2["default"].createElement("span",_extends({className:(0,_classnames2["default"])(_classNames,"right-half")},_propsEvent,{key:"rateItem"+info.idx})," "))}if(isHeat){var _heatStyle={};return info.idx<=selected&&(_heatStyle.backgroundColor=info.heatColorList[info.idx-1]||"#000"),_addons2["default"].createElement("span",_extends({className:(0,_classnames2["default"])(_classNames)},_propsEvent,{key:"rateItem"+info.idx,style:{width:(1/rateMax*100||20)+"%"}}),_addons2["default"].createElement("span",{style:_heatStyle}," "))}return _addons2["default"].createElement("span",_extends({className:(0,_classnames2["default"])("fbc_rateItemWrapper",_classNames)},_propsEvent,{key:"rateItem"+info.idx})," ")},render:function(){var _props=this.props,data=_props.data,tipsStyle=_props.tipsStyle,isMobile=_props.isMobile,rateIcon=data.rateIcon,rateMax=data.rateMax,heatBarColorForm=data.heatBarColorForm,heatBarColorTo=data.heatBarColorTo,isShowTips=data.isShowTips,rateTipsLeft=data.rateTipsLeft,rateTipsMiddle=data.rateTipsMiddle,rateTipsRight=data.rateTipsRight,isStar=1==rateIcon||void 0==rateIcon,isHeat=4==rateIcon,_widthPre=isMobile?10:data.cpWidth||8,_rateClass={fbc_rateGroup:!0,star:isStar,heart:2==rateIcon,thumb:3==rateIcon,heatBar:isHeat,fbc_widthCp:isHeat},heatColor=[];isHeat&&(heatColor=_MGColor2["default"].gradientColor(heatBarColorForm||"#f5d964",heatBarColorTo||"#e94c3c",rateMax||5));for(var _rateList=[],i=0;i<(rateMax||5);i++)_rateList.push((isMobile?this.renderRateItemMobile:this.renderRateItem)({idx:i+1,heatColorList:heatColor}));var _rateContent=_addons2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_rateContent:!isHeat,fbc_heatBar:isHeat}),key:"rateContent"},_rateList,_addons2["default"].createElement("div",{className:"clearB"})),_rateTips=null;isShowTips&&(rateTipsLeft||rateTipsMiddle||rateTipsRight)&&(_rateTips=_addons2["default"].createElement("p",{className:"fbc_rateTips",key:"rateTips",style:tipsStyle},_addons2["default"].createElement("span",{className:"fbc_rateTipsText left"},rateTipsLeft),_addons2["default"].createElement("span",{className:"fbc_rateTipsText middle"},rateTipsMiddle),_addons2["default"].createElement("span",{className:"fbc_rateTipsText right"},rateTipsRight)));var _rateMain=[_rateTips,_rateContent];return 2==data.tipsPosition&&(_rateMain=[_rateContent,_rateTips]),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(_rateClass),style:isHeat||isMobile?{width:10*_widthPre+"%"}:{}},_rateMain)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(49),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_CRateGenerator=__webpack_require__(69),_CRateGenerator2=_interopRequireDefault(_CRateGenerator),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Tabular)",mixins:[pureRenderMixin,_mixins2["default"]],componentWillMount:function(){this.renderItems=this.tabularItemFactory()},handleChange:function(qId,opId,d){var data=this.props.data,_d={type:"setTabularValue",id:data.id,componentType:data.tabularType?+data.tabularType:1,qId:qId};switch(+data.tabularType){case 3:_d.value=d.target.value;break;case 4:var _value=this.props.fill&&this.props.fill[qId];_value===d?_d.value=null:_d.value=d;break;case 1:case 2:default:_d.value=opId}_formStore2["default"].dispatch(_d)},tabularItemFactory:function(){var data=this.props.data,isMobile=this.props.isMobile,self=this,isCheckbox=!1,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,inputStyle=_formStyle.inputStyle,textAreaStyle=_formStyle.textAreaStyle,tipsStyle=_formStyle.tipsStyle,_ret=function(){switch(+data.tabularType){case 3:return{v:function(qIdInfo){var fill=self.props.fill,Component="input",_style=inputStyle;1==data.isAllowMulti&&(Component="textarea",_style=textAreaStyle);var _value=fill&&fill[qIdInfo];return _value||(_value=""),_addons2["default"].createElement("td",{key:"td",className:"fbc_tContent"},_addons2["default"].createElement(_FCTextBox2["default"],{component:Component,type:"text",className:"fbc_tabularInput "+Component,style:_style,onChange:this.handleChange.bind(self,qIdInfo,null),value:_value}))}};case 4:return{v:function(qIdInfo){var fill=this.props.fill,_value=fill&&fill[qIdInfo];_value||(_value=0);var _d=self.props.data;return _addons2["default"].createElement("td",{key:"td",className:"fbc_tContent"},_addons2["default"].createElement(_CRateGenerator2["default"],{data:_d,tipsStyle:tipsStyle,isMobile:isMobile,value:_value,onChange:this.handleChange.bind(self,qIdInfo,null)}))}};case 2:isCheckbox=!0;case 1:default:var CommonDom=_svgBasicComponent.CommonRadio;return isCheckbox&&(CommonDom=_svgBasicComponent.CommonCheckbox),{v:function(qIdInfo){var _this=this,_res=[],fill=self.props.fill;return _lodash2["default"].forEach(data.options,function(option,idx){var _sId=idx;data.ql2sMapping&&data.ql2sMapping[qIdInfo]&&data.ql2sMapping[qIdInfo][option.id]&&(_sId=data.ql2sMapping[qIdInfo][option.id]);var _className={fbc_optionVal:!0,radio:!isCheckbox,checkbox:isCheckbox,checked:fill&&(fill[qIdInfo]||[]).indexOf(_sId)>-1};_res.push(_addons2["default"].createElement("td",{key:"td"+idx},_addons2["default"].createElement("p",{className:(0,_classnames2["default"])(_className),style:_lodash2["default"].assign({height:optionStyle.minHeight},optionStyle),onClick:_this.handleChange.bind(self,qIdInfo,_sId)},_addons2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:fill&&(fill[qIdInfo]||[]).indexOf(_sId)>-1,style:{paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}))))}),_res}}}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v},render:function(){var _this2=this,_props=this.props,data=_props.data,valid=(_props.fill,_props.valid),componentStyle=_props.componentStyle,questionWidth=data.questionWidth||25,_formStyle2=this.formStyle(),optionStyle=_formStyle2.optionStyle,_tHeader=null;!function(){switch(+data.tabularType){case 3:case 4:_tHeader=_addons2["default"].createElement("th",{key:"th",style:{width:100-questionWidth+"%"}},_addons2["default"].createElement("p",{className:"fbc_tabularTitle",style:optionStyle},data.tipText||_config.lang.cFillingPlaceholder));break;default:var optionLength=data.options.length;_tHeader=_lodash2["default"].map(data.options,function(option,idx){return _addons2["default"].createElement("th",{key:"th"+idx,style:{width:(100-questionWidth)/optionLength+"%"}},_addons2["default"].createElement("p",{className:"fbc_tabularTitle",style:optionStyle},option.value))})}}();var _tBody=_lodash2["default"].map(data.questions,function(question,idx){return _addons2["default"].createElement("tr",{key:"tr"+idx},_addons2["default"].createElement("td",{key:"trTitle",className:"fbc_tTitleLeft"},_addons2["default"].createElement("p",{className:"fbc_tabularTitle",style:optionStyle},question.value)),_this2.renderItems(question.id))});return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_content"},_addons2["default"].createElement("table",{className:"fbc_tabular"},_addons2["default"].createElement("tbody",null,_addons2["default"].createElement("tr",null,_addons2["default"].createElement("th",{style:{width:questionWidth+"%"}}," "),_tHeader),_tBody))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(49),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_CRateGenerator=__webpack_require__(69),_CRateGenerator2=_interopRequireDefault(_CRateGenerator),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Tabular.Mobile)",mixins:[pureRenderMixin,_mixins2["default"]],componentWillMount:function(){this.renderItems=this.tabularItemFactory()},handleChange:function(qId,opId,d){var data=this.props.data,_d={type:"setTabularValue",id:data.id,componentType:data.tabularType?+data.tabularType:1,qId:qId};switch(+data.tabularType){case 3:_d.value=d.target.value;break;case 4:var _value=this.props.fill&&this.props.fill[qId];_value===d?_d.value=null:_d.value=d;break;case 1:case 2:default:_d.value=opId}_formStore2["default"].dispatch(_d)},tabularItemFactory:function(){var _props=this.props,data=_props.data,isMobile=_props.isMobile,self=this,isCheckbox=!1,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,inputStyle=_formStyle.inputStyle,textAreaStyle=_formStyle.textAreaStyle,tipsStyle=_formStyle.tipsStyle,_ret=function(){switch(+data.tabularType){case 3:return{v:function(qId,inputTip){var fill=self.props.fill,Component="input",_style=inputStyle;1==data.isAllowMulti&&(Component="textarea",_style=textAreaStyle);var _value=fill&&fill[qId];return _value||(_value=""),_addons2["default"].createElement("div",{className:"fbc_tContent",key:"que"},_addons2["default"].createElement(_FCTextBox2["default"],{component:Component,type:"text",className:"fbc_tabularInput "+Component,placeholder:inputTip,style:_style,onChange:this.handleChange.bind(self,qId,null),value:_value}))}};case 4:return{v:function(qId){var fill=this.props.fill,_value=fill&&fill[qId];_value||(_value=0);var _d=self.props.data;return _addons2["default"].createElement("div",{key:"que",className:"fbc_tContent"},_addons2["default"].createElement(_CRateGenerator2["default"],{data:_d,tipsStyle:tipsStyle,isMobile:isMobile,value:_value,onChange:this.handleChange.bind(self,qId,null)}))}};case 2:isCheckbox=!0;case 1:default:var CommonDom=_svgBasicComponent.CommonRadio;return isCheckbox&&(CommonDom=_svgBasicComponent.CommonCheckbox),{v:function(qId,options){var _this=this,_items=[],fill=self.props.fill;return _lodash2["default"].forEach(options,function(option,idx){var _sId=idx;data.ql2sMapping&&data.ql2sMapping[qId]&&data.ql2sMapping[qId][option.id]&&(_sId=data.ql2sMapping[qId][option.id]);var _checked=fill&&(fill[qId]||[]).indexOf(_sId)>-1,_className={radio:!isCheckbox,checkbox:isCheckbox,checked:_checked};_items.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_optionsLi",_className),key:"item"+idx,style:_lodash2["default"].assign({height:optionStyle.minHeight},optionStyle),onClick:_this.handleChange.bind(self,qId,_sId)},_addons2["default"].createElement("p",{className:"fbc_optionVal"},_addons2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_checked,style:{paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}),_addons2["default"].createElement("span",{className:"fbc_optionLabel"},option.value))))}),_addons2["default"].createElement("ul",null,_items,_addons2["default"].createElement("li",{className:"clearB"}))}}}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v},render:function(){var _this2=this,_props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),componentStyle=_props2.componentStyle,_formStyle2=this.formStyle(),optionStyle=_formStyle2.optionStyle,_subInfo=null;switch(+data.tabularType){case 3:case 4:_subInfo=data.tipText||_config.lang.cFillingPlaceholder;break;default:_subInfo=data.options}var _tBody=_lodash2["default"].map(data.questions,function(question,idx){return _addons2["default"].createElement("div",{className:"fbc_tabularQuestion",key:"ques"+idx},_addons2["default"].createElement("p",{className:"fbc_tabularTitle",style:_lodash2["default"].omit(optionStyle,"minHeight")},question.value),_this2.renderItems(question.id,_subInfo))});return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_content"},_tBody))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}function inject(connect,status,sourceId){return{connectDragSource:connect.dragSource(),isDragging:status.isDragging}}function collect(connect,status,targetId){return{connectDropTarget:connect.dropTarget(),isDragging:status.isDragging(),hover:status.isOverTarget(targetId)}}function generatorRank(){return(0,_Lego.bindContext)(_Lego.eventCore)(Rank)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=generatorRank;var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_Lego=__webpack_require__(73),_FormGeneratorUtil=__webpack_require__(45),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,_isMove=!1,events={beginDrag:function(props,status,component){props.setPosition&&props.setPosition([0,0]),_isMove=!1},canDrag:function(props,status,sourceId){return"rankDrag"===status.getSourceType(sourceId)},dragging:function(props,status){var offset=status.getDifferenceFromInitialOffset(),_ref=offset||{x:0,y:0},x=_ref.x,y=_ref.y;_isMove=!0,props.setPosition&&props.setPosition([x,y])},endDrag:function(props,status,component){props.runDispatch&&props.runDispatch(),props.setPosition&&props.setPosition([0,0],!0)}},RankItem=_addons2["default"].createClass({displayName:"RankItem",mixins:[pureRenderMixin],contextTypes:{dragDropManager:_addons2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.status=this.manager.getStatus(),{}},handleClick:function(e){return _isMove?void(_isMove=!1):void(this.props.onClick&&this.props.onClick(e))},handleDragBarClick:function(e){this.props.dragging||this.props.onDragBarClick&&this.props.onDragBarClick(e)},render:function(){var _props=this.props,connectDragSource=_props.connectDragSource,value=_props.value,dragBar=_props.dragBar,optionStyle=_props.optionStyle,num=_props.num,position=_props.position,dragging=_props.dragging,onDragBarClick=_props.onDragBarClick;return connectDragSource(_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_roItem",{dragging:dragging}),key:"rOpt"+num,style:_lodash2["default"].assign({position:"relative",left:position[0],top:position[1]},optionStyle),onClick:this.handleClick},_addons2["default"].createElement("p",{className:"fbc_roInfo"},value),dragBar?_addons2["default"].createElement("a",{className:"fbc_rsDragBar iconfont",onClick:onDragBarClick},String.fromCharCode(58982)):_addons2["default"].createElement("a",{className:"fbc_roDragBar"})))}}),DragRankItem=(0,_Lego.bindDragSource)("rankDrag",events,inject)(RankItem),rankTarget={canDrop:function(){return!0},drop:function(props){props.active&&props.setDispatch({type:"setRank",id:props.data.id,num:props.num,value:props.active})}},_answerItem=_addons2["default"].createClass({displayName:"_answerItem",mixins:[pureRenderMixin],handleFilledPosition:function(){for(var _props2=this.props,fill=_props2.fill,num=_props2.num,setPosition=_props2.setPosition,_len=arguments.length,info=Array(_len),_key=0;_key<_len;_key++)info[_key]=arguments[_key];fill&&fill[num]&&setPosition&&setPosition.apply(void 0,[fill[num]].concat(info)),this.oldId&&this.oldId!==fill[num]&&setPosition&&setPosition.apply(void 0,[this.oldId].concat(info)),this.oldId=fill[num]},handleRemoveItem:function(){var props=this.props,active=props.fill[props.num];_formStore2["default"].dispatch({type:"removeRank",id:props.data.id,value:active});var newHidden=props.hidden.slice(),idx=newHidden.indexOf(active);newHidden.splice(idx,1),props.handleHiddenItems(newHidden)},render:function(){var _props3=this.props,connectDropTarget=_props3.connectDropTarget,hover=_props3.hover,data=_props3.data,fill=_props3.fill,num=_props3.num,optionStyle=_props3.optionStyle,active=_props3.active,position=_props3.position,runDispatch=_props3.runDispatch,answer="ã€€";if(fill&&fill[num]){var _temp=_lodash2["default"].find(data.options,{sId:fill[num]});answer=_addons2["default"].createElement(DragRankItem,{key:num,value:_temp.value,num:num,dragBar:!0,optionStyle:optionStyle,dragging:active===_temp.sId,position:position[_temp.sId],setPosition:this.handleFilledPosition,onDragBarClick:this.handleRemoveItem,runDispatch:runDispatch})}return connectDropTarget(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_raItem",{fbc_raFilled:fill&&fill[num],fbc_raHovered:hover}),key:"rAns"+num,style:_lodash2["default"].assign({position:"relative"},optionStyle)},_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_raNum")},num+1),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_raGroove")},_addons2["default"].createElement("div",{className:"fbc_ragInfo"},answer)),_addons2["default"].createElement("div",{className:"clearB"})))}}),AnswerItem=(0,_Lego.bindDropTarget)("answer",rankTarget,collect)(_answerItem),SortBoard=_addons2["default"].createClass({displayName:"SortBoard",mixins:[pureRenderMixin],render:function(){for(var rankDigits=this.props.rankDigits,answer=[],i=0;i<rankDigits;i++)answer.push(_addons2["default"].createElement(AnswerItem,_extends({key:i},this.props,{num:i})));return _addons2["default"].createElement("ul",{className:"fbc_rankAnswer"},answer)}}),Rank=_addons2["default"].createClass({displayName:"Component(Rank)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){var _position={};_lodash2["default"].forEach(this.props.data.options,function(data){
_position[data.sId]=[0,0]});var hidden=[];return _lodash2["default"].forEach(this.props.fill,function(info){hidden.push(info)}),{position:_position,active:null,hidden:hidden}},componentWillUpdate:function(nextProps){var _this=this;this.needUpdateHidden&&!function(){var fill=nextProps.fill,hidden=[];_lodash2["default"].forEach(fill,function(info){hidden.push(info)}),_this.setState({hidden:hidden}),_this.needUpdateHidden=!1}()},handleSetPosition:function(id,value,isEnd){var _this2=this,newData={};newData[id]=value;var newState={position:_lodash2["default"].assign({},this.state.position,newData),active:isEnd?null:id};isEnd&&!function(){var newHiddenOptions=[];_lodash2["default"].forEach(_this2.props.fill,function(info){newHiddenOptions.push(info)}),newState.hidden=newHiddenOptions}(),this.setState(newState)},handleHiddenItems:function(newHidden){this.setState({hidden:newHidden})},handleClickAddRank:function(sid){var props=this.props;_formStore2["default"].dispatch({type:"setNextRank",id:props.data.id,value:sid,total:props.data.trueDigits}),this.needUpdateHidden=!0},handleSetDispatch:function(info){this.dispatchInfo=info},handleRunDispatch:function(){this.dispatchInfo&&(_formStore2["default"].dispatch(this.dispatchInfo),_isMove=!1,this.dispatchInfo=null)},render:function(){for(var _props4=this.props,data=_props4.data,fill=_props4.fill,valid=_props4.valid,componentStyle=_props4.componentStyle,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,tipsStyle=_formStyle.tipsStyle,_length=(data.options||[]).length,rankDigits=data.isLimitDigit?data.rankDigits||_length:_length,_temp=null,options=data.options||[],_options=[],i=0,len=options.length;i<len;i++)_temp=options[i],this.state.hidden.indexOf(_temp.sId)>-1||_options.push(_addons2["default"].createElement(DragRankItem,{key:i,value:(data.isAutoNo?_optionNum(data.autoNo,i+1):"")+_temp.value,num:i,dragBar:!1,optionStyle:optionStyle,dragging:this.state.active===_temp.sId,position:this.state.position[_temp.sId],setPosition:this.handleSetPosition.bind(this,_temp.sId),onClick:this.handleClickAddRank.bind(this,_temp.sId),runDispatch:this.handleRunDispatch}));return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),_addons2["default"].createElement("p",{className:"fbc_tips",style:tipsStyle},_config.lang.cRankTips),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_content"},_addons2["default"].createElement(SortBoard,_extends({fill:fill,rankDigits:rankDigits,optionStyle:optionStyle,data:data},this.state,{setPosition:this.handleSetPosition,handleHiddenItems:this.handleHiddenItems,runDispatch:this.handleRunDispatch,setDispatch:this.handleSetDispatch})),_addons2["default"].createElement("div",{className:"fbc_rankOption"},_options)))}});module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventCore=exports.createDragHelper=exports.bindDragSource=exports.bindDropTarget=exports.bindContext=void 0;var _BindDropTarget=__webpack_require__(74),_BindDropTarget2=_interopRequireDefault(_BindDropTarget),_BindDragSource=__webpack_require__(77),_BindDragSource2=_interopRequireDefault(_BindDragSource),_DnDContext=__webpack_require__(78),_DnDContext2=_interopRequireDefault(_DnDContext),_DragHelper=__webpack_require__(83),_DnDEventMouse=__webpack_require__(84),_DnDEventMouse2=_interopRequireDefault(_DnDEventMouse),eventCore=_DnDEventMouse2["default"];exports.bindContext=_DnDContext2["default"],exports.bindDropTarget=_BindDropTarget2["default"],exports.bindDragSource=_BindDragSource2["default"],exports.createDragHelper=_DragHelper.createDragHelper,exports.eventCore=eventCore},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createTargetConnector(handlerId,eventCore){function ref(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_react2["default"].isValidElement(node)){var nextElement=node;return(0,_dndUtil.cloneWithRef)(nextElement,function(inst){inst&&compositeDisposable.add(new _dndUtil.Disposable(connectorEvent.dropTarget(handlerId,inst.getDOMNode())))})}}var connectorEvent={dropTarget:function(){return eventCore.connectDropTarget.apply(eventCore,arguments)}},compositeDisposable=new _dndUtil.CompositeDisposable;return{connector:{dropTarget:function(){return ref}},disposable:compositeDisposable}}function createTargetEvent(targetEventCallback){var Target=function(){function Target(status){_classCallCheck(this,Target),this.status=status,this.props=null,this.component=null}return _createClass(Target,[{key:"receiveProps",value:function(props){this.props=props}},{key:"receiveComponent",value:function(component){this.component=component}},{key:"canDrop",value:function(){return!!targetEventCallback.canDrop&&targetEventCallback.canDrop(this.props,this.status)}},{key:"hover",value:function(){if(targetEventCallback.hover)return targetEventCallback.hover(this.props,this.status,this.component)}},{key:"blur",value:function(){if(targetEventCallback.blur)return targetEventCallback.blur(this.props,this.status)}},{key:"drop",value:function(binder,targetId){return targetEventCallback.drop?targetEventCallback.drop(this.props,this.status):null}}]),Target}();return function(status){return new Target(status)}}function bindDragSource(type,events,inject){var getType=void 0;getType=_lodash2["default"].isFunction(type)?type:function(){return type};var targetEvent=createTargetEvent(events);return function(Component){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},displayName=Component.displayName||Component.name||"Component";return _react2["default"].createClass({displayName:"DropTarget("+displayName+")",contextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.currentType=null,this.disposable=new _dndUtil.SerialDisposable,this.event=this.manager.getEvent(),this.status=this.manager.getStatus(),this.handler=targetEvent(this.status),this.receiveProps(this.props),this.getCurrentState()},shouldComponentUpdate:function(nextProps,nextState){return!(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||!(0,_dndUtil.shallowEqual)(nextState,this.state)},componentWillReceiveProps:function(nextProps){(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||(this.receiveProps(nextProps),this.handleChange())},componentDidMount:function(){},componentWillUnmount:function(){this.disposable.dispose()},receiveProps:function(props){this.handler.receiveProps(props),this.receiveType(getType(props))},receiveType:function(type){var _this=this;if(type!==this.currentType){this.currentType=type;var _manager$registerTarg=this.manager.registerTarget(this.currentType,this.handler,options),handlerId=_manager$registerTarg.handlerId,unregist=_manager$registerTarg.unregist,unsubscribe=this.manager.subscribeChange(function(){_this.status.getDirtyHandlerId().indexOf(_this.handlerId)>-1&&_this.handleChange()});this.handlerId=handlerId;var _createTargetConnecto=createTargetConnector(this.handlerId,this.event),connector=_createTargetConnecto.connector,disposable=_createTargetConnecto.disposable;this.connector=connector,this.disposable.setDisposable(new _dndUtil.CompositeDisposable(new _dndUtil.Disposable(unsubscribe),new _dndUtil.Disposable(function(){return unregist(_this.handlerId)}),disposable))}},handleChange:function(){var nextState=this.getCurrentState();(0,_dndUtil.shallowEqual)(nextState,this.state)||this.setState(nextState)},getCurrentState:function(){return inject(this.connector,this.status,this.handlerId)},getHandlerId:function(){return this.handlerId},getInstance:function(){return this.componentInstance},handleChildrenRef:function(component){this.componentInstance=component,this.handler.receiveComponent(component)},render:function(){return _react2["default"].createElement(Component,_extends({},this.props,this.state,{ref:this.handleChildrenRef,targetId:this.getHandlerId()}))}})}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=bindDragSource;var _dndUtil=__webpack_require__(75),_react=__webpack_require__(76),_react2=_interopRequireDefault(_react),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function cloneWithRef(element,newRef){var previousRef=element.ref;return(0,_react.cloneElement)(element,{ref:function(instance){newRef(instance),previousRef&&previousRef(instance)}})}function shallowEqual(objA,objB){if(objA===objB)return!0;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var hasOwn=Object.prototype.hasOwnProperty,i=0;i<keysA.length;i++){if(!hasOwn.call(objB,keysA[i])||objA[keysA[i]]!==objB[keysA[i]])return!1;var valA=objA[keysA[i]],valB=objB[keysA[i]];if(valA!==valB)return!1}return!0}function shallowEqualScalar(objA,objB){if(objA===objB)return!0;if("object"!==("undefined"==typeof objA?"undefined":_typeof(objA))||null===objA||"object"!==("undefined"==typeof objB?"undefined":_typeof(objB))||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var hasOwn=Object.prototype.hasOwnProperty,i=0;i<keysA.length;i++){if(!hasOwn.call(objB,keysA[i]))return!1;var valA=objA[keysA[i]],valB=objB[keysA[i]];if(valA!==valB||"object"===("undefined"==typeof valA?"undefined":_typeof(valA))||"object"===("undefined"==typeof valB?"undefined":_typeof(valB)))return!1}return!0}function isDisposable(obj){return Boolean(obj&&"function"==typeof obj.dispose)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerialDisposable=exports.CompositeDisposable=exports.Disposable=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.cloneWithRef=cloneWithRef,exports.shallowEqual=shallowEqual,exports.shallowEqualScalar=shallowEqualScalar;var _react=__webpack_require__(76),_emptyFunc=function(){},Disposable=function(){function Disposable(action){_classCallCheck(this,Disposable),this.action=action||_emptyFunc,this.disposed=!1}return _createClass(Disposable,[{key:"dispose",value:function(){this.disposed||(this.action.call(null),this.disposed=!0)}}]),Disposable}(),CompositeDisposable=function(){function CompositeDisposable(){for(var _len=arguments.length,disposables=Array(_len),_key=0;_key<_len;_key++)disposables[_key]=arguments[_key];_classCallCheck(this,CompositeDisposable),Array.isArray(disposables[0])&&1===disposables.length&&(disposables=disposables[0]),this.disposed=!1,this.disposables=disposables}return _createClass(CompositeDisposable,[{key:"add",value:function(item){this.disposed?item.dispose():this.disposables.push(item)}},{key:"remove",value:function(item){var run=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.disposed)return!1;var indexRemoveItem=this.disposables.indexOf(item);return indexRemoveItem!==-1&&(this.disposables.splice(indexRemoveItem,1),run&&item.dispose(),!0)}},{key:"dispose",value:function(){if(!this.disposed){for(var len=this.disposables.length,currentDisposables=new Array(len),i=0;i<len;i++)currentDisposables[i]=this.disposables[i];this.disposed=!0,this.disposables=[];for(var _i=0;_i<len;_i++)currentDisposables[_i].dispose()}}}]),CompositeDisposable}(),SerialDisposable=function(){function SerialDisposable(){_classCallCheck(this,SerialDisposable),this.disposed=!1,this.current=null}return _createClass(SerialDisposable,[{key:"setDisposable",value:function(){var value=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==value||isDisposable(value)){var disposed=this.disposed,prev=null;disposed||(prev=this.current,this.current=value),prev&&prev.dispose(),disposed&&value&&value.dispose()}}},{key:"getDisposable",value:function(){return this.current}},{key:"dispose",value:function(){if(!this.disposed){this.disposed=!0;var prev=this.current;this.current=null,prev&&prev.dispose()}}}]),SerialDisposable}();exports.Disposable=Disposable,exports.CompositeDisposable=CompositeDisposable,exports.SerialDisposable=SerialDisposable},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(483)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function createSourceConnector(handlerId,eventCore){function ref(){var node=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(_react2["default"].isValidElement(node)){var nextElement=node;return(0,_dndUtil.cloneWithRef)(nextElement,function(inst){inst&&compositeDisposable.add(new _dndUtil.Disposable(connectorEvent.dragSource(handlerId,inst.getDOMNode())))})}}var connectorEvent={dragSource:function(){return eventCore.connectDragSource.apply(eventCore,arguments)}},compositeDisposable=new _dndUtil.CompositeDisposable;return{connector:{dragSource:function(){return ref}},disposable:compositeDisposable}}function createSourceEvent(sourceEventCallback){var Source=function(){function Source(status){_classCallCheck(this,Source),this.status=status,this.props=null,this.component=null}return _createClass(Source,[{key:"receiveProps",value:function(props){this.props=props}},{key:"receiveComponent",value:function(component){this.component=component}},{key:"beginDrag",value:function(){return sourceEventCallback.beginDrag(this.props,this.status,this.component)}},{key:"canDrag",value:function(binder,sourceId){return!sourceEventCallback.beginDrag||sourceEventCallback.canDrag(this.props,this.status,sourceId)}},{key:"dragging",value:function(){if(sourceEventCallback.dragging)return sourceEventCallback.dragging(this.props,this.status)}},{key:"endDrag",value:function(){if(sourceEventCallback.endDrag)return sourceEventCallback.endDrag(this.props,this.status,this.component)}}]),Source}();return function(status){return new Source(status)}}function bindDragSource(type,events,inject){var getType=void 0;getType=_lodash2["default"].isFunction(type)?type:function(){return type};var sourceEvent=createSourceEvent(events);return function(Component){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},displayName=Component.displayName||Component.name||"Component";return _react2["default"].createClass({displayName:"DragSource("+displayName+")",contextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.disposable=new _dndUtil.SerialDisposable,this.event=this.manager.getEvent(),this.status=this.manager.getStatus(),this.handler=sourceEvent(this.status),this.receiveProps(this.props),this.getCurrentState()},shouldComponentUpdate:function(nextProps,nextState){return!(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||!(0,_dndUtil.shallowEqual)(nextState,this.state)},componentWillReceiveProps:function(nextProps){(0,_dndUtil.shallowEqualScalar)(nextProps,this.props)||(this.receiveProps(nextProps),this.handleChange())},componentDidMount:function(){},componentWillUnmount:function(){this.disposable.dispose()},receiveProps:function(props){this.handler.receiveProps(props),this.receiveType(getType(props))},receiveType:function(type){var _this=this;if(type!==this.currentType){this.currentType=type;var _manager$registerSour=this.manager.registerSource(this.currentType,this.handler,options),handlerId=_manager$registerSour.handlerId,unregist=_manager$registerSour.unregist,unsubscribe=this.manager.subscribeChange(function(){_this.status.getDirtyHandlerId().indexOf(_this.handlerId)>-1&&_this.handleChange()});this.handlerId=handlerId;var _createSourceConnecto=createSourceConnector(this.handlerId,this.event),connector=_createSourceConnecto.connector,disposable=_createSourceConnecto.disposable;this.connector=connector,this.disposable.setDisposable(new _dndUtil.CompositeDisposable(new _dndUtil.Disposable(unsubscribe),new _dndUtil.Disposable(function(){return unregist(_this.handlerId)}),disposable))}},handleChange:function(){var nextState=this.getCurrentState();(0,_dndUtil.shallowEqual)(nextState,this.state)||this.setState(nextState)},getCurrentState:function(){return inject(this.connector,this.status,this.handlerId)},getHandlerId:function(){return this.handlerId},getInstance:function(){return this.componentInstance},handleChildrenRef:function(component){this.componentInstance=component,this.handler.receiveComponent(component)},render:function(){return _react2["default"].createElement(Component,_extends({},this.props,this.state,{ref:this.handleChildrenRef,sourceId:this.getHandlerId()}))}})}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=bindDragSource;var _dndUtil=__webpack_require__(75),_react=__webpack_require__(76),_react2=_interopRequireDefault(_react),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function DnDContext(eventCore){var childContext={dragDropManager:new _DnDManager2["default"](eventCore)};return function(Component){var displayName=Component.displayName||Component.name||"Component";return _react2["default"].createClass({displayName:"DnDContext("+displayName+")",childContextTypes:{dragDropManager:_react2["default"].PropTypes.object.isRequired},getInstance:function(){return this.ref.child},getManager:function(){return childContext.dragDropManager},getChildContext:function(){return childContext},render:function(){return _react2["default"].createElement(Component,_extends({},this.props,{ref:"child"}))}})}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports["default"]=DnDContext;var _react=__webpack_require__(76),_react2=_interopRequireDefault(_react),_DnDManager=__webpack_require__(79),_DnDManager2=_interopRequireDefault(_DnDManager);module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getNextId(){return bindUniqueId++,bindUniqueId.toString(36)}function getNextHandlerId(role){return""+role+getNextId()}function _getSourceClientOffset(state){var clientOffset=state.clientOffset,initialClientOffset=state.initialClientOffset,initialSourceClientOffset=state.initialSourceClientOffset;return clientOffset&&initialClientOffset&&initialSourceClientOffset?{x:clientOffset.x+initialSourceClientOffset.x-initialClientOffset.x,y:clientOffset.y+initialSourceClientOffset.y-initialClientOffset.y}:null}function _getDifferenceFromInitialOffset(state){var clientOffset=state.clientOffset,initialClientOffset=state.initialClientOffset;return clientOffset&&initialClientOffset?{x:clientOffset.x-initialClientOffset.x,y:clientOffset.y-initialClientOffset.y}:null}function isTarget(targetId){return"T"===targetId[0]}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_DnD=__webpack_require__(80),_DnD2=_interopRequireDefault(_DnD),_DnD3=__webpack_require__(81),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),bindUniqueId=0,ROLE={dragSource:"S",dropTarget:"T"},DnDBinder=function(){function DnDBinder(store){_classCallCheck(this,DnDBinder),this.store=store,this.types={},this.handlers={},this.options={},this.pinnedSourceId=null,this.isDragging=this.isDragging.bind(this)}return _createClass(DnDBinder,[{key:"register",value:function(role,typeName,eventHandler,options){var id=getNextHandlerId(role);this.types[id]=typeName,this.handlers[id]=eventHandler,this.options[id]=options;var removeCallback=void 0;return role===ROLE.dragSource?(this.store.dispatchProcess({type:_DnD3.ActionType.ADD_SOURCE,sourceId:id}),removeCallback=this.removeSource.bind(this)):role===ROLE.dropTarget&&(this.store.dispatchProcess({type:_DnD3.ActionType.ADD_TARGET,targetId:id}),removeCallback=this.removeTarget.bind(this)),{handlerId:id,unregist:removeCallback}}},{key:"pinSourceId",value:function(sourceId){this.pinnedSourceId=sourceId}},{key:"unpinSourceId",value:function(){this.pinnedSourceId=null}},{key:"removeSource",value:function(sourceId){this.store.dispatchProcess({type:_DnD3.ActionType.REMOVE_SOURCE,sourceId:sourceId}),delete this.handlers[sourceId],delete this.types[sourceId],delete this.options[sourceId]}},{key:"removeTarget",value:function(targetId){this.store.dispatchProcess({type:_DnD3.ActionType.REMOVE_TARGET,sourceId:targetId}),delete this.handlers[targetId],delete this.types[targetId],delete this.options[targetId]}},{key:"canDragSource",value:function(sourceId){if(this.isDragging())return!1;var source=this.getSource(sourceId);return!source.canDrag||source.canDrag(this,sourceId)}},{key:"canDropOnTarget",value:function(targetId){if(!this.isDragging()||this.didDrop())return!1;var target=this.getTarget(targetId);return target.canDrop(this,targetId)}},{key:"getSourceId",value:function(){return this.pinnedSourceId||this.store.getState().sourceId}},{key:"getSource",value:function(sourceId){return this.handlers[sourceId]}},{key:"getTarget",value:function(targetId){return this.handlers[targetId]}},{key:"getHandlers",value:function(){return this.handlers}},{key:"getSourceType",value:function(sourceId){if(!sourceId&&this.pinnedSourceId&&(sourceId=this.pinnedSourceId),sourceId)return this.types[sourceId]}},{key:"getTargetType",value:function(targetId){return this.types[targetId]}},{key:"getSourceOptions",value:function(sourceId){return this.options[sourceId]}},{key:"getTargetOptions",value:function(targetId){return this.options[targetId]}},{key:"isDragging",value:function(){return Boolean(this.store.getState().itemType)}},{key:"didDrop",value:function(){return this.store.getState().didDrop}},{key:"getTargetIds",value:function(){return this.store.getState().targetIds}},{key:"isOverTarget",value:function(targetId){return!!this.isDragging()&&this.getTargetIds().indexOf(targetId)>-1}},{key:"getItemType",value:function(){return this.store.getState().itemType}},{key:"getItem",value:function(){return this.store.getState().item}},{key:"isSourcePublish",value:function(){return this.store.getState().isSourcePublish}},{key:"getDirtyHandlerId",value:function(){return this.store.getState().dirtyHandlerId}},{key:"getInitialClientOffset",value:function(){return this.store.getState().initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().clientOffset}},{key:"getSourceSize",value:function(){return this.store.getState().initialSourceSize}},{key:"getHoldInfo",value:function(){var info=this.store.getState();return info.holdMeta||info.holdCtrl}},{key:"getSourceClientOffset",value:function(){var _store$getState=this.store.getState(),initialSourceClientOffset=_store$getState.initialSourceClientOffset,initialClientOffset=_store$getState.initialClientOffset,clientOffset=_store$getState.clientOffset;return _getSourceClientOffset({initialSourceClientOffset:initialSourceClientOffset,initialClientOffset:initialClientOffset,clientOffset:clientOffset})}},{key:"getDifferenceFromInitialOffset",value:function(){var _store$getState2=this.store.getState(),initialSourceClientOffset=_store$getState2.initialSourceClientOffset,initialClientOffset=_store$getState2.initialClientOffset,clientOffset=_store$getState2.clientOffset;return _getDifferenceFromInitialOffset({initialSourceClientOffset:initialSourceClientOffset,initialClientOffset:initialClientOffset,clientOffset:clientOffset})}}]),DnDBinder}(),DnDManager=function(){function DnDManager(eventCore){_classCallCheck(this,DnDManager),this.store=(0,_DnD2["default"])(),this.binder=new DnDBinder(this.store),this.eventCore=eventCore(this),this.store.addChangeListener(this.handleRefCountChange.bind(this))}return _createClass(DnDManager,[{key:"handleRefCountChange",value:function(){var shouldSetUp=this.store.getState().itemCount>0;shouldSetUp&&!this.isSetUp?(this.eventCore.setup(),this.isSetUp=!0):!shouldSetUp&&this.isSetUp&&(this.eventCore.teardown(),this.isSetUp=!1)}},{key:"subscribeChange",value:function(callback){return this.store.addChangeListener(callback)}},{key:"registerSource",value:function(typeName,eventHandler,options){return this.binder.register(ROLE.dragSource,typeName,eventHandler,options)}},{key:"registerTarget",value:function(typeName,eventHandler,options){return this.binder.register(ROLE.dropTarget,typeName,eventHandler,options)}},{key:"getActions",value:function(){return{beginDrag:this.beginDrag.bind(this),publishDragSource:this.publishDragSource.bind(this),hover:this.hover.bind(this),endDrag:this.endDrag.bind(this),drop:this.drop.bind(this),pressedCtrlKey:this.pressedCtrlKey.bind(this)}}},{key:"getStatus",value:function(){return this.binder}},{key:"getEvent",value:function(){return this.eventCore}},{key:"beginDrag",value:function(sourceIds){for(var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$publishSource=_ref.publishSource,publishSource=void 0===_ref$publishSource||_ref$publishSource,_ref$clientOffset=_ref.clientOffset,clientOffset=void 0===_ref$clientOffset?null:_ref$clientOffset,getSourceClientOffset=_ref.getSourceClientOffset,sourceId=(_ref.holdCtrl,_ref.holdMeta,null),i=sourceIds.length-1;i>=0;i--)if(this.binder.canDragSource(sourceIds[i])){sourceId=sourceIds[i];break}if(null!==sourceId){this.binder.pinSourceId(sourceId);var sourceClientOffset=null,sourceSize=null;if(clientOffset){var sourceOffset=getSourceClientOffset(sourceId);sourceClientOffset={x:sourceOffset.x,y:sourceOffset.y},sourceSize={width:sourceOffset.width,height:sourceOffset.height}}var source=this.binder.getSource(sourceId),item=source.beginDrag(this.binder,sourceId),itemType=this.binder.getSourceType(sourceId);this.store.dispatchProcess({type:_DnD3.ActionType.BEGIN_DRAG,itemType:itemType,item:item,sourceId:sourceId,clientOffset:clientOffset,sourceSize:sourceSize,sourceClientOffset:sourceClientOffset,isSourcePublish:publishSource})}}},{key:"publishDragSource",value:function(){var _ref2=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},holdMeta=_ref2.holdMeta,holdCtrl=_ref2.holdCtrl;if(this.binder.isDragging()){var sourceId=this.binder.getSourceId(),source=this.binder.getSource(sourceId);source.dragging(this.binder,sourceId),this.store.dispatchProcess({type:_DnD3.ActionType.PUBLISH_DRAG_SOURCE,holdMeta:holdMeta,holdCtrl:holdCtrl})}}},{key:"hover",value:function(targetIds){var _this=this,_ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref3$clientOffset=_ref3.clientOffset,clientOffset=void 0===_ref3$clientOffset?null:_ref3$clientOffset;targetIds=targetIds.slice(0);this.binder.getItemType();_lodash2["default"].forEach(targetIds,function(targetId){var target=_this.binder.getTarget(targetId);target.hover(_this.binder,targetId)}),_lodash2["default"].forEach(this.binder.getDirtyHandlerId(),function(handlerId){if(isTarget(handlerId)&&targetIds.indexOf(handlerId)===-1){var target=_this.binder.getTarget(handlerId);target.blur(_this.binder,handlerId)}}),this.store.dispatchProcess({type:_DnD3.ActionType.HOVER,targetIds:targetIds,clientOffset:clientOffset})}},{key:"drop",value:function(){var _this2=this,_ref4=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},holdMeta=_ref4.holdMeta,holdCtrl=_ref4.holdCtrl,targetIds=_lodash2["default"].filter(this.binder.getTargetIds(),function(tgId){return _this2.binder.canDropOnTarget(tgId)});targetIds.reverse(),_lodash2["default"].forEach(targetIds,function(targetId,idx){var target=_this2.binder.getTarget(targetId),dropResult=target.drop(_this2.binder,targetId);_this2.store.dispatchProcess({type:_DnD3.ActionType.DROP,dropResult:dropResult,holdMeta:holdMeta,holdCtrl:holdCtrl})})}},{key:"endDrag",value:function(){var sourceId=this.binder.getSourceId(),source=this.binder.getSource(sourceId);source.endDrag(this.binder,sourceId),this.binder.unpinSourceId(),this.store.dispatchProcess({type:_DnD3.ActionType.END_DRAG})}},{key:"pressedCtrlKey",value:function(){var _this3=this,targetIds=this.binder.getTargetIds().slice(0);this.binder.getItemType();_lodash2["default"].forEach(targetIds,function(targetId){var target=_this3.binder.getTarget(targetId);target.hover(_this3.binder,targetId)}),_lodash2["default"].forEach(this.binder.getDirtyHandlerId(),function(handlerId){if(isTarget(handlerId)&&targetIds.indexOf(handlerId)===-1){
var target=_this3.binder.getTarget(handlerId);target.blur(_this3.binder,handlerId)}})}}]),DnDManager}();exports["default"]=DnDManager,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function areOffsetsEqual(offsetA,offsetB){return offsetA===offsetB||offsetA&&offsetB&&offsetA.x===offsetB.x&&offsetA.y===offsetB.y}function createDnDStore(){return new DnDStore({itemCount:0,itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublish:null,dirtyHandlerId:[],initialSourceClientOffset:null,initialSourceSize:null,initialClientOffset:null,clientOffset:null,holdCtrl:!1,holdMeta:!1})}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=createDnDStore;var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_DnD=__webpack_require__(81),DnDStore=function(){function DnDStore(initState){_classCallCheck(this,DnDStore),this.currentState=initState,this.listeners=[]}return _createClass(DnDStore,[{key:"getState",value:function(){return this.currentState}},{key:"addChangeListener",value:function(callback){this.listeners.push(callback);var isSubscribed=!0,listeners=this.listeners;return function(){if(isSubscribed){isSubscribed=!1;var _idx=listeners.indexOf(callback);listeners.splice(_idx,1)}}}},{key:"updateState",value:function(newState){var _this=this,tempState=_lodash2["default"].assign({},this.currentState,newState||{});this.changeState=Object.keys(newState).filter(function(key){return tempState[key]!==_this.currentState[key]}),this.currentState=tempState}},{key:"dispatchProcess",value:function(action){if(action.type){switch(action.type){case _DnD.ActionType.BEGIN_DRAG:this.updateState({itemType:action.itemType,item:action.item,sourceId:action.sourceId,isSourcePublish:action.isSourcePublish,dropResult:null,didDrop:!1,initialSourceClientOffset:action.sourceClientOffset,initialSourceSize:action.sourceSize,initialClientOffset:action.clientOffset,clientOffset:action.clientOffset,dirtyHandlerId:[],holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.PUBLISH_DRAG_SOURCE:this.updateState({isSourcePublish:!0,holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.DRAGGING:this.updateState({isSourcePublish:!0});break;case _DnD.ActionType.END_DRAG:this.updateState({itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublish:null,targetIds:[],initialSourceClientOffset:null,initialSourceSize:null,initialClientOffset:null,clientOffset:null,dirtyHandlerId:[],holdCtrl:!1,holdMeta:!1});break;case _DnD.ActionType.HOVER:var state=this.getState(),oldTargetIds=state.targetIds,dirtyHandlerId=_lodash2["default"].xor(oldTargetIds,action.targetIds).concat(state.sourceId);this.updateState({targetIds:action.targetIds,dirtyHandlerId:dirtyHandlerId}),areOffsetsEqual(this.currentState.clientOffset,action.clientOffset)||this.updateState({clientOffset:action.clientOffset});break;case _DnD.ActionType.PRESSKEY:this.updateState({holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.DROP:this.updateState({dropResult:action.dropResult,didDrop:!0,targetIds:[],initialSourceClientOffset:null,initialSourceSize:null,initialClientOffset:null,clientOffset:null,holdCtrl:action.holdCtrl,holdMeta:action.holdMeta});break;case _DnD.ActionType.ADD_SOURCE:case _DnD.ActionType.ADD_TARGET:this.updateState({itemCount:this.currentState.itemCount+1});break;case _DnD.ActionType.REMOVE_SOURCE:case _DnD.ActionType.REMOVE_TARGET:this.updateState({itemCount:this.currentState.itemCount-1})}return this.listeners.slice().forEach(function(listener){return listener()}),this.getState()}}}]),DnDStore}();module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ActionType=void 0;var _lodash=__webpack_require__(10),_keyMirror=(_interopRequireDefault(_lodash),__webpack_require__(82)),_keyMirror2=_interopRequireDefault(_keyMirror);exports.ActionType=(0,_keyMirror2["default"])({BEGIN_DRAG:!0,PUBLISH_DRAG_SOURCE:!0,DRAGGING:!0,END_DRAG:!0,HOVER:!0,DROP:!0,PRESSKEY:!0,ADD_SOURCE:!0,ADD_TARGET:!0,REMOVE_SOURCE:!0,REMOVE_TARGET:!0})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(3)(323)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createDragHelper(renderFunc){return _addons2["default"].createClass({mixins:[pureRenderMixin],contextTypes:{dragDropManager:_addons2["default"].PropTypes.object.isRequired},getInitialState:function(){return this.manager=this.context.dragDropManager,this.status=this.manager.getStatus(),this.getCurrentState()},getCurrentState:function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isShown:!1,top:0,left:0,holdCtrl:!1};return state},componentDidMount:function(){this.unsubscribeListener=this.manager.subscribeChange(this.handleOffsetChange)},componentWillUnmount:function(){this.unsubscribeListener()},handleOffsetChange:function(){if(!this.isMounted())return!1;var offset=this.status.getSourceClientOffset(),_ref=offset||{x:0,y:0},x=_ref.x,y=_ref.y;this.setState(this.getCurrentState({isShown:Boolean(this.status.isSourcePublish()),top:Math.round(y),left:Math.round(x),holdCtrl:this.status.getHoldInfo()}))},render:function(){var helperClassName={"lg-dragHelper":!0,isShown:this.state.isShown},extInfo=renderFunc(this.props,this.status);return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])(helperClassName),style:{top:this.state.top,left:this.state.left}},extInfo)}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDragHelper=createDragHelper;var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),pureRenderMixin=_addons2["default"].addons.PureRenderMixin},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getEventClientTouchOffset(e){if(1===e.targetTouches.length)return getEventClientOffset(e.targetTouches[0])}function getEventClientOffset(e){return e.targetTouches?getEventClientTouchOffset(e):{x:e.clientX,y:e.clientY}}function getNodeClientOffset(node){var el=node.nodeType===ELEMENT_NODE?node:node.parentElement;if(!el)return null;var clientRect=el.getBoundingClientRect(),top=void 0,left=void 0,width=void 0,height=void 0;return clientRect&&(top=clientRect.top,left=clientRect.left,width=clientRect.width||clientRect.right-clientRect.left,height=clientRect.height||clientRect.bottom-clientRect.top),{x:left,y:top,width:width,height:height}}function getMoveDistance(start,end){return Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2))}function createEventBackend(manager){return new MouseEventBackend(manager)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports["default"]=createEventBackend;var _jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),ELEMENT_NODE=1,enableMouseEvent="onmousedown"in document.documentElement||"onmousedown"in window,enableTouchEvent="ontouchstart"in document.documentElement||"ontouchstart"in window,isOldBrowser=!window.addEventListener,_mouseDown=!1,_touchDelayTimer=null,_count=0,eventNames={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"},key:{keydown:"keydown",keyup:"keyup"}},MouseEventBackend=function(){function MouseEventBackend(manager){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,MouseEventBackend),this.status=manager.getStatus(),this.actions=manager.getActions(),this.eventList=["key"],enableMouseEvent&&this.eventList.push("mouse"),enableTouchEvent&&this.eventList.push("touch"),this.sourceNodes={},this.targetNodes={},this._mouseClientOffset={},this.handleTopMoveStartCapture=this.handleTopMoveStartCapture.bind(this),this.handleTopMoveStart=this.handleTopMoveStart.bind(this),this.handleTopMoveCapture=this.handleTopMoveCapture.bind(this),this.handleKeyCapture=this.handleKeyCapture.bind(this),this.handleTopMoveEndCapture=this.handleTopMoveEndCapture.bind(this),this.handleSelectStart=this.handleSelectStart.bind(this)}return _createClass(MouseEventBackend,[{key:"addEventListener",value:function(node,eventName,callback,useCapture){var _this=this;isOldBrowser?!function(){node===window&&(node=document.body);var $ui=(0,_jquery2["default"])(node);useCapture?_lodash2["default"].forEach(_this.eventList,function(type){if(eventNames[type][eventName]){$ui.data("hasCapture"+eventName,"1");var _event="capture_"+eventNames[type][eventName];$ui.on(_event,function(e){callback(e);var $self=(0,_jquery2["default"])(e.currentTarget);$self.attr("iscapturecalled","1")}),$ui.on(eventNames[type][eventName],function(e){var $self=(0,_jquery2["default"])(e.currentTarget);"0"===$self.attr("iscapturecalled")&&callback(e),$self.attr("iscapturecalled","0")})}}):_lodash2["default"].forEach(_this.eventList,function(type){eventNames[type][eventName]&&$ui.on(eventNames[type][eventName],function(e){var $self=(0,_jquery2["default"])(e.currentTarget),allParents=$self.parents(),needTriggerNodes=[],tempTriggerNodes=[e.currentTarget],needTrigger=!1;_lodash2["default"].map(allParents,function(parentItem){var $this=(0,_jquery2["default"])(parentItem);needTrigger?needTriggerNodes=[parentItem].concat(needTriggerNodes):tempTriggerNodes=[parentItem].concat(needTriggerNodes),1===+$this.data("hasCapture"+eventName)&&$this.prop("nodeType")===ELEMENT_NODE&&(needTrigger=!0,needTriggerNodes=[].concat(tempTriggerNodes))});var captureEventName="capture_"+eventNames[type][eventName];_lodash2["default"].forEach(needTriggerNodes,function(elem){var elementClientRect=elem.getBoundingClientRect?elem.getBoundingClientRect():{},_e=_jquery2["default"].Event(captureEventName,{clientX:elementClientRect.left,clientY:elementClientRect.top,target:elem});(0,_jquery2["default"])(elem).trigger(_e)}),callback(e)})})}():_lodash2["default"].forEach(this.eventList,function(type){eventNames[type][eventName]&&(node.removeEventListener(eventNames[type][eventName],callback,useCapture),node.addEventListener(eventNames[type][eventName],callback,useCapture))})}},{key:"removeEventListener",value:function(node,eventName,callback,useCapture){var _this2=this;isOldBrowser?!function(){var $node=(0,_jquery2["default"])(node);_lodash2["default"].forEach(_this2.eventList,function(type){var _event=(useCapture?"capture_":"")+eventNames[type][eventName];useCapture&&$node.attr("hasCapture"+eventName,!1),$node.off(_event)})}():_lodash2["default"].forEach(this.eventList,function(type){node.removeEventListener(eventNames[type][eventName],callback,useCapture)})}},{key:"setup",value:function(){if("undefined"!=typeof window&&!this.isSetUp){this.isSetUp=!0;var target=window;isOldBrowser&&(target=document.body),this.addEventListener(target,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(target,"start",this.handleTopMoveStart),this.addEventListener(target,"move",this.handleTopMoveCapture,!0),this.addEventListener(target,"end",this.handleTopMoveEndCapture,!0),this.addEventListener(target,"keydown",this.handleKeyCapture),this.addEventListener(target,"keyup",this.handleKeyCapture)}}},{key:"teardown",value:function(){if("undefined"!=typeof window){this.isSetUp=!1;var target=window;isOldBrowser&&(target=document.body),this.removeEventListener(target,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(target,"start",this.handleTopMoveStart),this.removeEventListener(target,"move",this.handleTopMoveCapture,!0),this.removeEventListener(target,"end",this.handleTopMoveEndCapture,!0),this.removeEventListener(target,"keydown",this.handleKeyCapture),this.removeEventListener(target,"keyup",this.handleKeyCapture)}}},{key:"connectDragSource",value:function(sourceId,node){var _this3=this;if(this.sourceNodes[sourceId]=node,!node.getAttribute("isbind")){var handleMoveStart=this.handleMoveStart.bind(this,sourceId),handleMoveNode=this.handleNodeMove.bind(this);return node.setAttribute("isbind",!0),this.addEventListener(node,"start",handleMoveStart),this.addEventListener(node,"move",handleMoveNode),this.addEventListener(node,"selectstart",this.handleSelectStart),function(){delete _this3.sourceNodes[sourceId],_this3.removeEventListener(node,"start",handleMoveStart),_this3.removeEventListener(node,"move",handleMoveNode),_this3.removeEventListener(node,"selectstart",_this3.handleSelectStart),node.setAttribute("isbind",!1)}}}},{key:"connectDropTarget",value:function(targetId,node){var _this4=this;return this.targetNodes[targetId]=node,function(){delete _this4.targetNodes[targetId]}}},{key:"getSourceClientOffset",value:function(sourceId){return getNodeClientOffset(this.sourceNodes[sourceId])}},{key:"getSourceClientSize",value:function(sourceId){return getNodeClientOffsetSize(this.sourceNodes[sourceId])}},{key:"handleKeyCapture",value:function(e){this.status.isDragging()&&(this.actions.publishDragSource({holdCtrl:e.ctrlKey,holdMeta:e.metaKey}),this.actions.pressedCtrlKey())}},{key:"handleTopMoveStartCapture",value:function(e){return _mouseDown?void(e.preventDefault?e.preventDefault():e.returnValue=!1):(this.moveStartSourceIds=[],void(this._mouseClientOffset=null))}},{key:"handleMoveStart",value:function(sourceId,e){var _this5=this;return window.lgTouchLock=!0,"touchstart"===e.type?(window.clearTimeout(_touchDelayTimer),_touchDelayTimer=window.setTimeout(function(){_touchDelayTimer=null,_mouseDown=!0,_count=0,e.preventDefault&&e.preventDefault(),e.returnValue=!1,null!=_this5.moveStartSourceIds&&_this5.moveStartSourceIds.unshift(sourceId);var clientOffset=getEventClientOffset(e);clientOffset&&(_this5._mouseClientOffset=clientOffset)},300),void e.preventDefault()):(_mouseDown=!0,_count=0,e.preventDefault&&e.preventDefault(),e.returnValue=!1,void(null!=this.moveStartSourceIds&&this.moveStartSourceIds.unshift(sourceId)))}},{key:"handleTopMoveStart",value:function(e){var clientOffset=getEventClientOffset(e);clientOffset&&(this._mouseClientOffset=clientOffset)}},{key:"handleNodeMove",value:function(e){_touchDelayTimer&&(window.lgTouchLock=!1),clearTimeout(_touchDelayTimer),_touchDelayTimer=null,_mouseDown&&(e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1)}},{key:"handleTopMoveCapture",value:function(e){var _this6=this,moveStartSourceIds=this.moveStartSourceIds;if(moveStartSourceIds&&this._mouseClientOffset||this.status.isDragging()){var clientOffset=getEventClientOffset(e);if(clientOffset&&(!this.status.isDragging()&&moveStartSourceIds&&moveStartSourceIds.length>0&&this._mouseClientOffset.hasOwnProperty("x")&&getMoveDistance(this._mouseClientOffset,clientOffset)>2&&(this.actions.beginDrag(moveStartSourceIds,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset.bind(this),publishSource:!1,holdCtrl:e.ctrlKey,holdMeta:e.metaKey}),this.moveStartSourceIds=null),this.status.isDragging()&&(_count++,_count%2!==0))){this.actions.publishDragSource({holdCtrl:e.ctrlKey,holdMeta:e.metaKey});var matchTargetIds=_lodash2["default"].filter(Object.keys(this.targetNodes),function(tId){var boundingRect=_this6.getBoundingReact("target",tId,_this6.targetNodes[tId]),res=clientOffset.x>=boundingRect.left&&clientOffset.x<=boundingRect.right&&clientOffset.y>=boundingRect.top&&clientOffset.y<=boundingRect.bottom;return res});this.actions.hover(matchTargetIds,{clientOffset:clientOffset})}}}},{key:"handleTopMoveEndCapture",value:function(e){return clearTimeout(_touchDelayTimer),_touchDelayTimer=null,_mouseDown=!1,window.lgTouchLock=!1,_count=0,!this.status.isDragging()||this.status.didDrop()?void(this.moveStartSourceIds=null):(e.preventDefault?e.preventDefault():e.returnValue=!1,this._mouseClientOffset={},this.actions.drop({holdCtrl:e.ctrlKey,holdMeta:e.metaKey}),void this.actions.endDrag())}},{key:"handleSelectStart",value:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},{key:"getBoundingReact",value:function(type,id,node){return node.getBoundingClientRect()}}]),MouseEventBackend}();module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FormGeneratorUtil=__webpack_require__(45),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Rank)",mixins:[pureRenderMixin,_mixins2["default"]],handleChangeRank:function(id,hasRank){hasRank!==!1?this.handleRemoveRank(id):this.handleAddRank(id)},handleAddRank:function(id){for(var props=this.props,data=props.data,currentFill=props.fill||{},rankDigits=data.isLimitDigit?data.rankDigits:(data.options||[]).length,setNum=null,i=0;i<rankDigits;i++)if(!currentFill[i]){setNum=i;break}null!==setNum&&_formStore2["default"].dispatch({type:"setRank",id:props.data.id,num:setNum,value:id})},handleRemoveRank:function(id){var props=this.props;_formStore2["default"].dispatch({type:"removeRank",id:props.data.id,value:id})},render:function(){var _this=this,_props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,tipsStyle=_formStyle.tipsStyle,rankDigits=data.isLimitDigit?data.rankDigits:(data.options||[]).length,_isFullFill=Object.keys(fill||{}).length===rankDigits;return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),_addons2["default"].createElement("p",{className:"fbc_tips",style:tipsStyle},_config.lang.cRankTipsMobile),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_content"},_addons2["default"].createElement("div",{className:"fbc_rankAnswer"},_lodash2["default"].map(data.options,function(info,idx){var _hasRank=!1;return _lodash2["default"].forEach(fill,function(id,key){if(+id===+info.sId)return _hasRank=+key,!1}),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_raItem",{fbc_raFull:_isFullFill&&_hasRank===!1}),key:"rAns"+idx,style:_lodash2["default"].assign({position:"relative"},optionStyle),onClick:_this.handleChangeRank.bind(_this,info.sId,_hasRank)},_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_raNum",{has_value:_hasRank!==!1})},_hasRank!==!1?_hasRank+1:null),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_raGroove")},_addons2["default"].createElement("div",{className:"fbc_ragInfo"},(data.isAutoNo?_optionNum(data.autoNo,idx+1):"")+info.value)),_addons2["default"].createElement("div",{className:"clearB"}))}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_MGString=__webpack_require__(28),_utils=__webpack_require__(22),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Currency)",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"numberBlur",id:this.props.data.id,value:e.target.value})},renderTips:function(){var _props=this.props,data=_props.data,valid=(_props.fill,_props.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,content=null,wrapperError=!0,isErrorTip=(valid||[]).indexOf("tip")>-1;return data.isNumRange&&(_lodash2["default"].isNumber(data.numRangeFrom)&&_lodash2["default"].isNumber(data.numRangeTo)?content=_config.lang.cNumberValueRangeHintFunc({numRangeFrom:data.numRangeFrom,numRangeTo:data.numRangeTo}):_lodash2["default"].isNumber(data.numRangeFrom)?content=_config.lang.cNumberValueMoreThanValueFunc({numRangeFrom:data.numRangeFrom}):_lodash2["default"].isNumber(data.numRangeTo)&&(content=_config.lang.cNumberValueLessThanValueFunc({numRangeTo:data.numRangeTo}))),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},content)},render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,fw=_props2.fw,itemNum=_props2.itemNum,style=_props2.style,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputUnitStyle=_formStyle2.inputUnitStyle,_symbol="ï¿¥";"0"==data.symbol?_symbol=data.symbolDefined:data.symbol&&(_symbol=_config.lang.cCurrencySymbolArray[data.symbol-1]);var cpWidthPre=10*(isMobile?10:data.cpWidth||8),symbolWidth=null;_symbol&&(symbolWidth=Math.min((0,_MGString.getWidth)(_symbol,"14px/1 "+_utils._FONT),((fw/(itemNum||1)-60)*(cpWidthPre/10)-(isMobile?10:25))/20));var cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_content","fbc_widthCp"),style:{width:cpWidthPre+"%"}},_addons2["default"].createElement("span",{className:"fbc_currencySymbol",style:inputUnitStyle},_symbol),_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,style:_lodash2["default"].assign(inputStyle,{paddingLeft:symbolWidth?symbolWidth+8:null}),onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:""+(_lodash2["default"].isNumber(fill)||fill?fill:"")}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(51),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCInputSearch=__webpack_require__(88),_FCInputSearch2=_interopRequireDefault(_FCInputSearch),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(CityLocation)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill;this.processedList=[];var _currentSelected=[];return data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&2!==data.componentType&&(fill.struct&&!_lodash2["default"].isEmpty(fill.struct)&&(this.isSelected=!0),_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:[]}},componentDidMount:function(){this.handlePreGetDropDownContent(this.props,this.state)},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},componentDidUpdate:function(){this.refs.input&&!this.refs.input.isOpen()&&this.checkSetDefault&&(this.handleSetDefaultLocation(),this.checkSetDefault=!1)},handlePreGetDropDownContent:function(props,state){var _this=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this.processedList.indexOf(id)===-1&&(_this.isSelected=!0,_this.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId);var isMobile=this.props.isMobile,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle;_formStore2["default"].getLocationInfo(pId,3,inputStyle.fontSize,this.handleUpdateCurrentLocationInfo,isMobile)},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},handleMouseDownOption:function(lvl,info,e){_utils2["default"].isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(lvl,info,e))},handleSelectOption:function(lvl,info){var data=this.props.data,newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(info.id),this.isSelected=!0,this.setState({currentSelected:newSelected});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3,_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:newSelected.slice(data.isLimitCountry?1:0)}),selectedLvl>newSelected.length&&this.handleGetNextLevelData(info.id)},handleSelectPosition:function(info,e){var data=this.props.data;_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[info.id]}),this.hasContentChange=!1,_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:info.name}),this.refs.input.doClose()},handleSetDefaultLocation:function(){var data=this.props.data;if(!this.state.currentSelected||this.hasContentChange){var value=(this.state.searchResult||[{id:null}])[0];_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[value.id]}),value.id&&_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:value.name})}this.hasContentChange=!1},handleChangeLocationInput:function(e){var _this2=this,data=this.props.data;this.hasContentChange=!0;var processedValue=_lodash2["default"].trim(e.target.value)||"";_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:processedValue}),processedValue?_formStore2["default"].getLocationInfoByTyping(processedValue,data.isLimitCountry?+data.limitCountry:null,data.minLevel).done(function(res){0===res.r&&res.d?(_this2.checkSetDefault=!0,_this2.setState({searchResult:_lodash2["default"].map(res.d,function(item){return{name:item.t,id:item.i,alias:item.a}})})):_this2.setState({searchResult:[]})}):this.setState({searchResult:[]})},handleCheckDropDownContent:function(pId){this.state.currentLocationInfo[pId]||this.handleGetNextLevelData(pId)},renderSelector:function(){var _this3=this,data=this.props.data,selectedValue=this.state.currentSelected,_formStyle2=this.formStyle(),selectStyle=(_formStyle2.inputStyle,_formStyle2.selectStyle),selectPlaceholderStyle=_formStyle2.selectPlaceholderStyle,selectArrowStyle=_formStyle2.selectArrowStyle,selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null,optionsWidth=0;if(_this3.state.currentLocationInfo[pId])options=[],_lodash2["default"].forEach(_this3.state.currentLocationInfo[pId],function(locationData){locationData.name&&(locationData.width>optionsWidth&&(optionsWidth=locationData.width),options.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{hasImage:0===i,fbc_currentSelected:+locationData.id===+currentValue}),key:"opt"+locationData.id,style:{backgroundImage:0===i?"url(images/nationalFlag/"+locationData.id+".gif)":""},onMouseDown:_this3.handleMouseDownOption.bind(_this3,i,locationData),onClick:_this3.handleSelectOption.bind(_this3,i,locationData)},locationData.name)))});else if(null===_this3.state.currentLocationInfo[pId])return"break";if(_this3.isSelected&&!currentValue)return"break";var defaultWidth=80;return null===pId?defaultWidth=244:1===pId&&(defaultWidth=93),optionsWidth=Math.round(Math.max(defaultWidth,optionsWidth+37+(0===i?25:0))),res.push(_addons2["default"].createElement(_FCDropDown2["default"],{key:"lvl"+(i+1),className:(0,_classnames2["default"])("fbc_mlItem","fbc_select",{hasValue:currentValue}),display:currentValue?(_utils2["default"].getGeoInfo(currentValue)||{}).name||_config.lang.cOptionLoading:_config.lang.cSelectorPlaceholder,
imageUri:!(!currentValue||0!==i)&&"url("+window.rootPath("images/nationalFlag/"+currentValue+".gif")+")",selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({width:optionsWidth},currentValue?selectStyle:selectPlaceholderStyle),onExpand:_this3.handleCheckDropDownContent.bind(_this3,pId)},options)),currentValue?void 0:"break"},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret=_loop(i);if("break"===_ret)break}return res},render:function(){var _this4=this,_props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,itemNum=_props.itemNum,type=data.type,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle3=this.formStyle(),inputStyle=_formStyle3.inputStyle,selectStyle=_formStyle3.selectStyle,inputWithIconStyle=(_formStyle3.selectPlaceholderStyle,_formStyle3.inputWithIconStyle),inputIconStyle=_formStyle3.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent"],_contentStyle=null,cityList=[];_isLimitCountry&&(_contentClass.push("has-country"),cityList.push(_addons2["default"].createElement("div",{className:"fbc_mlItem fbc_select hasValue country is-limitCountry",key:"limitCountry",style:selectStyle},_addons2["default"].createElement("p",{className:"fbc_selectValue hasImage",style:{backgroundImage:"url(images/nationalFlag/"+limitCountry+".gif)"}},(_utils2["default"].getGeoInfo(limitCountry)||{}).name))));var cpWidthPre=10*(data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"}),2===data.componentType?!function(){2===+data.cpLayout&&itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100),_contentClass.push("fbc_widthCp"),_contentStyle={width:cpWidthPre+"%"};var searchResult=_this4.state.searchResult,searchResOptions=[];searchResult&&(fill||{}).content&&_lodash2["default"].forEach(searchResult,function(info){searchResOptions.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:+info.id===+(fill||{}).struct}),key:"opt"+info.id,onClick:_this4.handleSelectPosition.bind(_this4,info)},_addons2["default"].createElement("p",null,info.name),info.alias?_addons2["default"].createElement("p",{className:"fbc_selectAlia"},info.alias):null))}),(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&(_contentClass.push("has-city"),cityList.push(_addons2["default"].createElement(_FCInputSearch2["default"],{ref:"input",key:"city",inputClassName:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),className:"fbc_mlItem fbc_inputSelect city",icon:"location"!==type||_isLimitCountry?null:String.fromCharCode(59082),themeColor:style.themeColor,style:"location"!==type||_isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,value:(fill||{}).content||null,onChange:_this4.handleChangeLocationInput,onBlur:_this4.handleSetDefaultLocation},searchResOptions)))}():(2===+data.cpLayout&&itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%"),cityList=cityList.concat(this.renderSelector())),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:_contentClass.join(" "),style:_contentStyle},cityList,_addons2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"FCInputSearch",mixins:[pureRenderMixin],getInitialState:function(){return{isOpen:!1,currentFocus:-1}},componentWillUpdate:function(nextProps,nextState){},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){"$$resize"===action.type&&this.doClose()},isOpen:function(){return this.state.isOpen},doClose:function(){this.refs.focusContent&&this.refs.focusContent.getContent().blur()},handleMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault()},handleDropDownMouseDown:function(e){this.currentIsOpen=this.state.isOpen,e.preventDefault(),e.stopPropagation()},handleToggleSelector:function(e){e.preventDefault(),e.stopPropagation();var focusContent=this.refs.focusContent,open=this.currentIsOpen;if(focusContent){var $focusContent=focusContent.getDOMNode();open?$focusContent.blur():$focusContent.focus()}},handleExpandDropDown:function(e){this.props.onExpand&&this.props.onExpand(),this.setState({isOpen:!0,currentFocus:0})},handleCondenseDropDown:function(e){this.setState({isOpen:!1,currentFocus:-1})},handleDropDownOperate:function(e){this.state.isOpen&&[13,38,40].indexOf(e.keyCode)>-1&&(13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.state.isOpen&&this.state.currentFocus>-1&&this.handleItemSelect(e)):38===e.keyCode?(e.preventDefault(),e.stopPropagation(),0===this.state.currentFocus?this.setState({currentFocus:_addons2["default"].Children.count(this.props.children)-1}):this.setState({currentFocus:this.state.currentFocus-1})):40===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.state.currentFocus===_addons2["default"].Children.count(this.props.children)-1?this.setState({currentFocus:0}):this.setState({currentFocus:this.state.currentFocus+1})))},handleItemSelect:function(e){var _this=this;_addons2["default"].Children.forEach(this.props.children,function(child,idx){if(idx===_this.state.currentFocus)return child.props.onClick&&child.props.onClick(e),!1})},handleItemMouseEnter:function(idx){this.state.isOpen&&this.setState({currentFocus:idx})},handleItemMouseLeave:function(){this.setState({currentFocus:-1})},render:function(){var _this2=this,_props=this.props,value=_props.value,children=_props.children,inputClassName=_props.inputClassName,onChange=_props.onChange,icon=_props.icon,style=_props.style,iconStyle=_props.iconStyle,themeColor=_props.themeColor,props=_objectWithoutProperties(_props,["value","children","inputClassName","onChange","icon","style","iconStyle","themeColor"]),open=this.state.isOpen,currentFocus=this.state.currentFocus;return _addons2["default"].createElement("div",props,_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_selectValue",inputClassName),value:value,type:"text",spellCheck:!1,ref:"focusContent",icon:icon,themeColor:themeColor,style:style,iconStyle:iconStyle,onFocus:this.handleExpandDropDown,onBlur:this.handleCondenseDropDown,onKeyDown:this.handleDropDownOperate,onChange:onChange}),_addons2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_selectList",{fbc_showList:open&&_lodash2["default"].isArray(children)&&children.length>0}),onMouseDown:this.handleDropDownMouseDown},_addons2["default"].Children.map(children,function(child,idx){return _addons2["default"].cloneElement(child,{className:(0,_classnames2["default"])(child.props.className,{fbl_hover:idx===currentFocus}),onMouseEnter:_this2.handleItemMouseEnter.bind(_this2,idx),onMouseLeave:_this2.handleItemMouseLeave})})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(CityLocationMobile)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill,_currentSelected=[];return this.processedList=[],data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&2!==data.componentType&&(fill.struct&&!_lodash2["default"].isEmpty(fill.struct)&&(this.isSelected=!0),_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:[]}},componentDidMount:function(){var _this=this;this.handlePreGetDropDownContent(this.props,this.state),this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this.handleCheckDropDownContent(id)})},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},componentDidUpdate:function(){var _this2=this;if(this.updateSelector){if(this.refs[this.updateSelector]){var domElm=this.refs[this.updateSelector].getDOMNode();domElm.focus()}this.updateSelector=!1}this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this2.handleCheckDropDownContent(id)})},handlePreGetDropDownContent:function(props,state){var _this3=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this3.processedList.indexOf(id)===-1&&(_this3.isSelected=!0,_this3.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId),_formStore2["default"].getLocationInfo(pId,3,"",this.handleUpdateCurrentLocationInfo,!0)},handleCheckDropDownContent:function(pId,needFocus){this.state.currentLocationInfo[pId]||(needFocus&&(this.focusElm="dp"+pId),this.handleGetNextLevelData(pId))},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.focusElm&&(this.updateSelector=this.focusElm,this.focusElm=null),this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},handleSelectOption:function(lvl,e){var data=this.props.data,newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(+e.target.value),this.setState({currentSelected:newSelected});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3,this.isSelected=!0,_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:newSelected.slice(data.isLimitCountry?1:0)}),this.handleGetNextLevelData(+e.target.value)},handleChangeLocationInput:function(e){var data=this.props.data;this.hasContentChange=!0;var processedValue=_lodash2["default"].trim(e.target.value)||"";_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:processedValue})},handleSetDefaultLocation:function(e){var _this4=this,data=this.props.data,processedValue=_lodash2["default"].trim(e.target.value)||"";processedValue&&_formStore2["default"].getLocationInfoByTyping(processedValue,data.isLimitCountry?+data.limitCountry:null,data.minLevel).done(function(res){if(0===res.r&&res.d){_this4.checkSetDefault=!0;var value=res.d[0];_formStore2["default"].dispatch({type:"setLocationStruct",id:data.id,value:[value.i]}),value.i&&_formStore2["default"].dispatch({type:"setLocationInput",id:data.id,value:value.t})}})},renderSelector:function(){var _this5=this;this.needGetId=[];var data=this.props.data,state=this.state,selectedValue=state.currentSelected,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectedLvl=(_formStyle.selectStyle,_formStyle.selectPlaceholderStyle,void 0);selectedLvl=data.minLevel?+data.minLevel:3;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null;if(state.currentLocationInfo[pId])options=[],options.push(_addons2["default"].createElement("option",{value:"",key:"default"},_config.lang.cSelectorPlaceholder)),_lodash2["default"].forEach(state.currentLocationInfo[pId],function(locationData){locationData.name&&options.push(_addons2["default"].createElement("option",{value:""+locationData.id,key:"lcid"+locationData.id},(_utils._EMOJI_FLAGS_MAPPING[locationData.id]?_utils._EMOJI_FLAGS_MAPPING[locationData.id]+"   ":"")+((locationData||{}).name||"")))});else if(null===_this5.state.currentLocationInfo[pId])return"break";return _this5.isSelected&&!currentValue?"break":(null===options&&_this5.needGetId.push(pId),res.push(_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_locItem","fbc_select",{hasValue:currentValue}),key:"fbSelect"+pId+i,onClick:null===options?_this5.handleCheckDropDownContent.bind(_this5,pId,!0):null},_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),options?_addons2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),ref:"dp"+pId,onChange:_this5.handleSelectOption.bind(_this5,i),value:""+currentValue,style:inputStyle},options):_addons2["default"].createElement("p",{className:"fbc_selectValue fbc_innerSelect",style:_lodash2["default"].assign({},inputStyle,{lineHeight:"38px",padding:"0 5px"})},_config.lang.cSelectorPlaceholder))),currentValue?void 0:"break")},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret=_loop(i);if("break"===_ret)break}return res},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,type=data.type,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,inputWithIconStyle=(_formStyle2.selectStyle,_formStyle2.selectPlaceholderStyle,_formStyle2.inputWithIconStyle),inputIconStyle=_formStyle2.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent","fbc_widthCp"],_contentStyle=null,cityList=[];return _isLimitCountry&&(_contentClass.push("has-country"),cityList.push(_addons2["default"].createElement("div",{className:"fbc_locItem fbc_select hasValue country",key:"limitCountry",style:inputStyle},_addons2["default"].createElement("p",{className:"fbc_selectValue hasImage"},(_utils._EMOJI_FLAGS_MAPPING[limitCountry]?_utils._EMOJI_FLAGS_MAPPING[limitCountry]+"   ":"")+(_utils2["default"].getGeoInfo(limitCountry)||{}).name)))),2===data.componentType?(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&cityList.push(_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",key:"inputCity",className:(0,_classnames2["default"])("fbc_locItem","fbc_inputSelect","fbc_input","city",{error:valid&&valid.length>0}),value:(fill||{}).content||null,icon:"location"!==type||_isLimitCountry?null:String.fromCharCode(59082),themeColor:style.themeColor,style:"location"!==type||_isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,spellCheck:!1,autoComplete:"off",onChange:this.handleChangeLocationInput,onBlur:this.handleSetDefaultLocation})):cityList=cityList.concat(this.renderSelector()),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("div",{className:_contentClass.join(" "),style:_contentStyle},cityList,_addons2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(51),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Address)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill,_currentSelected=[];return this.processedList=[],data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&fill.struct&&(this.isSelected=!0,_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:[]}},componentWillReceiveProps:function(nextProps){var data=nextProps.data,fill=nextProps.fill,_currentSelected=[];fill&&fill.struct&&!_lodash2["default"].isEmpty(fill.struct)&&(data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),_currentSelected=_currentSelected.concat(fill.struct),this.setState({currentSelected:_currentSelected}))},componentDidMount:function(){this.handlePreGetDropDownContent(this.props,this.state)},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},handlePreGetDropDownContent:function(props,state){var _this=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this.processedList.indexOf(id)===-1&&(_this.isSelected=!0,_this.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId);var isMobile=(this.props.data,this.props.isMobile),_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle;_formStore2["default"].getLocationInfo(pId,3,inputStyle.fontSize,this.handleUpdateCurrentLocationInfo,isMobile)},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},_handleProcessNextLvl:function(list){var data=this.props.data;this.setState({currentSelected:list});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3,this.isSelected=!0,_formStore2["default"].dispatch({type:"setAddressSelector",id:data.id,value:list.slice(data.isLimitCountry?1:0)}),selectedLvl>list.length&&this.handleGetNextLevelData(list[list.length-1])},handleSelectOption:function(lvl,info){var newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(info.id),this._handleProcessNextLvl(newSelected)},handleMouseDownOption:function(lvl,info,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleSelectOption(lvl,info,e))},handleCheckDropDownContent:function(pId){this.state.currentLocationInfo[pId]||this.handleGetNextLevelData(pId)},renderSelector:function(){var _this2=this,data=this.props.data,selectedValue=this.state.currentSelected,_formStyle2=this.formStyle(),inputStyle=_formStyle2.inputStyle,selectStyle=_formStyle2.selectStyle,selectPlaceholderStyle=_formStyle2.selectPlaceholderStyle,selectArrowStyle=_formStyle2.selectArrowStyle,selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null,optionsWidth=0;if(_this2.state.currentLocationInfo[pId])options=[],_lodash2["default"].forEach(_this2.state.currentLocationInfo[pId],function(locationData){locationData.name&&(locationData.width>optionsWidth&&(optionsWidth=locationData.width),options.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{hasImage:0===i,fbc_currentSelected:+locationData.id===+currentValue}),key:"opt"+locationData.id,style:{backgroundImage:0===i?"url(images/nationalFlag/"+locationData.id+".gif)":""},onMouseDown:_this2.handleMouseDownOption.bind(_this2,i,locationData),onClick:_this2.handleSelectOption.bind(_this2,i,locationData)},locationData.name)))});else if(null===_this2.state.currentLocationInfo[pId])return"break";if(_this2.isSelected&&!currentValue)return"break";options&&!_lodash2["default"].isEmpty(options)||!currentValue||(optionsWidth=_MGString2["default"].getWidth((_utils2["default"].getGeoInfo(currentValue)||{}).name||_config.lang.cOptionLoading,(inputStyle.fontSize||14)+"px/1 "+_utils2["default"]._FONT));var defaultWidth=80;return null===pId?defaultWidth=244:1===pId&&(defaultWidth=93),optionsWidth=Math.round(Math.max(defaultWidth,optionsWidth+37+(0===i?25:0))),res.push(_addons2["default"].createElement(_FCDropDown2["default"],{key:"lvl"+(i+1),className:(0,_classnames2["default"])("fbc_mlItem","fbc_select",{hasValue:currentValue}),display:currentValue?(_utils2["default"].getGeoInfo(currentValue)||{}).name||_config.lang.cOptionLoading:_config.lang.cSelectorPlaceholder,imageUri:!(!currentValue||0!==i)&&"url("+window.rootPath("images/nationalFlag/"+currentValue+".gif")+")",selectArrowStyle:selectArrowStyle,style:_lodash2["default"].assign({width:optionsWidth},currentValue?selectStyle:selectPlaceholderStyle),onExpand:_this2.handleCheckDropDownContent.bind(_this2,pId)},options)),currentValue?void 0:"break"},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret=_loop(i);if("break"===_ret)break}return res},handleChangeAddressDetail:function(e){var _this3=this,data=this.props.data;_formStore2["default"].dispatch({type:"setAddressInput",id:data.id,value:e.target.value});var fill=this.props.fill;fill&&(!fill||fill.struct&&!_lodash2["default"].isEmpty(fill.struct))&&2!==data.componentType||_formStore2["default"].getRawLocationInfo(e.target.value,data.isLimitCountry?+data.limitCountry:null,2===data.componentType?0:1).done(function(res){0===res.r&&res.d&&!function(){var LVL=["I","II","III","IV"],locationSelected=[];LVL.forEach(function(key,idx){if(res.d[key]){var _id=res.d[key];return locationSelected.push(_id),void(res.d.mpLoc&&_utils2["default"].addGeoInfo(_id,res.d[LVL[idx-1]],res.d.mpLoc[_id]))}return!1}),locationSelected[0]===data.limitCountry&&_this3._handleProcessNextLvl(locationSelected)}()})},handleChangeZipCode:function(e){var data=this.props.data;_formStore2["default"].dispatch({type:"setAddressZipCode",id:data.id,value:e.target.value})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,itemNum=_props.itemNum,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle3=this.formStyle(),selectStyle=_formStyle3.selectStyle,inputStyle=(_formStyle3.selectPlaceholderStyle,_formStyle3.inputStyle),inputWithIconStyle=_formStyle3.inputWithIconStyle,inputIconStyle=_formStyle3.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent","fbc_widthCp"],cityList=[],_countryWidth=0;_isLimitCountry&&cityList.push(_addons2["default"].createElement("div",{className:"fbc_mlItem fbc_select hasValue country is-limitCountry",key:"limitCountry",style:selectStyle},_addons2["default"].createElement("p",{className:"fbc_selectValue hasImage",style:{backgroundImage:"url(images/nationalFlag/"+limitCountry+".gif)"}},(_utils2["default"].getGeoInfo(limitCountry)||{}).name))),2===data.componentType?(isLimitCountry&&(_contentClass.push("has-country"),_countryWidth="1"===minLevel?99:24),(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&(_contentClass.push("has-city"),cityList.push(_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_mlItem fbc_input city",key:"city",value:fill?fill.content:"",icon:isLimitCountry?null:String.fromCharCode(59083),themeColor:style.themeColor,style:isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,placeholder:_config.lang.cAddressDetailsPlaceholder,onChange:this.handleChangeAddressDetail})))):(cityList=cityList.concat(this.renderSelector()),cityList.push(_addons2["default"].createElement("div",{className:"clearB",key:"clearB"})),cityList.push(_addons2["default"].createElement("div",{className:"fbc_addressDetails",key:"details"},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_mlItem fbc_input address",value:fill?fill.content:"",style:inputStyle,placeholder:_config.lang.cAddressDetailsPlaceholder,onChange:this.handleChangeAddressDetail}),_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_mlItem fbc_input zipCode",value:fill?fill.zipCode:"",style:inputStyle,placeholder:_config.lang.cAddressCodePlaceholder,onChange:this.handleChangeZipCode}),_addons2["default"].createElement("div",{className:"clearB"}))));var cpWidthPre=10*(data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return 2===+data.cpLayout&&(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:_contentClass.join(" "),style:{width:cpWidthPre+"%"}},cityList,_addons2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(AddressMobile)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){var data=this.props.data,fill=this.props.fill,_currentSelected=[];return this.processedList=[],data.isLimitCountry&&+data.limitCountry>0&&_currentSelected.push(+data.limitCountry),fill&&fill.struct&&(this.isSelected=!0,_currentSelected=_currentSelected.concat(fill.struct)),{currentLocationInfo:{},currentSelected:_currentSelected,searchResult:[]}},componentDidMount:function(){var _this=this;this.handlePreGetDropDownContent(this.props,this.state),this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this.handleCheckDropDownContent(id)})},componentWillUpdate:function(nextProps,nextState){this.handlePreGetDropDownContent(nextProps,nextState)},componentDidUpdate:function(){var _this2=this;if(this.updateSelector){if(this.refs[this.updateSelector]){var domElm=this.refs[this.updateSelector].getDOMNode();domElm.focus()}this.updateSelector=!1}this.needGetId&&this.needGetId.length>0&&_lodash2["default"].forEach(this.needGetId,function(id){_this2.handleCheckDropDownContent(id)})},handlePreGetDropDownContent:function(props,state){var _this3=this;!props.fill||_lodash2["default"].isEmpty(props.fill)||_lodash2["default"].isEmpty(props.fill.struct)||_lodash2["default"].forEach(state.currentSelected,function(id){_this3.processedList.indexOf(id)===-1&&(_this3.isSelected=!0,_this3.handleCheckDropDownContent(id))})},handleGetNextLevelData:function(pId){this.processedList.push(pId),_formStore2["default"].getLocationInfo(pId,3,"",this.handleUpdateCurrentLocationInfo,!0)},handleCheckDropDownContent:function(pId,needFocus){this.state.currentLocationInfo[pId]||(needFocus&&(this.focusElm="dp"+pId),this.handleGetNextLevelData(pId))},handleUpdateCurrentLocationInfo:function(pId,info){var newInfo={};newInfo[pId]=info,this.isSelected=!1,this.focusElm&&(this.updateSelector=this.focusElm,this.focusElm=null),this.isMounted()&&this.setState({currentLocationInfo:_lodash2["default"].assign({},this.state.currentLocationInfo,newInfo)})},handleSelectOption:function(lvl,e){var data=this.props.data,newSelected=this.state.currentSelected.slice(0,lvl);newSelected.push(+e.target.value),this.setState({currentSelected:newSelected});var selectedLvl=void 0;selectedLvl=data.minLevel?+data.minLevel:3,this.isSelected=!0,_formStore2["default"].dispatch({type:"setAddressSelector",id:data.id,value:newSelected.slice(data.isLimitCountry?1:0)}),this.handleGetNextLevelData(+e.target.value)},handleChangeAddressDetail:function(e){var data=this.props.data;_formStore2["default"].dispatch({type:"setAddressInput",id:data.id,value:e.target.value})},handleBlurAddressDetail:function(e){var _this4=this,data=this.props.data;_formStore2["default"].dispatch({type:"setAddressInput",id:data.id,value:e.target.value});var fill=this.props.fill;fill&&(!fill||fill.struct&&!_lodash2["default"].isEmpty(fill.struct))&&2!==data.componentType||_formStore2["default"].getRawLocationInfo(e.target.value,data.isLimitCountry?+data.limitCountry:null,2===data.componentType?0:1).done(function(res){0===res.r&&res.d&&!function(){var LVL=["I","II","III","IV"],locationSelected=[];LVL.forEach(function(key,idx){if(res.d[key]){var _id=res.d[key];return locationSelected.push(_id),void(res.d.mpLoc&&_utils2["default"].addGeoInfo(_id,res.d[LVL[idx-1]],res.d.mpLoc[_id]))}return!1}),locationSelected[0]===data.limitCountry&&_this4._handleProcessNextLvl(locationSelected)}()})},handleChangeZipCode:function(e){var data=this.props.data;
_formStore2["default"].dispatch({type:"setAddressZipCode",id:data.id,value:e.target.value})},renderSelector:function(){var _this5=this;this.needGetId=[];var data=this.props.data,state=this.state,selectedValue=state.currentSelected,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectedLvl=(_formStyle.selectStyle,_formStyle.selectPlaceholderStyle,void 0);selectedLvl=data.minLevel?+data.minLevel:3;for(var res=[],_loop=function(i){var currentValue=selectedValue[i],options=null,pId=selectedValue[i-1]||null;if(state.currentLocationInfo[pId])options=[],options.push(_addons2["default"].createElement("option",{value:"",key:"default"},_config.lang.cSelectorPlaceholder)),_lodash2["default"].forEach(state.currentLocationInfo[pId],function(locationData){locationData.name&&options.push(_addons2["default"].createElement("option",{value:""+locationData.id,key:"lcid"+locationData.id},(_utils._EMOJI_FLAGS_MAPPING[locationData.id]?_utils._EMOJI_FLAGS_MAPPING[locationData.id]+"   ":"")+locationData.name))});else if(null===_this5.state.currentLocationInfo[pId])return"break";return _this5.isSelected&&!currentValue?"break":(null===options&&_this5.needGetId.push(pId),res.push(_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_locItem","fbc_select",{hasValue:currentValue}),key:"fbSelect"+pId+i,onClick:null===options?_this5.handleCheckDropDownContent.bind(_this5,pId,!0):null},_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),options?_addons2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),ref:"dp"+pId,onChange:_this5.handleSelectOption.bind(_this5,i),value:""+currentValue,style:inputStyle},options):_addons2["default"].createElement("p",{className:"fbc_selectValue fbc_innerSelect",style:_lodash2["default"].assign({},inputStyle,{lineHeight:"38px",padding:"0 5px"})},_config.lang.cSelectorPlaceholder))),currentValue?void 0:"break")},i=data.isLimitCountry?1:0;i<selectedLvl;i++){var _ret2=_loop(i);if("break"===_ret2)break}return res},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,style=_props.style,minLevel=data.minLevel,limitCountry=data.limitCountry,isLimitCountry=data.isLimitCountry,_formStyle2=this.formStyle(),inputStyle=(_formStyle2.selectStyle,_formStyle2.selectPlaceholderStyle,_formStyle2.inputStyle),inputWithIconStyle=_formStyle2.inputWithIconStyle,inputIconStyle=_formStyle2.inputIconStyle,_isLimitCountry=isLimitCountry&&limitCountry&&0!==+limitCountry,_contentClass=["fbc_mlContent","fbc_widthCp"],_contentStyle=null,cityList=[];return _isLimitCountry&&cityList.push(_addons2["default"].createElement("div",{className:"fbc_locItem fbc_select hasValue country",key:"limitCountry"},_addons2["default"].createElement("p",{className:"fbc_selectValue hasImage"},(_utils._EMOJI_FLAGS_MAPPING[limitCountry]?_utils._EMOJI_FLAGS_MAPPING[limitCountry]+"   ":"")+((_utils2["default"].getGeoInfo(limitCountry)||{}).name||"")))),2===data.componentType?(!_isLimitCountry||_isLimitCountry&&"1"!==minLevel)&&cityList.push(_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_locItem fbc_input city",key:"city",value:fill?fill.content:"",icon:isLimitCountry?null:String.fromCharCode(59083),themeColor:style.themeColor,style:isLimitCountry?inputStyle:inputWithIconStyle,iconStyle:inputIconStyle,placeholder:_config.lang.cAddressDetailsPlaceholder,spellCheck:!1,autoComplete:"off",onChange:this.handleChangeAddressDetail,onBlur:this.handleBlurAddressDetail})):cityList=cityList.concat(this.renderSelector(),[_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_locItem fbc_input address",key:"addressInput",placeholder:_config.lang.cAddressDetailsPlaceholder,style:inputStyle,spellCheck:!1,onChange:this.handleChangeAddressDetail,onBlur:this.handleBlurAddressDetail,value:fill?fill.content||"":""}),_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:"fbc_locItem fbc_input zipCode",key:"zipCodeInput",style:inputStyle,placeholder:_config.lang.cAddressCodePlaceholder,spellCheck:!1,onChange:this.handleChangeZipCode,value:fill?fill.zipCode||"":""})]),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("div",{className:_contentClass.join(" "),style:_contentStyle},cityList,_addons2["default"].createElement("div",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_tools=__webpack_require__(25),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_LegoCountPicker=__webpack_require__(93),_LegoCountPicker2=_interopRequireDefault(_LegoCountPicker),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_FCPreview=__webpack_require__(95),_FCPreview2=_interopRequireDefault(_FCPreview),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,EXAMPLE_BG="images/form/form_picExample_bg.png";exports["default"]=_addons2["default"].createClass({displayName:"Component(Commodity)",mixins:[pureRenderMixin,_mixins2["default"]],componentDidMount:function(){this.popElem=document.getElementById("popwin")},handleImgError:function(e){this.isHandleError&&(this.isHandleError=!0,e.target.src=window.rootPath(EXAMPLE_BG))},handleShowPreview:function(image,e){e.preventDefault(),e.stopPropagation();var $target=(0,_jquery2["default"])(e.target).next(),scrollTop=document.body.scrollTop,scrollLeft=document.body.scrollLeft;_addons2["default"].render(_addons2["default"].createElement(_FCPreview2["default"],{img:image,from:{x:$target.offset().left-scrollLeft,y:$target.offset().top-scrollTop,width:$target.width(),height:$target.height()},duration:200}),this.popElem)},handleCountChange:function(id,e,num){_formStore2["default"].dispatch({type:"setCommodityValue",id:this.props.data.id,cId:id,value:num})},renderCommodities:function(){var _props=this.props,data=_props.data,fill=_props.fill,cartValid=(_props.valid,_props.cartValid),isMobile=_props.isMobile,mode=_props.mode,_formStyle=this.formStyle(),optionTipsStyle=_formStyle.optionTipsStyle,commodityNameStyle=_formStyle.commodityNameStyle,commodityDescribeStyle=_formStyle.commodityDescribeStyle,settings=_utils2["default"].getSettings(),commodities=data.commodities||[],_commodities=[],_temp=null,_num=0,_optionsLayout=data.optionsLayout;isMobile&&(_optionsLayout=2);for(var i=0,len=commodities.length;i<len;i++)if(_temp=commodities[i],1!==mode||_temp.sId&&null!=_temp.price){_num++;var imageInfo=_temp.image||{},image=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageUri,imageFull=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageFullUri,_image=null;image&&(_image=_addons2["default"].createElement("div",{className:"fbc_commodityImage",key:"prImg"},_addons2["default"].createElement("span",{className:"fbc_imgPreview iconfont",onClick:this.handleShowPreview.bind(this,imageFull)},String.fromCharCode(59010)),_addons2["default"].createElement("img",{className:"fbc_commodityImg",src:window.rootPath(image||EXAMPLE_BG),onError:this.handleImgError,onClick:this.handleCountChange.bind(this,_temp.sId,null,(fill?fill[_temp.sId]||0:0)+1)})));var symbol="ï¿¥";"0"==settings.cartSymbol?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var _remain=null,_hide=!1,maxValue=null,remain=null;if(data.isLimitStock&&data.isLimitOptions&&data.optionsQuotaInfo&&data.optionsQuotaInfo[_temp.sId]){var quotaInfo=data.optionsQuotaInfo[_temp.sId];if(_lodash2["default"].isNumber(quotaInfo[2])&&quotaInfo[2]>=0&&(maxValue=quotaInfo[2]),_lodash2["default"].isNumber(quotaInfo[1])&&(remain=quotaInfo[1]-quotaInfo[0]>=0?quotaInfo[1]-quotaInfo[0]:0),data.isHideFullOption&&0===remain){_hide=!0;continue}if(data.isShowOptionLimit){var _c=null,_setRemain=!1;_lodash2["default"].isNumber(remain)&&(_setRemain=!0,_c=_config.lang.cQuotaRemainingFunc({remaining:Math.max(remain,0)})),_lodash2["default"].isNumber(maxValue)&&(_c=_setRemain?_config.lang.cCommodityRemainMaxTips({max:Math.max(Math.min(remain,maxValue),0),remain:Math.max(remain,0)}):_config.lang.cCommodityMaxTips({max:Math.max(maxValue,0)})),_remain=_addons2["default"].createElement("p",{className:"fbc_commodityTips",style:optionTipsStyle},_c)}}var _price=(""+_temp.price).split(".");isMobile||(_price=(+_temp.price).toFixed(2).split("."));var link="javascript:void(0)";if(_temp.isJumpTo&&_temp.jumpTo){link=_temp.jumpTo;var linkParseUrl=(0,_tools.parseURL)(_temp.jumpTo);linkParseUrl.protocol&&linkParseUrl.host!==location.host||(_MGString2["default"].isUrl(_temp.jumpTo)?_temp.jumpTo.match(/^(http:\/\/|https:\/\/)/)||(link="http://"+_temp.jumpTo):link="http://"+_temp.jumpTo)}var _pickerMax=null;data.isLimitStock&&data.isLimitOptions&&(_lodash2["default"].isNumber(maxValue)&&(_pickerMax=maxValue),_lodash2["default"].isNumber(remain)&&(_pickerMax=_pickerMax?Math.min(_pickerMax,remain):remain)),null===_pickerMax&&(_pickerMax=1/0);var _describe=null;_lodash2["default"].isArray(_temp.describe)?!function(){var infoLen=_temp.describe.length;_describe=_lodash2["default"].map(_temp.describe,function(content,idx){var _content=content,_wrap=idx+1===infoLen?null:_addons2["default"].createElement("br",null);return!content&&infoLen>1?_addons2["default"].createElement("br",{key:"emptyLine"+idx}):_addons2["default"].createElement("span",{key:"line"+idx},_content,_wrap)})}():_describe=_addons2["default"].createElement("p",null,_temp.describe||""),_commodities.push(_addons2["default"].createElement("li",{key:"item"+i,className:(0,_classnames2["default"])("fbc_commodityLi",{clearB:_num%_optionsLayout===1})},_image,_addons2["default"].createElement("p",{className:"fbc_commodityName",style:commodityNameStyle},_temp.isJumpTo&&_temp.jumpTo?_addons2["default"].createElement("a",{className:"fbc_commodityNameJump",target:"_blank",href:link},_temp.name||""):_temp.name||""),_temp.describe?_addons2["default"].createElement("p",{className:"fbc_commodityDescribe",style:commodityDescribeStyle},_describe):null,_remain,_addons2["default"].createElement("div",{className:"fbc_purchaseInfo"},_addons2["default"].createElement("p",{className:"fbc_commodityPrice"},symbol+" "+_price[0],_price[1]?_addons2["default"].createElement("span",{className:"decimalPart"},"."+_price[1]):null),_addons2["default"].createElement(_LegoCountPicker2["default"],{className:"cp_iCountPicker fbc_commodityCount",name:"count",maxDisabled:cartValid&&(cartValid.indexOf("quantityOver")>-1||cartValid.indexOf("amountOver")>-1),inputDisable:!1,maxValue:_pickerMax,value:fill?fill[_temp.sId]||0:0,minValue:0,onChange:this.handleCountChange.bind(this,_temp.sId)}))))}else console.error("commodity component ID LOST ->."+_temp.id+" : "+_temp.name);return data.isLimitStock&&data.isLimitOptions&&data.isShowOptionLimit&&0===_commodities.length&&commodities.length>0&&_commodities.push(_addons2["default"].createElement("li",{className:"fbc_emptyTip"},_config.lang.cOptionNull)),_commodities},render:function(){var _props2=this.props,data=_props2.data,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,_optionsLayout=data.optionsLayout;return isMobile&&(_optionsLayout=2),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid),_addons2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_content","commodity",_optionsLayout?"layout-"+_optionsLayout:"")},this.renderCommodities(),_addons2["default"].createElement("li",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_MGSelectionManager=__webpack_require__(94),_MGSelectionManager2=_interopRequireDefault(_MGSelectionManager),_MGUtil=__webpack_require__(39),_MGUtil2=_interopRequireDefault(_MGUtil),PureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"LegoCountPicker.react",mixins:[PureRenderMixin],propTypes:{className:_addons2["default"].PropTypes.string,name:_addons2["default"].PropTypes.string,style:_addons2["default"].PropTypes.object,hasInput:_addons2["default"].PropTypes.bool,inputDisable:_addons2["default"].PropTypes.bool,value:_addons2["default"].PropTypes.number,maxValue:_addons2["default"].PropTypes.number,minValue:_addons2["default"].PropTypes.number,stepValue:_addons2["default"].PropTypes.number,disabled:_addons2["default"].PropTypes.bool,maxDisabled:_addons2["default"].PropTypes.bool,minDisabled:_addons2["default"].PropTypes.bool,onChange:_addons2["default"].PropTypes.func},getDefaultProps:function(){return{btnTitle:[],hasInput:!0,maxValue:1/0,minValue:0,stepValue:1,value:0}},getInitialState:function(){return{value:this._returnValueValid(this.props.value),defaultValue:this._returnValueValid(this.props.value),focus:!1}},componentWillReceiveProps:function(nextProps){this.setState({value:this._returnValueValid(nextProps.value),defaultValue:this._returnValueValid(nextProps.value)})},_returnValueValid:function(v){var props=this.props;return v-=0,isNaN(v)||Math.floor(v)!==v?props.minValue:Math.min(Math.max(props.minValue,v),props.maxValue)},handleReduce:function(e){e.stopPropagation(),this.props.disabled||this.state.value<this.props.minValue||this.props.minDisabled||this.handleValueChange(e,this.state.value-this.props.stepValue)},handleIncrease:function(e){e.stopPropagation(),this.props.disabled||this.state.value>this.props.maxValue||this.props.maxDisabled||this.handleValueChange(e,this.state.value+this.props.stepValue)},handleKeyDown:function(e){e=e||window.event;var keyCode=e.keyCode||e.which,value=this.refs.countpickerInput.getDOMNode().value;38===keyCode?(e.stopPropagation(),e.preventDefault(),this.handleReduce(e)):40===keyCode?(e.stopPropagation(),e.preventDefault(),this.handleIncrease(e)):13===keyCode&&this.handleValueChange(e,value)},handleUnitMouseDown:function(e){e.stopPropagation(),e.preventDefault(),this.props.disabled||(this.setState({focus:!0}),_MGSelectionManager2["default"].focusEnd(this.refs.countpickerInput.getDOMNode(),!0))},handleFocus:function(e){this.props.disabled||this.setState({focus:!0})},handleBlur:function(e){var value=this.refs.countpickerInput.getDOMNode().value;this.handleValueChange(e,value),this.setState({focus:!1})},handleChange:function(e){var value=this.refs.countpickerInput.getDOMNode().value;this.setState({defaultValue:value})},handleValueChange:function(e,v){var props=this.props,value=this._returnValueValid(v-0);this.setState({value:value,defaultValue:value}),props.onChange&&props.onChange(e,value)},render:function(){var state=this.state,value=state.value,props=this.props,_reduceClass={"lg-countpicker-reduce":!0,disabled:props.disabled||value==props.minValue||value<props.minValue||props.minDisabled},_increaseClass={"lg-countpicker-increase":!0,disabled:props.disabled||value==props.maxValue||value>props.maxValue||props.maxDisabled},_class={"lg-countpicker":!0,"no-input":!props.hasInput};props.className&&props.className.split(" ").forEach(function(v){v&&(_class[v]=!0)});var _inputProps={ref:"countpickerInput",className:(0,_classnames2["default"])({"lg-countpicker-input":!0,"lg-countpicker-focus":state.focus}),type:_MGUtil2["default"].fuzzyDeviceCheck?"number":"text",value:state.defaultValue,autoComplete:"off",onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,disabled:props.disabled||props.inputDisable,style:{pointerEvents:props.disabled||props.inputDisable?"none":"visible"},tabIndex:0},_input=null,_unit=null;return props.hasInput&&(_input=_addons2["default"].createElement("input",_inputProps),props.unit&&(_unit=_addons2["default"].createElement("i",{className:"iconfont lg-countpicker-unit",onMouseDown:this.handleUnitMouseDown},props.unit))),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(_class)},_addons2["default"].createElement("a",{className:(0,_classnames2["default"])(_reduceClass,"iconfont"),tabIndex:-1,title:props.btnTitle[0]||"",onMouseDown:this.handleReduce},props.hasInput?String.fromCharCode(58980):""),_input,_unit,_addons2["default"].createElement("a",{className:(0,_classnames2["default"])(_increaseClass,"iconfont"),tabIndex:-1,title:props.btnTitle[1]||"",onMouseDown:this.handleIncrease},props.hasInput?String.fromCharCode(58979):""),_addons2["default"].createElement("div",{className:"clearB"}))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function clear(str){return(str||"").replace(REGEX_CR,"").replace(REGEX_LF,"").replace(REGEX_NBSP,SPACE).replace(REGEX_CARRIAGE,"").replace(REGEX_ZWS,"")}function _getLine(node,isBlock){for(var line=isBlock?1:0,child=node.firstChild;child;){var isBr=!1;child.nodeName in blockHTMLNode?line+=_getLine(child,!0):"BR"!==child.nodeName||child.getAttribute("data-empty")||(isBr=!0),child=child.nextSibling,!isBr||!child&&isBlock||line++}return line}function _countLine(node,isBlock,extInfo){if(!node)return{lineNum:0,strLength:0};for(var currentPrevLength=extInfo.strLen,lineContent=extInfo.lineContent,currentLineStr=extInfo.currentLineStr,prev=node.previousSibling,lineNum=0,prevStrLength=extInfo.currentStrLength,lastIsBlock=isBlock;prev;)_MGDebugger2["default"].log("prev",prev),!lastIsBlock||"BR"===prev.nodeName||prev.nodeName in blockHTMLNode||(currentPrevLength+=prevStrLength,prevStrLength=0,lineContent.push(currentLineStr),currentLineStr="",lineNum++),lastIsBlock=!1,3===prev.nodeType?(currentLineStr+=clear(prev.nodeValue||""),prevStrLength+=clear(prev.nodeValue||"").length):"BR"!==prev.nodeName&&(currentLineStr+=clear(prev.textContent||prev.innerText||""),prevStrLength+=clear(prev.textContent||prev.innerText||"").length),"BR"!==prev.nodeName||prev.getAttribute("data-empty")?prev.nodeName in blockHTMLNode&&(lineNum+=_getLine(prev,!0),currentPrevLength+=prevStrLength,prevStrLength=0,lineContent.push(currentLineStr),currentLineStr="",lastIsBlock=!0):(currentPrevLength+=prevStrLength,prevStrLength=0,lineContent.push(currentLineStr),currentLineStr="",lineNum++),prev=prev.previousSibling;return{lineNum:lineNum,strLength:currentPrevLength,currentStrLength:prevStrLength}}function _getCaretPositionIE(node){var endRange,len,normalizedValue,pos,range,textInputRange,_doc=node.ownerDocument||node.document;return range=_doc.selection.createRange(),pos=0,_MGDebugger2["default"].log(range.parentElement(),node),range&&range.parentElement()===node&&(normalizedValue=node.value.replace(/\r\n/g,"\n"),len=normalizedValue.length,textInputRange=node.createTextRange(),textInputRange.moveToBookmark(range.getBookmark()),endRange=node.createTextRange(),endRange.collapse(!1),pos=textInputRange.compareEndPoints("StartToEnd",endRange)>-1?len:-textInputRange.moveStart("character",-len)),pos}function getCaretPosition(node){var caretOffset=!1;if(!node)return caretOffset;var _doc=node.ownerDocument||node.document;if("undefined"!=typeof window.getSelection){var range=null;try{range=window.getSelection().getRangeAt(0)}catch(e){return caretOffset}var preCaretRange=range.cloneRange();preCaretRange.selectNodeContents(node),preCaretRange.setEnd(range.endContainer,Math.min(range.endContainer.length,range.endOffset));var prev=range.commonAncestorContainer,lineContent=[],currentLineStr="",lineNum=0,prevStrLength=0,currentLineStrLength=0,findParent=!1;if(prev===node&&(prev=prev.childNodes[prev.childNodes.length-1]),!prev)return{strPos:0,lineNumEnd:0,linePosEnd:0};var _lowerLineInfo=_countLine(prev,prev.nodeName in blockHTMLNode,{strLen:prevStrLength,currentStrLength:currentLineStrLength,lineContent:lineContent,currentLineStr:currentLineStr});lineNum+=_lowerLineInfo.lineNum,prevStrLength=_lowerLineInfo.strLength,currentLineStrLength=_lowerLineInfo.currentStrLength,3!==prev.nodeType&&prev.nodeName in blockHTMLNode||(findParent=!0);for(;findParent&&prev.parentNode!==node;){prev=prev.parentNode;var inBlock=prev.nodeName in blockHTMLNode,_higherLineInfo=_countLine(prev,inBlock,{strLen:prevStrLength,currentStrLength:currentLineStrLength,lineContent:lineContent,currentLineStr:currentLineStr});lineNum+=_higherLineInfo.lineNum,prevStrLength=_higherLineInfo.strLength,currentLineStrLength=_higherLineInfo.currentStrLength,findParent=3===prev.nodeType||!inBlock}var prevInfoLen=lineContent.length<1?prevStrLength:(0,_lodash2["default"])(lineContent).map(function(v){return v.length}).reduce(_lodash2["default"].add),pureRangePos=preCaretRange.toString().length;_MGDebugger2["default"].log("\nline number...>",lineNum,"\nprevStringLength...>",prevStrLength,"\ncurrentLineStringLength....>",currentLineStrLength,"\nlineContent....>",lineContent,"str:: ",currentLineStr,"\ncurrentLinePos:",pureRangePos,pureRangePos-prevStrLength,pureRangePos-prevInfoLen),caretOffset={strPos:pureRangePos,lineNumEnd:lineNum,linePosEnd:0===lineNum?pureRangePos:pureRangePos-prevInfoLen}}else"undefined"!=typeof _doc.selection&&"Control"!=_doc.selection.type&&(caretOffset={strPos:_getCaretPositionIE(node),linePosEnd:null,lineNumEnd:null});return caretOffset}function _focusLine(node,position,currentInfo){var children=node.childNodes,_currentLine=currentInfo.line,_currentPositionStr=Math.max(currentInfo.pos,0),_prevStr=currentInfo.prevStr,_doc=node.ownerDocument||node.document,found=!1;return _lodash2["default"].forEach(children,function(child,idx){var childName=child.nodeName;if(3===child.nodeType){var _str=clear(child.nodeValue||"");if(_currentLine===position.lineNumEnd&&_currentPositionStr+_str.length>=position.strPos){var selection=window.getSelection(),range=_doc.createRange();return range.setStart(child,position.strPos-_currentPositionStr),selection.removeAllRanges(),selection.addRange(range),found=!0,!1}_currentPositionStr+=_str.length}else if("BR"===childName){if(idx===children.length-1&&currentInfo.isBlock||_currentLine++,_currentLine===position.lineNumEnd&&_currentPositionStr>=position.strPos){var _selection=window.getSelection(),_range=_doc.createRange();return _range.setStart(node,0),_selection.removeAllRanges(),_selection.addRange(_range),found=!0,!1}}else{childName in blockHTMLNode&&0!==idx&&_currentLine++;var _blockInfo=_focusLine(child,position,{line:_currentLine,pos:_currentPositionStr,isBlock:childName in blockHTMLNode,prevStr:_prevStr});if(!_blockInfo)return found=!0,!1;_currentLine=_blockInfo.line,_currentPositionStr=_blockInfo.pos}}),!found&&{line:_currentLine,pos:_currentPositionStr,prevStr:_prevStr}}function focusPosition(node,position){if(node){if(node&&0===node.childNodes.length)return void node.focus();var _doc=node.ownerDocument||node.document;_doc.createRange&&window.getSelection&&_focusLine(node,position,{line:0,pos:0,isBlock:!1,prevStr:null})}}function focusInputPosition(node,position){if("INPUT"!==node.nodeName&&focusLine(node,node.childNodes.length),0===node.value.length)return void node.focus();if(document.createRange&&window.getSelection&&node.setSelectionRange){var selection=window.getSelection();selection.removeAllRanges(),node.focus();var _position=Math.min(node.value.length,position);node.setSelectionRange(_position,_position)}else node.focus()}function focusEnd(node){"INPUT"===node.nodeName?focusInputPosition(node,node.value.length):focusLine(node,node.childNodes.length)}function focusLine(node,lineNum){if(0===node.childNodes.length)return void node.focus();if(document.createRange&&window.getSelection){var selection=window.getSelection();selection.removeAllRanges();var range=document.createRange();range.selectNodeContents(node),range.setStart(node,Math.min(node.childNodes.length,lineNum)),range.collapse(!0),selection.addRange(range)}node.focus()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.blockHTMLNode=void 0;var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),blockHTMLNode=exports.blockHTMLNode={ADDRESS:!1,ARTICLE:!0,ASIDE:!0,AUDIO:!0,BLOCKQUOTE:!1,CANVAS:!0,DD:!1,DIV:!1,DL:!1,FIELDSET:!1,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!1,H1:!1,H2:!1,H3:!1,H4:!1,H5:!1,H6:!1,HEADER:!0,HGROUP:!0,HR:!1,NOSCRIPT:!1,OL:!1,OUTPUT:!0,P:!1,PRE:!1,SECTION:!0,TABLE:!1,TFOOT:!1,UL:!1,VIDEO:!0},NBSP="&nbsp;",SPACE=" ",REGEX_CR=new RegExp("\r","g"),REGEX_LF=new RegExp("\n","g"),REGEX_NBSP=new RegExp(NBSP,"g"),REGEX_CARRIAGE=new RegExp("&#13;?","g"),REGEX_ZWS=new RegExp("&#8203;?","g");exports["default"]={focusPosition:focusPosition,focusEnd:focusEnd,getCaretPosition:getCaretPosition}},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_MGReactTouchEventBinder=__webpack_require__(96),_MGReactTouchEventBinder2=_interopRequireDefault(_MGReactTouchEventBinder);exports["default"]=_addons2["default"].createClass({displayName:"FCImagePreview",getInitialState:function(){return this.time=+new Date,{position:this.props.from,showClose:!1}},componentDidMount:function(){this.popElem=document.getElementById("popwin"),_tools2["default"].getImageSize(this.props.img).then(this.handleImageLoad),this.$image=$(this.refs.img.getDOMNode()),$(".ie8").length>0?$("html").addClass("ie8noscroll"):$("html").addClass("noscroll")},componentWillUnmount:function(){$(this.refs.img.getDOMNode()).unbind("load.imgLoader")},doClose:function(){this.props.onClose&&this.props.onClose(),$("html").removeClass("noscroll").removeClass("ie8noscroll"),_addons2["default"].unmountComponentAtNode(this.popElem)},handleClose:function(){this.props.isCantClose||this.doClose()},handleImageLoad:function(size){var _this=this,props=this.props,windowSize=_tools2["default"].getWindowSize(),scale=1;if(!size)return void this.setState({position:{x:(windowSize.width-Math.ceil(e.target.width))/2,y:(windowSize.height-Math.ceil(e.target.height))/2,width:Math.ceil(e.target.width),height:Math.ceil(e.target.height)},showClose:!0});size.width>.8*windowSize.width&&(scale=Math.min(scale,.8*windowSize.width/size.width)),size.height>.8*windowSize.height&&(scale=Math.min(scale,.8*windowSize.height/size.height));var left=(windowSize.width-Math.ceil(size.width*scale))/2,top=(windowSize.height-Math.ceil(size.height*scale))/2;setTimeout(function(){_this.setState({position:{x:left,y:top,width:Math.ceil(size.width*scale),height:Math.ceil(size.height*scale)},showClose:!0})},props.duration||500)},handlePinchStart:function(e){this.defaultScale=this._getScale(this.$image),this.defaultPosition=this.$image.position()},handlePinchPicture:function(e,data){this.$image.css({transform:"scale("+Math.min(Math.max(.3,this.defaultScale.x*data.scale),2)+")"})},handleZoomPicture:function(e){this.defaultScale=this._getScale(this.$image),this.defaultScale.x>1?this.$image.css({transform:"scale(1)"}):this.$image.css({transform:"scale(1.3)"})},handleWheelZoomPicture:function(e){this.defaultScale=this._getScale(this.$image),this.$image.css({transform:"scale("+Math.min(Math.max(.3,this.defaultScale.x+.05*(e.deltaY>0?-1:1)),2)+")"})},_getScale:function($dom){var transformMatrix=$dom.css("-webkit-transform")||$dom.css("-moz-transform")||$dom.css("-ms-transform")||$dom.css("-o-transform")||$dom.css("transform"),scale={x:1,y:1};if(transformMatrix){var matrix=transformMatrix.replace(/[^0-9\-.,]/g,"").split(",");scale.x=parseFloat(matrix[0])||1,scale.y=parseFloat(matrix[3])||1}return scale},handleTouchMove:function(e,data){var _this2=this;e.preventDefault(),e.stopPropagation(),e.touches&&e.touches.length>1&&!function(){var _x=0,_xNum=0,_y=0,_yNum=0;_lodash2["default"].forEach(data.start,function(info,i){data.move[i]&&(_xNum++,_x+=data.move[i].x-info.x,_yNum++,_y+=data.move[i].y-info.y)}),_x=Math.ceil(_x/_xNum),_y=Math.ceil(_y/_yNum),_this2.$image.css({left:Math.min(120,Math.max(-120,_this2.defaultPosition.left+_x)),top:Math.min(120,Math.max(-120,_this2.defaultPosition.top+_y))})}()},handlePreventDefault:function(e){e.stopPropagation(),e.preventDefault()},render:function(){var from=this.state.position,showClose=this.state.showClose,_props=this.props,className=_props.className,title=_props.title,img=_props.img,_header=null;title&&(_header=_addons2["default"].createElement("div",{className:"pop_header"},_addons2["default"].createElement("p",{className:"pop_title"},title)));var _close=showClose?_addons2["default"].createElement("a",{className:"iconfont pop_close",onClick:this.doClose},String.fromCharCode(58982)):null,touchPinch=(0,_MGReactTouchEventBinder2["default"])({pinchStart:this.handlePinchStart,pinch:this.handlePinchPicture,onTouchMove:this.handleTouchMove,doubleTap:this.handleZoomPicture});return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("pop_wrapper",className),onScroll:this.handlePreventDefault,onWheel:this.handlePreventDefault},_addons2["default"].createElement("div",{className:"pop_mask",onClick:this.handleClose}),_addons2["default"].createElement("div",{className:"pop_imgPreview",style:{top:from.y,left:from.x,width:from.width,height:from.height}},_addons2["default"].createElement("image",_extends({className:"pop_image",ref:"img",src:window.rootPath(img),width:"100%",height:"100%"},touchPinch,{onWheel:this.handleWheelZoomPicture})),_close))}}),module.exports=exports["default"]}).call(exports,__webpack_require__(2))},,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_config=__webpack_require__(9),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_formValid=__webpack_require__(40),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;
exports["default"]=_addons2["default"].createClass({displayName:"Cart",mixins:[pureRenderMixin],getInitialState:function(){return _formStore2["default"].getState()},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(){this.setState(_formStore2["default"].getState())},handleChoosePayment:function(id){_formStore2["default"].dispatch({type:"paymentType",data:id})},renderCartItem:function(info,symbol){return _addons2["default"].createElement("li",{className:"fb_cartCommodity",key:info.sId},_addons2["default"].createElement("span",{className:"fb_cartTd name"},info.name),_addons2["default"].createElement("span",{className:"fb_cartTd quantity"},"Ã— "+Math.ceil(info.num)),_addons2["default"].createElement("span",{className:"fb_cartTd subTotal"},""+symbol+info.total.toFixed(2)))},renderError:function(valid){if(!valid)return null;var _shownValid=_lodash2["default"].without(valid,"tip","tipHint");return _addons2["default"].createElement("p",{className:"fb_cartError"},(0,_formValid.getErrorContent)(_shownValid[0],null))},render:function(){var _this=this,fillInfo=this.state.data,paymentInfo=this.state.payment,settings=_utils2["default"].getSettings();if(!_utils2["default"].hasSale())return null;var symbol="ï¿¥";"0"==settings.cartSymbol?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var _cartInfo=_utils2["default"].processCart(fillInfo);if(0===_cartInfo.length)return this.props.valid&&!_lodash2["default"].isEmpty(this.props.valid)?_addons2["default"].createElement("div",null,this.renderError(this.props.valid)):null;var isPay=_utils2["default"].isInnerFormPay(),totalObj={price:""+symbol+(_lodash2["default"].reduce(_cartInfo,function(a,b){return a+100*b.total},0)/100).toFixed(2),priceClass:{className:"price"}},supportPayType=_utils2["default"].getInnerFormPayInfo().payOnlineMethod||[1,2,4];return _addons2["default"].createElement("div",null,_addons2["default"].createElement("div",{className:"fb_cart"},_addons2["default"].createElement("p",{className:"fb_cartTitle"},isPay?_config.lang.cCommodityPayTitle:_config.lang.cCommodityNoPayTitle),_addons2["default"].createElement("div",{className:"fb_cartTable"},_addons2["default"].createElement("p",{className:"fb_cartTh"},_addons2["default"].createElement("span",{className:"fb_cartTd name"},_config.lang.cCommodityName),_addons2["default"].createElement("span",{className:"fb_cartTd quantity"},_config.lang.cCommodityQuantity),_addons2["default"].createElement("span",{className:"fb_cartTd subTotal"},_config.lang.cCommoditySubTotal)),_addons2["default"].createElement("ul",{className:"fb_cartCommodities"},_lodash2["default"].map(_cartInfo,function(info){return _this.renderCartItem(info,symbol)}))),_addons2["default"].createElement("p",{className:"fb_cartTotal"},isPay?_config.lang.cCommodityPayTotal(totalObj):_config.lang.cCommodityNoPayTotal(totalObj)),isPay?_addons2["default"].createElement("ul",{className:"fb_paymentMethod"},_lodash2["default"].map(_utils2["default"].SUPPORT_PAYMENT_METHOD,function(info){if(_tools2["default"].inIframe()&&1===+info.id)return null;if(supportPayType.indexOf(+info.id)===-1)return null;var _active=paymentInfo&&paymentInfo.type===+info.id;return _addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fb_pmItem","fb_pmItemNum"+supportPayType.length,{active:_active}),onClick:_this.handleChoosePayment.bind(_this,+info.id),key:"pay"+info.id},_addons2["default"].createElement("div",{className:"fb_pmImg",style:{backgroundPosition:info.bgPosition}}),_addons2["default"].createElement("p",{className:"fb_pmTitle"},info.name),_active?_addons2["default"].createElement("div",{className:"fb_pmChosenImg"}):null)})):null),this.renderError(this.props.valid))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_lodash=__webpack_require__(10),_classnames=(_interopRequireDefault(_lodash),__webpack_require__(43)),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_MGCoordinateTransform=__webpack_require__(99),_MGCoordinateTransform2=_interopRequireDefault(_MGCoordinateTransform),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Map)",mixins:[pureRenderMixin,_mixins2["default"]],render:function(){var _props=this.props,data=_props.data,componentStyle=_props.componentStyle,fw=_props.fw,itemNum=_props.itemNum,isMobile=_props.isMobile,bdCoordinate=[];bdCoordinate=data.coordinate?_MGCoordinateTransform2["default"].gcj02tobd09.apply(null,_MGCoordinateTransform2["default"].wgs84togcj02.apply(null,data.coordinate)):[104.09289837961923,30.653808371337494];var imgWidth=Math.ceil(fw-64);itemNum&&!isMobile&&(imgWidth=Math.ceil((fw-64*itemNum)/itemNum));var _mapLabel="";return data.isShowInfoBox&&bdCoordinate&&data.mapInfoContent&&(_mapLabel="&labels="+[bdCoordinate[0]+2e-4,bdCoordinate[1]+3e-4]+"&labelStyles="+[data.mapInfoContent,1,14,"0x333333","0xffffff",0]),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fbc_staticMap"},_addons2["default"].createElement("img",{width:"100%",src:location.protocol+"//api.map.baidu.com/staticimage/v2?ak=EDb798da5e9a45ddd62246439064d449&center="+bdCoordinate+"&width="+imgWidth+"&height=300&zoom="+(+(data.mapScale||9)+2)+"&markers="+bdCoordinate+"&markerStyles=m,,0xff0000"+_mapLabel})))}}),module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var x_PI=52.35987755982988,PI=3.141592653589793,a=6378245,ee=.006693421622965943,bd09togcj02=function(bd_lon,bd_lat){var x_pi=52.35987755982988,x=bd_lon-.0065,y=bd_lat-.006,z=Math.sqrt(x*x+y*y)-2e-5*Math.sin(y*x_pi),theta=Math.atan2(y,x)-3e-6*Math.cos(x*x_pi),gg_lng=z*Math.cos(theta),gg_lat=z*Math.sin(theta);return[gg_lng,gg_lat]},gcj02tobd09=function(lng,lat){var z=Math.sqrt(lng*lng+lat*lat)+2e-5*Math.sin(lat*x_PI),theta=Math.atan2(lat,lng)+3e-6*Math.cos(lng*x_PI),bd_lng=z*Math.cos(theta)+.0065,bd_lat=z*Math.sin(theta)+.006;return[bd_lng,bd_lat]},wgs84togcj02=function(lng,lat){if(out_of_china(lng,lat))return[lng,lat];var dlat=transformlat(lng-105,lat-35),dlng=transformlng(lng-105,lat-35),radlat=lat/180*PI,magic=Math.sin(radlat);magic=1-ee*magic*magic;var sqrtmagic=Math.sqrt(magic);dlat=180*dlat/(a*(1-ee)/(magic*sqrtmagic)*PI),dlng=180*dlng/(a/sqrtmagic*Math.cos(radlat)*PI);var mglat=lat+dlat,mglng=lng+dlng;return[mglng,mglat]},gcj02towgs84=function(lng,lat){if(out_of_china(lng,lat))return[lng,lat];var dlat=transformlat(lng-105,lat-35),dlng=transformlng(lng-105,lat-35),radlat=lat/180*PI,magic=Math.sin(radlat);magic=1-ee*magic*magic;var sqrtmagic=Math.sqrt(magic);return dlat=180*dlat/(a*(1-ee)/(magic*sqrtmagic)*PI),dlng=180*dlng/(a/sqrtmagic*Math.cos(radlat)*PI),mglat=lat+dlat,mglng=lng+dlng,[2*lng-mglng,2*lat-mglat]},transformlat=function(lng,lat){var ret=-100+2*lng+3*lat+.2*lat*lat+.1*lng*lat+.2*Math.sqrt(Math.abs(lng));return ret+=2*(20*Math.sin(6*lng*PI)+20*Math.sin(2*lng*PI))/3,ret+=2*(20*Math.sin(lat*PI)+40*Math.sin(lat/3*PI))/3,ret+=2*(160*Math.sin(lat/12*PI)+320*Math.sin(lat*PI/30))/3},transformlng=function(lng,lat){var ret=300+lng+2*lat+.1*lng*lng+.1*lng*lat+.1*Math.sqrt(Math.abs(lng));return ret+=2*(20*Math.sin(6*lng*PI)+20*Math.sin(2*lng*PI))/3,ret+=2*(20*Math.sin(lng*PI)+40*Math.sin(lng/3*PI))/3,ret+=2*(150*Math.sin(lng/12*PI)+300*Math.sin(lng/30*PI))/3},out_of_china=function(lng,lat){return lng<72.004||lng>137.8347||lat<.8293||lat>55.8271||!1};exports["default"]={bd09togcj02:bd09togcj02,gcj02tobd09:gcj02tobd09,wgs84togcj02:wgs84togcj02,gcj02towgs84:gcj02towgs84},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _optionNum(type,num){switch(type){case"1":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberUpper(num);case"2":return _FormGeneratorUtil.serialNumberGenerator.alphaNumberLower(num);case"3":return _FormGeneratorUtil.serialNumberGenerator.numberSimple(num);case"4":return _FormGeneratorUtil.serialNumberGenerator.romanNumberUpper(num);default:return""}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_svgBasicComponent=__webpack_require__(49),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FormGeneratorUtil=__webpack_require__(45),_FCPreview=__webpack_require__(95),_FCPreview2=_interopRequireDefault(_FCPreview),_jquery=(__webpack_require__(40),__webpack_require__(2)),_jquery2=_interopRequireDefault(_jquery),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,EXAMPLE_BG="images/form/form_picExample_bg.png",optionsLayoutMapping=[null,1,.495,.327,.2425];exports["default"]=_addons2["default"].createClass({displayName:"Component(PictureRadio&Checkbox)",mixins:[pureRenderMixin,_mixins2["default"]],componentDidMount:function(){this.popElem=document.getElementById("popwin")},isFill:function(fill,id){function fillRes(res,_fill){return returnValue&&res?_fill:res}var returnValue=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_lodash2["default"].isArray(fill)){for(var i=0,len=fill.length;i<len;i++)if(_lodash2["default"].isObject(fill[i])){if(fill[i].id===id)return fillRes(!0,fill[i])}else if(fill[i]===id)return fillRes(!0,fill[i]);return!1}return fillRes(fill===id,fill)},handleSelectOption:function(id){var data=this.props.data;_formStore2["default"].dispatch({type:"setSelector",id:data.id,value:id,isCheckbox:"picCheckbox"===data.type})},handleImgError:function(e){this.isHandleError&&(this.isHandleError=!0,e.target.src=EXAMPLE_BG)},handleShowPreview:function(image,e){e.preventDefault(),e.stopPropagation();var $target=(0,_jquery2["default"])(e.target);"IMG"===e.target.nodeName||($target=$target.next());var scrollTop=document.body.scrollTop,scrollLeft=document.body.scrollLeft;_addons2["default"].render(_addons2["default"].createElement(_FCPreview2["default"],{img:image,from:{x:$target.offset().left-scrollLeft,y:$target.offset().top-scrollTop,width:$target.width(),height:$target.height()},duration:200}),this.popElem)},renderOptions:function(){var _props=this.props,data=_props.data,fill=_props.fill,fw=_props.fw,itemNum=_props.itemNum,isMobile=_props.isMobile,mode=_props.mode,_formStyle=this.formStyle(),optionStyle=_formStyle.optionStyle,optionTipsStyle=_formStyle.optionTipsStyle,options=data.options||[],_opts=[],_temp=null,_num=0,_optionsLayout=data.optionsLayout;isMobile&&(_optionsLayout=2,3!=data.picLayout&&4!=data.picLayout||(_optionsLayout=1));var _padding=isMobile?20:60,maxImgHeight=null,groupItem=itemNum||1,itemWidth=(fw/groupItem-_padding-15)*optionsLayoutMapping[_optionsLayout]-4,_full=!1;"picCheckbox"===data.type&&1===data.isLimitChooseNum&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&fill&&fill.length>=data.chooseNumTo&&(_full=!0);for(var i=0,len=options.length;i<len;i++)if(_temp=options[i],1!==mode||_temp.sId){var _isFill=this.isFill(fill||[],_temp.sId),_limitInfo=null,_remainingFull=!1;if(data.isLimitOptions&&data.optionsQuotaInfo&&_temp.sId in data.optionsQuotaInfo){var _quotaInfo=data.optionsQuotaInfo[_temp.sId],_remaining=_quotaInfo[1]-_quotaInfo[0];if(_remaining<=0&&1===data.isHideFullOption)continue;_remaining<=0&&(_remainingFull=!0),data.isShowOptionLimit?_limitInfo=_addons2["default"].createElement("span",{className:"fbc_optionTips",style:optionTipsStyle},_config.lang.cQuotaRemainingFunc({remaining:_remaining>0?_remaining:0})):_remainingFull&&(_limitInfo=_addons2["default"].createElement("span",{className:"fbc_optionTips",style:_lodash2["default"].assign({},optionTipsStyle,{color:"#ccc"})},_config.lang.cQuotaRemainingFull))}_num++,1===+data.optionsLayout||_num%_optionsLayout!==1||1!==data.picLayout&&data.picLayout||(maxImgHeight=0,_lodash2["default"].forEach(options.slice(i,i+_optionsLayout),function(item){if(item.image&&item.image.height&&item.image.width){var _scale=1;itemWidth<item.image.width&&(_scale=itemWidth/item.image.width),maxImgHeight<item.image.height*_scale&&(maxImgHeight=item.image.height*_scale)}}));var imageInfo=_temp.image||{},image=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageUri,imageFull=imageInfo.isLink?imageInfo.linkUri:imageInfo.imageFullUri,_image=_addons2["default"].createElement("div",{className:"fbc_picOptionImage",key:"prImg",style:{minHeight:maxImgHeight}},image?[_addons2["default"].createElement("span",{className:"fbc_imgPreview iconfont",key:"preview",onClick:this.handleShowPreview.bind(this,imageFull)},String.fromCharCode(59010)),_addons2["default"].createElement("image",{className:"fbc_picOptionImg",key:"img",src:window.rootPath(image||EXAMPLE_BG),onError:this.handleImgError})]:null),CommonDom="picCheckbox"===data.type?_svgBasicComponent.CommonCheckbox:_svgBasicComponent.CommonRadio,_content=_addons2["default"].createElement("p",{key:"prContent",style:optionStyle,className:(0,_classnames2["default"])("fbc_optionVal",data.type,{checked:_isFill,disabled:!_isFill&&(_full||_remainingFull),isFull:!_isFill&&_remainingFull})},_addons2["default"].createElement(CommonDom,{className:"fbc_optionSvg",fallbackClassName:"fbc_optionIcon",checked:_isFill,disabled:!_isFill&&(_full||_remainingFull),style:{paddingTop:Math.ceil(Math.max((optionStyle.minHeight-(isMobile?20:16))/2,0))}}),_addons2["default"].createElement("span",{className:"fbc_optionLabel"},(data.isAutoNo?_optionNum(data.autoNo,_num):"")+_temp.value,_limitInfo)),_itemMain=[_image,_content];2!=data.picLayout&&4!=data.picLayout||(_itemMain=[_content,_image]),_opts.push(_addons2["default"].createElement("li",{key:"item"+i,className:(0,_classnames2["default"])("fbc_picOptionsLi",{clearB:_num%_optionsLayout===1,fbc_picOptionsChecked:_isFill}),onClick:!_full&&!_remainingFull||_isFill?this.handleSelectOption.bind(this,_temp.sId):null},_itemMain))}else console.error("component ID LOST ->."+_temp.id+" : "+_temp.value);return data.isLimitOptions&&data.optionsQuotaInfo&&0===_opts.length&&options.length>0&&_opts.push(_addons2["default"].createElement("li",{className:"fbc_emptyTip"},_config.lang.cOptionNull)),_opts},renderTips:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),_formStyle2=this.formStyle(),tipsStyle=_formStyle2.tipsStyle;if("picCheckbox"!==data.type)return null;if(1!==data.isLimitChooseNum)return null;var _tipContent="";return void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom&&void 0!==data.chooseNumTo&&""!==data.chooseNumTo?_tipContent+=data.chooseNumFrom==data.chooseNumTo?_config.lang.cOptionsLimitEqualFunc({num:data.chooseNumFrom}):_config.lang.cOptionsLimitRangeFunc({numForm:data.chooseNumFrom,numTo:data.chooseNumTo}):void 0!==data.chooseNumFrom&&""!==data.chooseNumFrom?_tipContent+=_config.lang.cOptionsMoreThanNumFunc({numForm:data.chooseNumFrom}):void 0!==data.chooseNumTo&&""!==data.chooseNumTo&&(_tipContent+=_config.lang.cOptionsLessThanNumFunc({numTo:data.chooseNumTo})),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:(valid||[]).indexOf("tip")>-1}),style:tipsStyle},_tipContent)},render:function(){var _props3=this.props,data=_props3.data,valid=_props3.valid,componentStyle=_props3.componentStyle,isMobile=_props3.isMobile,_optionsLayout=data.optionsLayout;return isMobile&&(_optionsLayout=2,3!=data.picLayout&&4!=data.picLayout||(_optionsLayout=1)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid),_addons2["default"].createElement("ul",{className:(0,_classnames2["default"])("fbc_content",_optionsLayout?"layout-"+_optionsLayout:"",{fbc_picOptionContent_half:3==data.picLayout||4==data.picLayout})},this.renderOptions(),_addons2["default"].createElement("li",{className:"clearB"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _arrayBufferToBase64(buffer){for(var binary="",bytes=new Uint8Array(buffer),len=bytes.byteLength,i=0;i<len;i++)binary+=String.fromCharCode(bytes[i]);return window.btoa(binary)}function orientation(file,callback){var fileReader=new FileReader;fileReader.onloadend=function(e){var base64img="data:"+file.type+";base64,"+_arrayBufferToBase64(fileReader.result),scanner=new DataView(fileReader.result),idx=0,value=1;if(fileReader.result.length<2||65496!=scanner.getUint16(idx))return void(callback&&callback({e:e,base64img:base64img,value:value}));idx+=2;for(var maxBytes=scanner.byteLength;idx<maxBytes-2;){var uint16=scanner.getUint16(idx);switch(idx+=2,uint16){case 65505:var exifLength=scanner.getUint16(idx);maxBytes=exifLength-idx,idx+=2;break;case 274:value=scanner.getUint16(idx+6,!1),maxBytes=0}}callback&&callback({e:e,base64img:base64img,value:value})},fileReader.readAsArrayBuffer(file)}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_utils=__webpack_require__(22);__webpack_require__(64),__webpack_require__(65),__webpack_require__(66),__webpack_require__(67);var pureRenderMixin=_addons2["default"].addons.PureRenderMixin;global.jQuery=global.$=_jquery2["default"];var rotation={1:"rotate(0deg)",3:"rotate(180deg)",6:"rotate(90deg)",8:"rotate(270deg)"};exports["default"]=_addons2["default"].createClass({displayName:"Component(PictureAttachment)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return this.imgOrientation={},{tipHint:!1,previewImg:{}}},componentWillReceiveProps:function(nextProps){var valid=nextProps.valid;valid&&!this.isHint&&valid.indexOf("tipHint")>-1&&this.props.valid.indexOf("tipHint")===-1&&(this.isHint=!0,this.setState({tipHint:!0}))},componentDidMount:function(){var _this=this;this.bindFileUploader(),this.hintTimeout=setTimeout(function(){_this.isHint=!1,_this.setState({tipHint:!1})},1200)},componentDidUpdate:function(){var _this2=this;this.bindFileUploader(),this.hintTimeout=setTimeout(function(){_this2.isHint=!1,_this2.setState({tipHint:!1})},1200)},componentWillUnmount:function(){clearTimeout(this.hintTimeout)},_getFileNum:function(){var _props=this.props,data=_props.data,fill=_props.fill,_componentLength=data.isAcceptMultipleFile?(fill||[]).length+1:1;return data.isAcceptMultipleFile&&data.fileNumber&&(_componentLength=Math.min(_componentLength,+data.fileNumber)),_componentLength},_beautySize:function(bytes){if(!bytes)return" - ";for(var unitList=["B","KB","MB","GB"],unitCursor=0,_beauty=bytes;_beauty>1024;)unitCursor++,_beauty/=1024;return _beauty.toFixed(2)+unitList[unitCursor]},bindFileUploader:function(){if(!_utils.isOldIE)for(var _componentLength=this._getFileNum(),self=this,i=0;i<_componentLength;i++)if(this.refs["fileComponent"+i]){var fileCp=this.refs["fileComponent"+i].getDOMNode(),$fileCp=(0,_jquery2["default"])(fileCp);$fileCp.fileupload({dataType:"json",replaceFileInput:!1,add:function(e,data){var idx=e.target.getAttribute("data-idx");self.handleGetDisplayImage(e.target.files[0],idx,self.changePreviewImage)},drop:function(e){return!1}})}},handleRemoveFile:function(fIdx){var newPreview=_lodash2["default"].assign({},this.state.previewImg);delete newPreview[fIdx],_formStore2["default"].dispatch({type:"removeFile",id:this.props.data.id,idx:fIdx}),this.setState({previewImg:newPreview})},handleChangeFile:function(idx,e){if(_utils.isOldIE){var Files=e.target,filePath=_lodash2["default"].last(Files.value.split(/[\\\/]/g)),size=null;try{Files.select();var realPath=document.selection.createRange().text,fso=new ActiveXObject("Scripting.FileSystemObject"),file=fso.GetFile(realPath);size=file.size}catch(e){}this.handleAddFile({name:filePath,size:size},idx)}},changePreviewImage:function(img,idx,imageOrientation){var newPreview=_lodash2["default"].assign({},this.state.previewImg);this.imgOrientation[idx]=rotation[imageOrientation||1],img!==newPreview[idx]&&(newPreview[idx]=img,this.setState({previewImg:newPreview}))},handleGetDisplayImage:function(file,i,callback){var _this3=this;window.FileReader?!function(){var self=_this3,previewImg=null,imageOrientation=1;new Promise(function(_resolve,_reject){if("image"===(file.type||"").split("/")[0].toLowerCase())try{orientation(file,_resolve)}catch(e){_reject()}else _reject()})["catch"](function(){return self.handleAddFile(file,i,null),!1}).then(function(_ref){var base64img=(_ref.e,_ref.base64img),value=_ref.value;return previewImg=base64img,imageOrientation=value,new Promise(function(_resolve,_reject){var _img=new Image;_img.src=base64img,_img.onload=function(){_resolve({width:this.width,height:this.height})},_img.onerror=function(){_resolve({width:0,height:0})}})}).then(function(imgSize){imgSize!==!1&&self.handleAddFile(file,i,imgSize,imageOrientation,callback,previewImg)})}():this.handleAddFile(file,i,null)},handleAddFile:function(file,idx,imageSize,imageOrientation,cb,previewImg){_formStore2["default"].dispatch({type:"addFile",id:this.props.data.id,value:file,idx:idx,isImage:!0,imageSize:imageSize,imageOrientation:imageOrientation,callback:cb,imgData:previewImg})},renderTips:function(){var _props2=this.props,data=_props2.data,valid=(_props2.fill,_props2.valid),_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,wrapperError=!1,isErrorTip=(valid||[]).indexOf("tip")>-1,picResolution=[];if(data.isLimitPicResolution){if(data.picMinWidth||data.picMaxWidth){var widthVal="";data.picMinWidth&&data.picMaxWidth?widthVal=data.picMinWidth+"px~"+data.picMaxWidth+"px":data.picMinWidth?widthVal=">"+data.picMinWidth+"px":data.picMaxWidth&&(widthVal="<"+data.picMaxWidth+"px"),picResolution.push(_config.lang.cPicAttachmentTipsWidth({value:widthVal}))}if(data.picMinHeight||data.picMaxHeight){var heightVal="";data.picMinHeight&&data.picMaxHeight?heightVal=data.picMinHeight+"px~"+data.picMaxHeight+"px":data.picMinHeight?heightVal=">"+data.picMinHeight+"px":data.picMaxHeight&&(heightVal="<"+data.picMaxHeight+"px"),picResolution.push(_config.lang.cPicAttachmentTipsHeight({value:heightVal}))}}return picResolution=picResolution.join(", "),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fbc_tips",{error:isErrorTip&&wrapperError}),style:tipsStyle},_config.lang.cPicAttachmentTips({resolution:picResolution?", "+picResolution:""}))},render:function(){for(var _props3=this.props,data=_props3.data,fill=_props3.fill,valid=_props3.valid,componentStyle=_props3.componentStyle,style=_props3.style,itemNum=_props3.itemNum,isMobile=this.props.isMobile,_uploaderList=[],_componentLength=this._getFileNum(),fileMax=data.isLimitFileSize&&data.fileSize?data.fileSize:500,_hasError=!1,i=0;i<_componentLength;i++){var info=(fill||[])[i],_uploaderContent=null;info?info.error&&(_hasError=!0,_uploaderContent=[_addons2["default"].createElement("p",{className:"fbc_paAddTitle",key:"addTitle"},_config.lang.cPicAttachmentAddTitle),_addons2["default"].createElement("p",{className:"fbc_paAddTips error",key:"addTips"},_config.lang["cUploadFailed"+info.error])]):_uploaderContent=[_addons2["default"].createElement("p",{className:"fbc_paAddTitle",key:"addTitle"},_config.lang.cPicAttachmentAddTitle),_addons2["default"].createElement("p",{className:"fbc_paAddTips",key:"addTips"},_config.lang.cPicAttachmentAddTips({max:fileMax}))];var _dIndex=info?info.idx:_formStore2["default"].getPreparedFileIdx(data.id),_fpIndex=info?info.idx:null;_uploaderList.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_paItem",{add:!info,selected:info,error:info&&info.error}),key:"picFileUpload"+_dIndex},_addons2["default"].createElement("div",{className:"fbc_paItem_wrapper"},info&&!info.error?_addons2["default"].createElement("div",{className:"fbc_paImgPreview"},info&&!isMobile?_addons2["default"].createElement("a",{className:"fbc_pafRemove iconfont",title:_config.lang.cRemoveFile,onClick:this.handleRemoveFile.bind(this,_dIndex)},String.fromCharCode(58982)):null,isMobile?null:_addons2["default"].createElement("span",{className:"fbc_reUploadBtn"},_config.lang.cPicAttachmentReload),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_selectedImage",{fbc_selectedImagePreview:this.state.previewImg[_dIndex]}),style:{backgroundImage:"url("+(this.state.previewImg[_dIndex]||"./images/form/IE8_ImgUploadSuccess.png")+")",transform:this.imgOrientation[_dIndex]}})):_addons2["default"].createElement("div",{className:"fbc_paImgPlaceholder"},_addons2["default"].createElement("i",{className:"iconfont fbc_paImgState"},info&&info.error?String.fromCharCode(58938):String.fromCharCode(58997))),_addons2["default"].createElement("div",{className:"fbc_paContentInfo"},_uploaderContent),_addons2["default"].createElement("input",{className:"fbc_ufInput",type:"file",size:"1",capture:isMobile?"camera":null,accept:isMobile&&!window.IN_WECHAT?"image/bmp,image/jpeg,image/png,image/gif":null,ref:"fileComponent"+i,"data-idx":_fpIndex,onChange:this.handleChangeFile.bind(this,_fpIndex)})),info&&isMobile?_addons2["default"].createElement("div",{className:"fbc_pafRemoveWrapper"},_addons2["default"].createElement("a",{className:"fbc_pafRemove",title:_config.lang.cRemoveFile,onClick:this.handleRemoveFile.bind(this,_dIndex)},_config.lang.cRemoveFile)):null))}var cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth="20%",cpBodyStyle.width="80%")),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderTips(),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("ul",{className:"fbc_pictureAttachment"},_uploaderList,_addons2["default"].createElement("li",{className:"clearB"}))))}}),module.exports=exports["default"]}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_FCPreview=__webpack_require__(95),_FCPreview2=_interopRequireDefault(_FCPreview),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_FormImagesGroupLayout=__webpack_require__(103),_FormImagesGroupLayout2=_interopRequireDefault(_FormImagesGroupLayout),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,_queue=Promise.resolve(!0),_EMPTY_SRC="images/form/picStatic_imgPlaceholder.png",LazyImg=_addons2["default"].createClass({displayName:"LazyImg",mixins:[pureRenderMixin],getInitialState:function(){return{}},componentDidMount:function(){var self=this,_srcImage=this.props.src;_queue=_queue.then(function(){return _MGDebugger2["default"].log("in!!!"),new Promise(function(resolve){var _img=new Image;_img.onload=function(){_MGDebugger2["default"].log("in...>",_srcImage),self.setState({src:_srcImage}),resolve(!0)},_img.onerror=function(){resolve(!1)},_img.src=_srcImage})})},render:function(){var _props=this.props,width=(_props.src,_props.onError,_props.width),props=_objectWithoutProperties(_props,["src","onError","width"]);return _addons2["default"].createElement("image",_extends({src:window.rootPath(this.state.src?this.state.src:_EMPTY_SRC)},props,{width:this.state.src?width:null}))}});exports["default"]=_addons2["default"].createClass({displayName:"Component(Pictures)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return this.popElem=document.getElementById("popwin"),this.debouceCalc=_lodash2["default"].debounce(this.handleCalcSize,200),this.picturesInfo={},{isOpen:!1}},componentDidMount:function(){this.handleCalcSize()},componentDidUpdate:function(){this.handleCalcSize()},handleCalcSize:function(){var _this=this,_props2=this.props,data=_props2.data,fw=_props2.fw,itemNum=_props2.itemNum,isMobile=_props2.isMobile,trueWidth=Math.floor(fw/(itemNum||1)),_PADDING_COMPONENT=isMobile?10:30;1!==data.picPaddingLRNone&&(trueWidth-=2*_PADDING_COMPONENT);var picGap=data.picPadding||5,pictures=data.pictures,_d=[],_hasPicture=!1;if(_lodash2["default"].forEach(pictures,function(pic){if(pic)return _hasPicture=!0,!1}),pictures&&_hasPicture){for(var process=_FormImagesGroupLayout2["default"]._getSingleImageSize,_loop=function(i){if(pictures[i]){var pic=pictures[i];pic.width&&pic.height||(_this.picturesInfo[i]?pic=_lodash2["default"].assign({},pictures[i],{width:_this.picturesInfo[i].width,height:_this.picturesInfo[i].height}):_tools2["default"].getImageSize(pic.imageUri||pic.linkUri).done(function(info){_this.picturesInfo[i]={width:info.width,height:info.height},_this.debouceCalc()})),_d.push(_lodash2["default"].assign({id:i},pic))}else _d.push({width:"auto",height:"auto",id:i})},i=0;i<(+data.picNumber||1);i++)_loop(i);var _rows=null;+data.picNumber>=2&&(process=_FormImagesGroupLayout2["default"]._getImagesColumnLayoutSize,+data.picNumber>2&&data.picLayout&&1!==data.picLayout&&(process=_FormImagesGroupLayout2["default"]._getImagesMultiOneLayoutSize,_rows=[[0,1,2],[0,[1,2]],[[0,1],2]],4===+data.picNumber&&(_rows=[[0,1,2,3],[0,[1,2,3]],[[0,1,2],3]]),_rows=_rows[(data.picLayout||1)-1]));var calcRes=process(_d,{width:trueWidth,gap:picGap,layout:_rows});if(calcRes){_lodash2["default"].forEach(calcRes.imgSize,function(info){if(_this.refs["pic"+info.id]){
var dom=_this.refs["pic"+info.id].getDOMNode();(0,_jquery2["default"])(dom).css({width:info.width,height:info.height})}});var _paddingInfo={paddingLeft:1===data.picPaddingLRNone?0:_PADDING_COMPONENT,paddingRight:1===data.picPaddingLRNone?0:_PADDING_COMPONENT};1===pictures.length&&pictures[0].picAlign&&2!==pictures[0].picAlign?_paddingInfo[1===pictures[0].picAlign?"paddingRight":"paddingLeft"]+=2*calcRes.imgRLPadding:(_paddingInfo.paddingLeft+=calcRes.imgRLPadding,_paddingInfo.paddingRight+=calcRes.imgRLPadding),(0,_jquery2["default"])(this.refs.staticPic.getDOMNode()).css(_paddingInfo)}}},_linkProcess:function(jumpTo){var link=_lodash2["default"].trim(jumpTo||""),linkParseUrl=(0,_tools.parseURL)(link),currentLink=(0,_tools.parseURL)(location.href);return linkParseUrl.protocol&&linkParseUrl.host!==currentLink.host||(_MGString2["default"].isUrl(link)?link.match(/^(http:\/\/|https:\/\/)/)||(link="http://"+link):link=""),link},handleToggleFoldText:function(){this.setState({isOpen:!this.state.isOpen})},handleShowPreview:function(image,e){var $target=(0,_jquery2["default"])(e.target),scrollTop=document.body.scrollTop,scrollLeft=document.body.scrollLeft;_addons2["default"].render(_addons2["default"].createElement(_FCPreview2["default"],{img:image,from:{x:$target.offset().left-scrollLeft,y:$target.offset().top-scrollTop,width:$target.width(),height:$target.height()},duration:200}),this.popElem)},handleOpenLinkInPage:function(link,e){if(link){var win=window.open(link,"_blank");win.focus()}else this.handleShowPreview(e)},renderPictures:function(){for(var data=this.props.data,picNum=+data.picNumber||1,picLayout=data.picLayout||1,pictures=data.pictures||[],picPaddingHalf=(data.picPadding||5)/2,items=[],i=0;i<picNum;i++){var style={};picPaddingHalf&&(2==picNum?0==i?style={paddingRight:picPaddingHalf}:1==i&&(style={paddingLeft:picPaddingHalf}):3==picNum?0==i?(style={paddingRight:picPaddingHalf},3==picLayout&&(style.paddingBottom=picPaddingHalf)):1==i?1==picLayout?style={paddingLeft:picPaddingHalf,paddingRight:picPaddingHalf}:2==picLayout?style={paddingLeft:picPaddingHalf,paddingBottom:picPaddingHalf}:3==picLayout&&(style={paddingRight:picPaddingHalf,paddingTop:picPaddingHalf}):2==i&&(style={paddingLeft:picPaddingHalf},2==picLayout&&(style.paddingTop=picPaddingHalf)):4==picNum&&(0==i?(style={paddingRight:picPaddingHalf},3==picLayout&&(style.paddingBottom=picPaddingHalf)):1==i?1==picLayout?style={paddingLeft:picPaddingHalf,paddingRight:picPaddingHalf}:2==picLayout?style={paddingLeft:picPaddingHalf,paddingBottom:picPaddingHalf}:3==picLayout&&(style={paddingRight:picPaddingHalf,paddingTop:picPaddingHalf,paddingBottom:picPaddingHalf}):2==i?1==picLayout?style={paddingLeft:picPaddingHalf,paddingRight:picPaddingHalf}:2==picLayout?style={paddingTop:picPaddingHalf,paddingLeft:picPaddingHalf,paddingBottom:picPaddingHalf}:3==picLayout&&(style={paddingRight:picPaddingHalf,paddingTop:picPaddingHalf}):3==i&&(style={paddingLeft:picPaddingHalf},2==picLayout&&(style.paddingTop=picPaddingHalf))));var image=pictures[i]?pictures[i].isLink?pictures[i].linkUri:pictures[i].imageUri:null,_noImgStyle={};picPaddingHalf&&!image&&3==picNum&&(2==picLayout&&0==i||3==picLayout&&2==i)&&(_noImgStyle={paddingTop:60+picPaddingHalf,paddingBottom:60+picPaddingHalf}),picPaddingHalf&&!image&&4==picNum&&(2==picLayout&&0==i||3==picLayout&&3==i)&&(_noImgStyle={paddingTop:110+2*picPaddingHalf,paddingBottom:110+2*picPaddingHalf});var jumpLink=null;pictures[i]&&pictures[i].isJumpTo&&(jumpLink=this._linkProcess(pictures[i].jumpTo)),items.push(_addons2["default"].createElement("div",{className:"fbc_pictureImage",key:"pic"+i,style:style,ref:"pic"+i},_addons2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_piWrapper:!0,"no-image":!image}),style:_noImgStyle},_addons2["default"].createElement(LazyImg,{className:"fbc_piImg",style:{cursor:jumpLink?"pointer":"default"},src:window.rootPath(image||_EMPTY_SRC),onClick:jumpLink?this.handleOpenLinkInPage.bind(this,jumpLink):null,onError:this.handleImgError,width:"100%"}))))}var _items=items;3==picNum&&2==picLayout?_items=[_addons2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup0"},items[0]),_addons2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup1"},items[1],items[2])]:3==picNum&&3==picLayout?_items=[_addons2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup0"},items[0],items[1]),_addons2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup1"},items[2])]:4==picNum&&2==picLayout?_items=[_addons2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup0"},items[0]),_addons2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup1"},items[1],items[2],items[3])]:4==picNum&&3==picLayout&&(_items=[_addons2["default"].createElement("div",{className:"fbc_pictureGroup small",key:"picGroup0"},items[0],items[1],items[2]),_addons2["default"].createElement("div",{className:"fbc_pictureGroup big",key:"picGroup1"},items[3])]);var _optionClass={fbc_pictureWrapper:!0};return _optionClass["images-"+picNum]=!0,picLayout&&(_optionClass["layout-"+picLayout]=!0),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])(_optionClass),ref:"staticPic"},_items,_addons2["default"].createElement("div",{className:"clearB"}))},render:function(){var _props3=this.props,data=_props3.data,componentStyle=_props3.componentStyle,isOpen=this.state.isOpen,_hasPicture=!1;_lodash2["default"].forEach(data.pictures,function(pic){if(pic)return _hasPicture=!0,!1});var _formStyle=this.formStyle(),describeStyle=_formStyle.describeStyle;componentStyle||(componentStyle={}),componentStyle.paddingTop=data.picPaddingTB||5,componentStyle.paddingBottom=data.picPaddingTB||5;var _describe=null;if(data.isAddDescribe)if(describeStyle=_lodash2["default"].assign(describeStyle,{textAlign:["","left","center","right"][data.picSubTitleAlign]}),data.isDescribeTextFold){var _foldText=null;isOpen?_foldText=this.renderRichContent(data.picDescribe||""):data.describeFoldText&&(_foldText=_addons2["default"].createElement("span",{className:"fbc_foldTips"},this.renderRichContent(data.describeFoldText||""))),_describe=_addons2["default"].createElement("p",{className:(0,_classnames2["default"])({fbc_foldContent:!0,hasFoldText:_foldText,"is-open":isOpen}),style:describeStyle},_foldText,_addons2["default"].createElement("a",{className:"fbc_foldBtn",onClick:this.handleToggleFoldText},isOpen?_config.lang.cFoldText:_config.lang.cUnFoldText,_addons2["default"].createElement("i",{className:"iconfont fbc_foldIcon"},isOpen?String.fromCharCode(58984):String.fromCharCode(58983))))}else _describe=_addons2["default"].createElement("p",{className:"fbc_picDescribe",style:describeStyle},this.renderRichContent(data.picDescribe||""));return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type,{fb_picture_none:!data.pictures||!_hasPicture,fb_staticPicPaddingNone:1===data.picPaddingLRNone}),id:data.id,style:componentStyle},this.renderPictures(),_describe)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _getSingleImageSize(imgSize,_ref){var width=_ref.width,_imageRLPadding=(_ref.gap,0),singleImg=imgSize[0],_resSize=[];return"auto"!==singleImg.width&&(singleImg.width<width?(_resSize[0]=_lodash2["default"].assign({},singleImg),_imageRLPadding=Math.floor((width-singleImg.width)/2)):_resSize[0]={width:width,height:Math.floor(singleImg.height/singleImg.width*width)},{imgSize:_resSize,imgRLPadding:Math.max(_imageRLPadding,0),isSingle:!0})}function widthTotal(pre,info){return pre+info.width}function _getImagesColumnLayoutSize(imgSize,_ref2){var width=_ref2.width,gap=_ref2.gap,_res=imgSize.slice(),_hasAutoHeight=!1,maxHeight=Math.max.apply(null,_lodash2["default"].map(imgSize,function(si){return"auto"===si.height&&(_hasAutoHeight=!0),"auto"===si.height?0:si.height})),_hasAutoItem=[];_res=_lodash2["default"].map(_res,function(info,i){return maxHeight===info.height?info:"auto"===info.height?(_hasAutoItem.push(i),info):_lodash2["default"].assign({},info,{width:info.width/info.height*maxHeight,height:maxHeight})});var _totalWidth=null,_autoContentWidth=120;if(_hasAutoItem.length>0){var _trueWidth=width-gap*(imgSize.length-1),currentWidth=_lodash2["default"].reduce(_res,function(pre,a){var d=a.width;return"auto"===a.width&&(d=0),pre+d},0);currentWidth>=_trueWidth?(_totalWidth=currentWidth,_lodash2["default"].forEach(_hasAutoItem,function(id){_totalWidth+=_autoContentWidth,_res[id]=_lodash2["default"].assign({},_res[id],{width:_autoContentWidth,height:maxHeight})})):!function(){_totalWidth=_trueWidth;var preWidth=Math.floor((_totalWidth-currentWidth)/_hasAutoItem.length),_deltaWidth=0;preWidth<_autoContentWidth&&(_deltaWidth=_autoContentWidth-preWidth),_lodash2["default"].forEach(_hasAutoItem,function(id){_totalWidth+=_deltaWidth,_res[id]=_lodash2["default"].assign({},_res[id],{width:preWidth,height:maxHeight||(_hasAutoHeight?"auto":maxHeight)})})}()}else _totalWidth=_lodash2["default"].reduce(_res,widthTotal,0);var _scale=1,_imageRLPadding=void 0;return _totalWidth>=width-gap*(imgSize.length-1)?(_scale=(width-gap*(imgSize.length-1))/_totalWidth,_res=_lodash2["default"].map(_res,function(info){return _lodash2["default"].assign({},info,{width:Math.floor(info.width*_scale),height:Math.floor(info.height*_scale)})})):_res=_lodash2["default"].map(_res,function(info){return _lodash2["default"].assign({},info,{width:Math.floor(info.width),height:Math.floor(info.height)})}),_imageRLPadding=(width-(_lodash2["default"].reduce(_res,widthTotal,0)+gap*(imgSize.length-1))-2)/2,{imgSize:_res,imgRLPadding:Math.max(_imageRLPadding,0),totalWidth:_totalWidth}}function _getImagesMultiOneLayoutSize(imgSize,_ref3){var width=_ref3.width,gap=_ref3.gap,layout=_ref3.layout,_multiIdx=-1,_hasSingleAutoItem=null,_hasMultiAutoItem=[],_hasAutoSize=!1,componentColumn=_lodash2["default"].map(layout,function(info,idx){if(_lodash2["default"].isArray(info))return _multiIdx=idx,_lodash2["default"].map(info,function(id){var data=_lodash2["default"].find(imgSize,{id:id});return"auto"===data.width&&(_hasAutoSize=!0,_hasMultiAutoItem.push(id)),data});var data=_lodash2["default"].find(imgSize,{id:info});return"auto"===data.width&&(_hasAutoSize=!0,_hasSingleAutoItem=info),data});if(_multiIdx>-1){var _ret2=function(){var _multiImages=componentColumn[_multiIdx],_oneImage=componentColumn[1-_multiIdx],_total=_lodash2["default"].reduce(_multiImages,function(pre,a){var b=a.width;return"auto"===b&&(_hasAutoSize=!0,b=0),pre+b},0),_avgWidth=0;_multiImages.length-_hasMultiAutoItem.length>0?(_avgWidth=_total/(_multiImages.length-_hasMultiAutoItem.length),_avgWidth>width-gap&&(_avgWidth=width-gap)):_hasMultiAutoItem.length===_multiImages.length&&(_avgWidth="auto"),_multiImages=_lodash2["default"].map(_multiImages,function(info){return"auto"===info.height?(_hasAutoSize=!0,info):_lodash2["default"].assign({},info,{height:Math.floor(info.height/info.width*_avgWidth),width:Math.floor(_avgWidth)})});var _multiTotalHeight=_lodash2["default"].reduce(_multiImages,function(pre,a){var b=a.height;return"auto"===b&&(_hasAutoSize=!0,b=0),pre+b},0)||0;0===_multiTotalHeight&&_hasMultiAutoItem.length===_multiImages.length&&(_multiTotalHeight="auto");var _maxHeight=null;if(null!==_hasSingleAutoItem)_maxHeight="auto"===_multiTotalHeight?0:_multiTotalHeight+gap*(_multiImages.length-1),_oneImage="auto"===_avgWidth?_lodash2["default"].assign({},_oneImage,{width:"auto",height:"auto"}):width-gap<_avgWidth?_lodash2["default"].assign({},_oneImage,{width:0,height:0}):_lodash2["default"].assign({},_oneImage,{width:Math.floor(width-gap-_avgWidth),height:Math.floor(_maxHeight)});else if("auto"===_multiTotalHeight){var _remainWidth=width-gap-("auto"===_avgWidth?0:_avgWidth);_remainWidth<_oneImage.width&&(_oneImage=_lodash2["default"].assign({},_oneImage,{width:_remainWidth,height:_oneImage.height/_oneImage.width*_remainWidth})),_maxHeight=_oneImage.height}else _maxHeight=Math.max(_oneImage.height,_multiTotalHeight+gap*(_multiImages.length-1));_hasMultiAutoItem&&_hasMultiAutoItem.length>0&&("auto"===_multiTotalHeight?("auto"===_avgWidth&&(_avgWidth=width-gap-_oneImage.width),_lodash2["default"].forEach(_hasMultiAutoItem,function(info){var idx=_lodash2["default"].findIndex(_multiImages,{id:info});_multiImages[idx]=_lodash2["default"].assign({},_multiImages[idx],{width:_avgWidth,height:(_maxHeight-gap*(_multiImages.length-1))/_hasMultiAutoItem.length})})):_maxHeight<=_multiTotalHeight?_lodash2["default"].forEach(_hasMultiAutoItem,function(info){_multiImages[info]=_lodash2["default"].assign({},_multiImages[info],{width:0,height:0})}):(0===_avgWidth&&(_avgWidth=width-gap-("auto"===_oneImage.width?0:_oneImage.width)),_lodash2["default"].forEach(_hasMultiAutoItem,function(info){var idx=_lodash2["default"].findIndex(_multiImages,{id:info});_multiImages[idx]=_lodash2["default"].assign({},_multiImages[idx],{width:_avgWidth,height:(_maxHeight-gap*(_multiImages.length-1)-_multiTotalHeight)/_hasMultiAutoItem.length})}),_multiTotalHeight=_oneImage.height-gap*(_multiImages.length-1)));var _multiScale=1;"auto"!==_multiTotalHeight&&0!==_multiTotalHeight&&(_multiScale=(_maxHeight-gap*(_multiImages.length-1))/_multiTotalHeight);var _oneScale=1;"auto"!==_oneImage.height&&0!==_oneImage.height&&(_oneScale=_maxHeight/_oneImage.height),_multiImages=_lodash2["default"].map(_multiImages,function(info){return _lodash2["default"].assign({},info,{height:Math.floor(info.height*_multiScale),width:Math.floor(info.width*_multiScale)})}),_oneImage=_lodash2["default"].assign({},_oneImage,{height:Math.floor(_oneImage.height*_oneScale),width:Math.floor(_oneImage.width*_oneScale)});var _multiWidth=0;"auto"!==_avgWidth&&(_avgWidth*=_multiScale,_multiWidth=Math.floor(_avgWidth));for(var _totalWidth=_oneImage.width+_multiWidth,_scale=1,_imageRLPadding=void 0;_totalWidth>width-gap;){if(_scale=(width-gap)/_totalWidth,_multiImages=_lodash2["default"].map(_multiImages,function(info){return"auto"===info.height?info:_lodash2["default"].assign({},info,{height:Math.floor(info.height*_scale),width:Math.floor(info.width*_scale)})}),"auto"!==_oneImage.height&&(_oneImage=_lodash2["default"].assign({},_oneImage,{height:Math.floor(_oneImage.height*_scale),width:Math.floor(_oneImage.width*_scale)}),"auto"!==_multiTotalHeight&&(_multiTotalHeight=_lodash2["default"].reduce(_multiImages,function(pre,a){var b=a.height;return"auto"===b&&(_hasAutoSize=!0,b=0),pre+b},0)||0,_maxHeight=Math.max(_oneImage.height,_multiTotalHeight+gap*(_multiImages.length-1)),_oneImage.height!==_maxHeight))){var _fixedHeight=_maxHeight/_oneImage.height;_oneImage=_lodash2["default"].assign({},_oneImage,{height:Math.floor(_oneImage.height*_fixedHeight),width:Math.floor(_oneImage.width*_fixedHeight)})}_avgWidth*=_scale,_multiWidth=Math.floor(_avgWidth),_totalWidth=("auto"===_oneImage.width?0:_oneImage.width)+_multiWidth}return _imageRLPadding=Math.floor((width-_totalWidth-gap-2)/2),{v:{imgSize:1===_multiIdx?[_oneImage].concat(_multiImages):_multiImages.concat(_oneImage),imgRLPadding:Math.max(_imageRLPadding,0),totalWidth:_totalWidth}}}();if("object"===("undefined"==typeof _ret2?"undefined":_typeof(_ret2)))return _ret2.v}return!1}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash);exports["default"]={_getSingleImageSize:_getSingleImageSize,_getImagesColumnLayoutSize:_getImagesColumnLayoutSize,_getImagesMultiOneLayoutSize:_getImagesMultiOneLayoutSize},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(StaticText)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return{isOpen:!1}},handleToggleFoldText:function(){this.setState({isOpen:!this.state.isOpen})},render:function(){var _props=this.props,data=_props.data,componentStyle=_props.componentStyle,isOpen=this.state.isOpen,_formStyle=this.formStyle(),describeStyle=_formStyle.describeStyle,_text=null;if(data.isFoldText){var _foldText=null;isOpen?_foldText=this.renderRichContent(data.title||""):data.foldContent&&(_foldText=_addons2["default"].createElement("span",{className:"fbc_foldTips"},this.renderRichContent(data.foldContent||""))),_text=_addons2["default"].createElement("p",{className:(0,_classnames2["default"])({fbc_foldContent:!0,hasFoldText:_foldText,"is-open":isOpen}),style:describeStyle},_foldText,_addons2["default"].createElement("a",{className:"fbc_foldBtn",onClick:this.handleToggleFoldText},isOpen?_config.lang.cFoldText:_config.lang.cUnFoldText,_addons2["default"].createElement("i",{className:"iconfont fbc_foldIcon"},isOpen?String.fromCharCode(58984):String.fromCharCode(58983))))}else _text=_addons2["default"].createElement("p",{className:"fbc_staticText",style:describeStyle},this.renderRichContent(data.title||""));return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentBorder"}),_text)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Separator)",mixins:[pureRenderMixin,_mixins2["default"]],render:function(){var _props=this.props,data=_props.data,componentStyle=_props.componentStyle,hrClass=["","dotted","dashed","solid","double"],hrStyle={};return data.isNoPadding&&(hrStyle={marginLeft:0,marginRight:0}),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentBorder"}),this.renderTitle(data),_addons2["default"].createElement("hr",{className:"fbc_separatorHr "+hrClass[data.borderType],style:hrStyle}),this.renderSubtitle(data))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(AuthCode)",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(e){formStore.dispatch({type:"setValue",id:this.props.data.id,value:e.target.value})},handleBlur:function(e){formStore.dispatch({type:"inputBlur",id:this.props.data.id,value:e.target.value})},render:function(){var _props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,_formStyle=this.formStyle(),tipsStyle=_formStyle.tipsStyle,inputStyle=_formStyle.inputStyle;return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentBorder"}),this.renderTitle(data),this.renderSubtitle(data),_addons2["default"].createElement("p",{className:"fbc_tips",style:tipsStyle},_config.lang.cAuthCodeTips),_addons2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:10*(data.cpWidth||8)+"%"}},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),ref:"input",type:"text",spellCheck:!1,style:inputStyle,onChange:this.handleChange,onBlur:this.handleBlur,value:fill||""}),_addons2["default"].createElement("span",{className:"fbc_acImg"})))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_MGVideoParser=__webpack_require__(108),_MGVideoParser2=_interopRequireDefault(_MGVideoParser),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Video)",mixins:[pureRenderMixin,_mixins2["default"]],renderIframe:function(url){var info=(0,_MGVideoParser2["default"])(url);if(!info)return null;var link=null;switch(info.type){case"youtube":link="https://www.youtube.com/embed/"+info.id;break;case"vimeo":link="https://player.vimeo.com/video/"+info.id;break;case"youku":link="http://player.youku.com/embed/"+info.id;break;case"tudou":link="http://www.tudou.com/programs/view/html5embed.action?code="+info.id+"&autoPlay=false&playType=AUTO";break;case"qq":link="http://v.qq.com/iframe/player.html?vid="+info.id+"&tiny=0&auto=0"}var _props=this.props,fw=_props.fw,itemNum=_props.itemNum,isMobile=_props.isMobile,iFrameHeight=400;return iFrameHeight=!itemNum||isMobile?Math.ceil(9*(fw-60)/16+30):Math.ceil((fw-60*itemNum)/itemNum*9/16+18),null===link?"bilibili"===info.type?_addons2["default"].createElement("embed",{height:iFrameHeight,width:"100%",quality:"high",allowFullScreen:"true",type:"application/x-shockwave-flash",src:"//static.hdslb.com/miniloader.swf",flashVars:"aid="+info.id+"&page=1",pluginSpage:"//www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash"}):null:_addons2["default"].createElement("iframe",{width:"100%",height:iFrameHeight,src:link,frameBorder:"0",allowFullScreen:!0,webkitAllowFullScreen:!0,MozAllowFullscreen:!0,scrolling:"no"})},render:function(){var _props2=this.props,data=_props2.data,componentStyle=_props2.componentStyle;return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},this.renderIframe(data.staticVideoUrl))}}),module.exports=exports["default"]},function(module,exports){"use strict";function getVideoInfo(str){return youkuParser.isMatch(str)?youkuParser.getInfo(str):tudouParser.isMatch(str)?tudouParser.getInfo(str):youtubeParser.isMatch(str)?youtubeParser.getInfo(str):vimeoParser.isMatch(str)?vimeoParser.getInfo(str):qqParser.isMatch(str)?qqParser.getInfo(str):bilibiliParser.isMatch(str)?bilibiliParser.getInfo(str):null}Object.defineProperty(exports,"__esModule",{value:!0});var youtubeParser=function(){var _REG_YOUTUBE_MATCH=/(?:https?:\/{2})?(www\.)?youtube|youtu\.be/;return{isMatch:function(str){return str.match(_REG_YOUTUBE_MATCH)},getInfo:function(str){var youtubeId=null;return youtubeId=str.match("embed")?str.split(/embed\//)[1].split('"')[0]:str.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],{type:"youtube",id:youtubeId.split("#")[0]}}}}(),vimeoParser=function(){var _REG_VIMEO_MATCH=/(?:https?:\/{2})?(?:w{3}\.)?vimeo\.com/;return{isMatch:function(str){return str.match(_REG_VIMEO_MATCH)},getInfo:function(str){var temp=str.split("/"),vimeoId=temp[temp.length-1];return{type:"vimeo",id:vimeoId}}}}(),youkuParser=function(){var _REG_YOUKU_MATCH=/(?:https?:\/{2})?(?:w{3}\.)?youku\.com/,_REG_YOUKU_ID=/id_(\w+)/;return{isMatch:function(str){return str.match(_REG_YOUKU_MATCH)},getInfo:function(str){var temp=_REG_YOUKU_ID.exec(str),youkuId=temp[1];return{type:"youku",id:youkuId}}}}(),tudouParser=function(){var _REG_TUDOU_MATCH=/(?:https?:\/{2})?(?:w{3}\.)?tudou\.com/;return{isMatch:function(str){return str.match(_REG_TUDOU_MATCH)},getInfo:function(str){var temp=str.split("/"),tudouId=temp[temp.length-2];return{type:"tudou",id:tudouId}}}}(),qqParser=function(){var _REG_QQ_MATCH=/(?:https?:\/{2})?v\.qq\.com/;return{isMatch:function(str){return str.match(_REG_QQ_MATCH)},getInfo:function(str){var temp=str.split("vid="),qqvId=temp[temp.length-1];return{type:"qq",id:qqvId.split(/&|#/)[0]}}}}(),bilibiliParser=function(){var _REG_BILIBILI=/(?:https?:\/{2})?(?:w{3}\.)?bilibili\.(com|tv)/;return{isMatch:function(str){return str.match(_REG_BILIBILI)},getInfo:function(str){var temp=str.split("/"),bilibiliId=null;return temp.forEach(function(val){if(val.match(/^av(\d)+$/))return bilibiliId=val.replace("av",""),!1}),{type:"bilibili",id:bilibiliId}}}}();exports["default"]=getVideoInfo,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_FormMetaInfoMappingUtil=__webpack_require__(30),_FORM_COMPONENTS_NAME_DETAILS=(0,_FormMetaInfoMappingUtil.FORM_COMPONENTS_NAME_DETAILS)({np:_config.lang.cnamePrefix,nf:_config.lang.cnameFirst,nm:_config.lang.cnameMiddle,nl:_config.lang.cnameLast,ns:_config.lang.cnameSuffix,nn:_config.lang.cnameNick}),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Name)",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(e){var value={};value[e.target.name]=e.target.value,_formStore2["default"].dispatch({type:"setValue",id:this.props.data.id,value:value})},handleBlur:function(e){var value={};value[e.target.name]=e.target.value,_formStore2["default"].dispatch({type:"inputBlur",id:this.props.data.id,value:value})},render:function(){var _this=this,_props=this.props,data=_props.data,fill=_props.fill,valid=_props.valid,componentStyle=_props.componentStyle,isMobile=_props.isMobile,style=_props.style,itemNum=_props.itemNum;fill=fill||{};var _formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,_content=_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",key:"name",name:"n",className:(0,_classnames2["default"])("fbc_input",{error:valid&&valid.length>0}),type:"text",spellCheck:!1,icon:String.fromCharCode(59073),themeColor:style.themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill.n||""}),openDetails=data.detailsItem||[2,4];data.isOpenDetails&&!_lodash2["default"].isEmpty(openDetails)&&!function(){var itemW=101/openDetails.length-1,_singleLine=!1;isMobile&&(2===openDetails.length?(_singleLine=!0,itemW=50):itemW=100),_content=_lodash2["default"].map(_FORM_COMPONENTS_NAME_DETAILS,function(nameInfo){var id=nameInfo.id,name=nameInfo.name,title=nameInfo.title;if(_lodash2["default"].indexOf(openDetails,id)!==-1){var _valid=!1;return valid&&valid.indexOf("required")>-1&&(_valid=!fill[name]),_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",key:"name"+id,name:name,type:"text",spellCheck:!1,className:(0,_classnames2["default"])("fbc_input nameItem",{name_singleLine:_singleLine,error:_valid}),style:_lodash2["default"].assign({width:itemW+"%"},inputStyle),onChange:_this.handleChange,onBlur:_this.handleBlur,placeholder:title,value:fill[name]||""})}})}();var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:"fb_component name",id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_content,_addons2["default"].createElement("div",{className:"clearB"}))))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(22),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_MGString=__webpack_require__(28),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_config=__webpack_require__(9),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,INPUT_LOCK_TIMER=30;exports["default"]=_addons2["default"].createClass({displayName:"Component(MobileVerification)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){return this.validMobile=!1,this.getVerificationCode=!1,{isLock:!1,timer:INPUT_LOCK_TIMER,codeValid:null}},componentWillUpdate:function(nextProps,nextState){var _this=this;!this.state.isLock&&nextState.isLock&&!function(){var timer=function timer(){var currentTime=(0,_MGMoment2["default"])().time();startTime>=currentTime?(self.setState({timer:Math.floor((startTime-currentTime)/1e3),isLock:!0}),timerId=_tools2["default"].rAF(timer)):(self.setState({timer:0,isLock:!1}),_tools2["default"].cAF(timerId))},self=_this,startTime=(0,_MGMoment2["default"])().time()+1e3*INPUT_LOCK_TIMER,timerId=void 0;timer()}()},componentWillReceiveProps:function(nextProps){
var _this2=this;!this.validMobile||nextProps.valid&&!_lodash2["default"].isEmpty(nextProps.valid)||(this.getVerificationCode=!0,this.validMobile=!1,this.setState({isLock:!0}),_formStore2["default"].getPhoneVerificationCode(this.props.data.id).done(function(res){0===res.r?_this2.setState({isLock:!0}):_this2.setState({isLock:!1})}).always(function(){_this2.getVerificationCode=!1}))},handleGetPhoneVerificationCode:function(){var _props=this.props,fill=_props.fill,data=_props.data;fill&&fill.mobile&&!this.state.isLock&&!this.validMobile&&(fill.verificationToken&&!fill.verificationMobileToken||(this._clearValidState(),this.validMobile=!0,_formStore2["default"].dispatch({type:"validMobile",id:data.id})))},_clearValidState:function(){this.setState({codeValid:null,lockValidCode:!1})},handleVerificationCodeChange:function(e){this.state.lockValidCode||(_formStore2["default"].dispatch({type:"setVerificationCode",id:this.props.data.id,value:e.target.value}),this.setState({codeValid:null}),4===e.target.value.length&&(this.setState({lockValidCode:!0}),_formStore2["default"].validVerificationCode(this.props.data.id,this.handleValidVerificationCode)))},handleValidVerificationCode:function(isTrue){this.validVerificationCode=!1,this.setState({codeValid:isTrue,lockValidCode:!1})},handleMobileChange:function(e){this.getVerificationCode=!1,this.validMobile=!1,this._clearValidState(),_formStore2["default"].dispatch({type:"setMobileValue",id:this.props.data.id,value:e.target.value})},render:function(){var _state=this.state,isLock=_state.isLock,timer=_state.timer,codeValid=_state.codeValid,_props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,style=_props2.style,itemNum=_props2.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputBtnStyle=_formStyle.inputBtnStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,btnWidth=(0,_MGString.getWidth)(_config.lang.cMobileGetCode,(inputBtnStyle.fontSize||14)+"px/1 "+_utils._FONT)+30,btnStyle=_lodash2["default"].assign(inputBtnStyle,{width:btnWidth}),canUseBtn=!1;!isLock&&fill&&fill.mobile&&!this.validMobile&&(fill.verificationToken&&!fill.verificationMobileToken||(canUseBtn=!0)),canUseBtn?btnStyle.borderColor=btnStyle.backgroundColor:(btnStyle.cursor="default",btnStyle.color="#999999",btnStyle.backgroundColor="#F9FAFB",btnStyle.borderColor="#D9D9D9");var _btnVerification=_addons2["default"].createElement("a",{className:"fbc_sendMsgAuth",style:btnStyle,onClick:this.handleGetPhoneVerificationCode},isLock?_config.lang.cMobileHasSendCode({timer:timer}):_config.lang.cMobileGetCode),_noQuotaTips=null;fill&&fill.verificationToken&&!fill.verificationMobileToken&&(_noQuotaTips=_addons2["default"].createElement("p",{className:"fbc_noQuotaTips"},_config.lang.cMobileNoQuotaTips),_btnVerification=_addons2["default"].createElement("a",{className:"fbc_sendMsgAuth",style:btnStyle},_addons2["default"].createElement("i",{className:"iconfont"},String.fromCharCode(59173)),_config.lang.cMobileCodeSucceed));var _authInput=null;if(fill&&fill.verificationToken&&fill.verificationMobileToken){var verificationCodeError=valid&&(valid.indexOf("errMobileVCRequired")>-1||valid.indexOf("errMobileVCError")>-1),authTitleWidth=(0,_MGString.getWidth)(_config.lang.cMobileCodeInput+"*",(inputBtnStyle.fontSize||14)+"px/1 "+_utils._FONT)+30;_authInput=_addons2["default"].createElement("div",{className:"fbc_authInput"},_addons2["default"].createElement("p",{className:"fbc_aiTitle",style:{width:authTitleWidth,lineHeight:inputStyle.lineHeight,fontSize:inputStyle.fontSize}},_config.lang.cMobileCodeInput,_addons2["default"].createElement("span",{className:"fbc_required"},"*")),_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",type:"text",className:(0,_classnames2["default"])("fbc_input",{error:verificationCodeError}),style:_lodash2["default"].assign({},inputStyle,{paddingLeft:authTitleWidth+6}),value:fill.verificationCode||"",disabled:!!this.validVerificationCode&&"disabled",onChange:this.handleVerificationCodeChange}),_addons2["default"].createElement("span",{className:(0,_classnames2["default"])("iconfont fbc_aiStatus",{isLoading:this.validVerificationCode,isTrue:codeValid===!0,isFalse:codeValid===!1}),style:{lineHeight:inputStyle.height-2+"px"}},null===codeValid?"":codeValid?String.fromCharCode(58988):String.fromCharCode(58938)))}var _mobileNumberError=valid&&(valid.indexOf("mobileRequired")>-1||valid.indexOf("errMobileExtResourceUnavailable")>-1||valid.indexOf("errMobileAreaUnavailable")>-1||valid.indexOf("required")>-1),cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:"fb_component contactMobile",id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data),this.renderSubtitle(data),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_addons2["default"].createElement("div",{className:"fbc_imItem isSendMsgAuth",style:{marginRight:btnWidth?btnWidth+7:null}},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:_mobileNumberError}),type:isMobile?"tel":"text",spellCheck:!1,autoComplete:"off",icon:String.fromCharCode(59074),themeColor:style.themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,disabled:!!isLock&&"disabled",onChange:this.handleMobileChange,placeholder:data.placeholder||"",value:fill?fill.mobile||"":""}),_btnVerification),_noQuotaTips,_authInput)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_formMetaUtil=__webpack_require__(47),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,InputItem=_addons2["default"].createClass({displayName:"MultiItem",mixins:[pureRenderMixin,_mixins2["default"]],handleChange:function(e){_formStore2["default"].dispatch({type:"setMultiValue",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputMultiBlur",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleAdd:function(){_formStore2["default"].dispatch({type:"inputMultiAdd",id:this.props.data.id})},handleRemove:function(){_formStore2["default"].dispatch({type:"inputMultiRemove",id:this.props.data.id,idx:this.props.idx})},render:function(){var _props=this.props,isMobile=_props.isMobile,length=_props.length,idx=_props.idx,fill=_props.fill,data=_props.data,inputStyle=_props.inputStyle,themeColor=_props.themeColor,inputWithIconStyle=_props.inputWithIconStyle,inputIconStyle=_props.inputIconStyle,componentStyle=_props.componentStyle,inputType=_props.inputType,valid=_props.valid,mode=_props.mode,_operate=null;if(data.isAcceptMulti){var _remove=null,_add=null;isMobile||idx!==length-1||(_add=_addons2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,style:inputStyle,onClick:this.handleAdd},String.fromCharCode(58979))),1!==length&&(_remove=_addons2["default"].createElement("a",{className:"iconfont fbc_removeIcon",title:_config.lang.cMultiInputRemove,style:inputStyle,onClick:this.handleRemove},String.fromCharCode(58980))),_operate=_addons2["default"].createElement("div",{className:"fbc_imOperate"},_remove,_add)}return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_imItem",{"is-multi":data.isAcceptMulti}),style:componentStyle},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:valid}),type:isMobile&&1===mode?_config.INPUT_TYPING_TYPE[inputType]||"text":"text",spellCheck:!1,autoComplete:"off",icon:_formMetaUtil.FIELD_INFO_MAPPING[inputType].icon,themeColor:themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill||""}),_operate)}});exports["default"]=_addons2["default"].createClass({displayName:"Component(InputMulti)",mixins:[pureRenderMixin,_mixins2["default"]],render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,type=_props2.type,style=_props2.style,mode=_props2.mode,itemNum=_props2.itemNum,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,len=(fill||[""]).length,_content=_lodash2["default"].map(fill||[""],function(info,idx){var _valid=!1;return valid&&valid.indexOf("required")>-1&&(_valid=!info),_addons2["default"].createElement(InputItem,{key:"im"+idx,isMobile:isMobile,valid:_valid,length:len,idx:idx,mode:mode,fill:info,data:data,inputType:type,themeColor:style.themeColor,inputStyle:inputStyle,inputWithIconStyle:inputWithIconStyle,inputIconStyle:inputIconStyle})}),cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:"fb_component inputMulti",id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data,isMobile&&data.isAcceptMulti&&(!data.subtitle||0===data.subtitle.length)),this.renderSubtitle(data,isMobile&&data.isAcceptMulti),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:cpWidthPre+"%"}},_content)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(22),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),_MGString=__webpack_require__(28),_config=__webpack_require__(9),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,InputItem=_addons2["default"].createClass({displayName:"MultiWxItem",getInitialState:function(){return{succeedAuth:!1}},componentDidUpdate:function(){var _this=this;window.clearTimeout(this.resetTimer),this.state.succeedAuth&&(this.resetTimer=window.setTimeout(function(){_this.setState({succeedAuth:!1})},2e3))},componentWillUnmount:function(){window.clearTimeout(this.resetTimer)},handleChange:function(e){_formStore2["default"].dispatch({type:"setMultiValue",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleBlur:function(e){_formStore2["default"].dispatch({type:"inputMultiBlur",id:this.props.data.id,idx:this.props.idx,value:e.target.value})},handleAdd:function(){_formStore2["default"].dispatch({type:"inputMultiAdd",id:this.props.data.id})},handleRemove:function(){_formStore2["default"].dispatch({type:"inputMultiRemove",id:this.props.data.id,idx:this.props.idx})},handleGetWxInfo:function(e){var _this2=this;e.preventDefault(),e.stopPropagation(),_formStore2["default"].wxAuth().done(function(res){_this2.setState({succeedAuth:!0})})},render:function(){var _props=this.props,isMobile=_props.isMobile,length=_props.length,idx=_props.idx,fill=_props.fill,data=_props.data,inputStyle=_props.inputStyle,inputWithIconStyle=_props.inputWithIconStyle,inputIconStyle=_props.inputIconStyle,componentStyle=_props.componentStyle,inputButtonStyle=_props.inputButtonStyle,themeColor=_props.themeColor,_operate=null;if(data.isAcceptMulti){var _remove=null,_add=null;isMobile||idx!==length-1||(_add=_addons2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,style:inputStyle,onClick:this.handleAdd},String.fromCharCode(58979))),1!==length&&(_remove=_addons2["default"].createElement("a",{className:"iconfont fbc_removeIcon",title:_config.lang.cMultiInputRemove,style:inputStyle,onClick:this.handleRemove},String.fromCharCode(58980))),_operate=_addons2["default"].createElement("div",{className:"fbc_imOperate"},_remove,_add)}var _btnWxInfoGetter=null,btnWidth=0;if(0===idx){var _content=(0,_utils.isAuthorizedWx)()?_config.lang.cRefreshWxAuth:_config.lang.cWxAuth;btnWidth=(0,_MGString.getWidth)(_content,inputButtonStyle.fontSize+"px/1 "+_utils._FONT)+30;var btnStyle=_lodash2["default"].assign(inputButtonStyle,{width:btnWidth});_btnWxInfoGetter=_addons2["default"].createElement("a",{className:"fbc_sendMsgAuth",style:btnStyle,onClick:this.handleGetWxInfo},this.state.succeedAuth?_addons2["default"].createElement("i",{className:"iconfont"},String.fromCharCode(58988)):_content)}return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_imItem:!0,hasAuthBtn:_btnWxInfoGetter,"is-multi":data.isAcceptMulti}),style:_lodash2["default"].assign({},componentStyle,{marginRight:btnWidth?btnWidth+5:null})},_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:"fbc_input",type:"text",spellCheck:!1,icon:String.fromCharCode(59094),themeColor:themeColor,style:inputWithIconStyle,iconStyle:inputIconStyle,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:data.placeholder||"",value:fill||""}),_btnWxInfoGetter,_operate)}});exports["default"]=_addons2["default"].createClass({displayName:"Component(WxMulti)",mixins:[pureRenderMixin,_mixins2["default"]],render:function(){var _props2=this.props,data=_props2.data,fill=_props2.fill,valid=_props2.valid,componentStyle=_props2.componentStyle,isMobile=_props2.isMobile,style=_props2.style,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,inputWithIconStyle=_formStyle.inputWithIconStyle,inputIconStyle=_formStyle.inputIconStyle,inputBtnStyle=_formStyle.inputBtnStyle,_content=(fill||[""]).map(function(info,idx){return _addons2["default"].createElement(InputItem,{key:"im"+idx,isMobile:isMobile,length:(fill||[""]).length,idx:idx,fill:info,data:data,themeColor:style.themeColor,inputStyle:inputStyle,inputWithIconStyle:inputWithIconStyle,inputIconStyle:inputIconStyle,inputButtonStyle:inputBtnStyle})}),_widthPre=isMobile?10:data.cpWidth||8;return _addons2["default"].createElement("div",{className:"fb_component inputMulti",id:data.id,style:componentStyle},this.renderTitle(data,!(!isMobile||!data.isAcceptMulti||data.subtitle&&0!==data.subtitle.length)),this.renderSubtitle(data,!(!isMobile||!data.isAcceptMulti)),this.renderError(valid),_addons2["default"].createElement("div",{className:"fbc_content fbc_widthCp",style:{width:10*_widthPre+"%"}},_content))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_mixins=__webpack_require__(44),_mixins2=_interopRequireDefault(_mixins),_utils=__webpack_require__(22),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),_FCDropDown=__webpack_require__(51),_FCDropDown2=_interopRequireDefault(_FCDropDown),_FCTextBox=__webpack_require__(46),_FCTextBox2=_interopRequireDefault(_FCTextBox),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,FORM_COMPONENTS_IMSNS_INFO_TYPES=[{id:36,value:_config.lang.cWechat},{id:35,value:_config.lang.cQQ},{id:41,value:_config.lang.cSkype},{id:38,value:_config.lang.cWhatsApp},{id:39,value:_config.lang.cMessenger},{id:42,value:_config.lang.cViber},{id:37,value:_config.lang.cLine},{id:40,value:_config.lang.cTelegram},{id:49,value:_config.lang.cWeibo},{id:47,value:_config.lang.cLinkedIn},{id:48,value:_config.lang.cTwitter},{id:44,value:_config.lang.cFacebook},{id:46,value:_config.lang.cInstagram},{id:45,value:_config.lang.cGooglePlus}];exports["default"]=_addons2["default"].createClass({displayName:"Component(IMSNSGroup)",mixins:[pureRenderMixin,_mixins2["default"]],getInitialState:function(){this.props.data.infoTypes||[];return null},handleMouseDownType:function(idx,type,e){_utils.isIE8&&(e.preventDefault(),e.stopPropagation(),this.handleChangeType(idx,type,e))},handleChangeType:function(idx,type){_formStore2["default"].dispatch({type:"setGroupType",id:this.props.data.id,value:type,index:idx})},handleDropChangeType:function(idx,e){var _type=+e.target.value;_formStore2["default"].dispatch({type:"setGroupType",id:this.props.data.id,value:_type,index:idx})},handleChangeContent:function(idx,type,e){_formStore2["default"].dispatch({type:"setGroupInfo",id:this.props.data.id,index:idx,value:e.target.value,contentType:type})},handleBlur:function(e){},handleAdd:function(){_formStore2["default"].dispatch({type:"addContactInfoGroup",id:this.props.data.id})},handleRemove:function(idx){_formStore2["default"].dispatch({type:"removeContactInfoGroup",id:this.props.data.id,index:idx})},renderOptions:function(selected,idx){for(var _props=this.props,isMobile=_props.isMobile,data=_props.data,infoTypes=data.infoTypes||[],_infoTypes=[],i=0,len=infoTypes.length;i<len;i++){var info=_lodash2["default"].find(FORM_COMPONENTS_IMSNS_INFO_TYPES,{id:infoTypes[i]});info&&(isMobile?_infoTypes.push(_addons2["default"].createElement("option",{className:"fbc_selectLi",key:"infoType"+info.id,value:info.id},info.value)):_infoTypes.push(_addons2["default"].createElement("li",{className:(0,_classnames2["default"])("fbc_selectLi",{fbc_currentSelected:selected===info.id}),key:"infoType"+info.id,onMouseDown:this.handleMouseDownType.bind(this,idx,info.id),onClick:this.handleChangeType.bind(this,idx,info.id)},info.value)))}return _infoTypes},renderItem:function(fillData,idx,extInfo){var _props2=this.props,isMobile=_props2.isMobile,data=_props2.data,_formStyle=this.formStyle(),inputStyle=_formStyle.inputStyle,selectStyle=_formStyle.selectStyle,selectPlaceholderStyle=_formStyle.selectPlaceholderStyle,selectArrowStyle=_formStyle.selectArrowStyle,_infoTypes=data.infoTypes;if(!_infoTypes||_lodash2["default"].isEmpty(_infoTypes))return null;var _fillingType=+(fillData.type||_infoTypes[0]),_fillData=fillData.info||"",_selectValue=(_lodash2["default"].find(FORM_COMPONENTS_IMSNS_INFO_TYPES,{id:_fillingType})||{}).value,_c=[],operateWidth=null,_operate=null;if(!("isAcceptMulti"in data)||data.isAcceptMulti){operateWidth=(inputStyle.fontSize+4)*(isMobile?1:2)+2;var _remove=null,_add=null;isMobile||idx!==extInfo.len-1||(_add=_addons2["default"].createElement("a",{className:"iconfont fbc_addIcon",title:_config.lang.cMultiInputInsert,style:inputStyle,onClick:this.handleAdd},String.fromCharCode(58979))),1!==extInfo.len&&(_remove=_addons2["default"].createElement("a",{className:"iconfont fbc_removeIcon",title:_config.lang.cMultiInputRemove,style:inputStyle,onClick:this.handleRemove.bind(this,idx)},String.fromCharCode(58980))),_operate=_addons2["default"].createElement("div",{className:"fbc_imOperate"},_remove,_add)}if(1===_infoTypes.length)_c.push(_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input",{error:extInfo.valid}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",key:"contentInput",placeholder:_selectValue,value:_fillData,style:_lodash2["default"].assign({},inputStyle,{paddingRight:operateWidth?operateWidth:5}),onChange:this.handleChangeContent.bind(this,idx,_fillingType)}));else{var _typeSelect=null;_typeSelect=isMobile?_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fbc_select","combineItem",{hasValue:_selectValue}),ref:"dropdown",key:"typeSelect"},_addons2["default"].createElement("i",{className:"iconfont fbc_selectArrow",style:{lineHeight:inputStyle.height+"px"}},String.fromCharCode(58983)),_addons2["default"].createElement("select",{className:(0,_classnames2["default"])("fbc_innerSelect"),value:_fillingType,style:inputStyle,onChange:this.handleDropChangeType.bind(this,idx)},this.renderOptions(_fillingType,idx))):_addons2["default"].createElement(_FCDropDown2["default"],{className:(0,_classnames2["default"])("fbc_select","combineItem",{hasValue:_selectValue}),display:_selectValue,ref:"dropdown",key:"typeSelect",selectArrowStyle:selectArrowStyle,style:_selectValue?selectStyle:selectPlaceholderStyle},this.renderOptions(_fillingType,idx)),_c=_c.concat([_typeSelect,_addons2["default"].createElement(_FCTextBox2["default"],{component:"input",className:(0,_classnames2["default"])("fbc_input combineItem",{error:extInfo.valid}),ref:"input",type:"text",spellCheck:!1,autoComplete:"off",key:"contentInput",style:_lodash2["default"].assign({},inputStyle,{paddingRight:operateWidth?operateWidth:5}),onChange:this.handleChangeContent.bind(this,idx,_fillingType),value:_fillData})])}return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])({fbc_imItem:!0,"is-multi":data.isAcceptMulti}),key:"infoGroup"+idx},_c,_addons2["default"].createElement("div",{className:"clearB"}),_operate)},render:function(){var _this=this,_props3=this.props,data=_props3.data,fill=_props3.fill,valid=_props3.valid,componentStyle=_props3.componentStyle,isMobile=_props3.isMobile,style=_props3.style,itemNum=_props3.itemNum,_component=[],len=(fill||[{}]).length;_lodash2["default"].forEach(fill||[{}],function(d,idx){var extInfo={len:len};valid&&valid.indexOf("required")>-1&&(extInfo.valid=!d.info),_component.push(_this.renderItem(d,idx,extInfo))});var cpWidthPre=10*(isMobile?10:data.cpWidth||8),cpTextStyle={},cpBodyStyle={};return isMobile||2!==+data.cpLayout||(cpTextStyle={"float":"left",paddingTop:6,width:((style.bodyStyle||{}).cpTitleWidth||20)+"%"},cpBodyStyle={"float":"left",width:100-((style.bodyStyle||{}).cpTitleWidth||20)+"%"},itemNum&&itemNum>1&&(cpTextStyle.width="auto",cpTextStyle.maxWidth=105-cpWidthPre+"%",cpBodyStyle.width=cpWidthPre-5+"%",cpWidthPre=100)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])("fb_component",data.type),id:data.id,style:componentStyle},_addons2["default"].createElement("div",{className:"fb_componentText",style:cpTextStyle},this.renderTitle(data,!(!isMobile||!data.isAcceptMulti||data.subtitle&&0!==data.subtitle.length)),this.renderSubtitle(data,!(!isMobile||!data.isAcceptMulti)),this.renderError(valid)),_addons2["default"].createElement("div",{className:"fb_componentBody",style:cpBodyStyle},_addons2["default"].createElement("div",{className:"fbc_content fbc_combineComponent fbc_widthCp",style:{width:cpWidthPre+"%"}},_component)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_FCPopwin=__webpack_require__(62),_FCPopwin2=_interopRequireDefault(_FCPopwin),_PopPayOnline=__webpack_require__(115),_PopPayOnline2=_interopRequireDefault(_PopPayOnline),_PopPayOffline=__webpack_require__(116),_PopPayOffline2=_interopRequireDefault(_PopPayOffline),_PopPaySucceed=__webpack_require__(117),_PopPaySucceed2=_interopRequireDefault(_PopPaySucceed),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"PopPay",mixins:[pureRenderMixin],getInitialState:function(){var _this=this;return _utils2["default"].getParentInfo([{t:"self",v:"rect",e:1,n:"rect"}]).then(function(res){res&&res.innerState&&_this.setState({rectTop:res.rect.top})}),{payState:1}},handleClose:function(needShowSuccess){needShowSuccess&&window.setTimeout(function(){$(".main").trigger("paymentSucceed")},200),this.refs.popwin.doClose()},handleStateChange:function(_state){this.setState({payState:_state})},render:function(){var payState=this.state.payState,_title=" ",_content=_addons2["default"].createElement(_PopPayOnline2["default"],{isMobile:_tools2["default"].fuzzyDeviceCheck,onClose:this.handleClose,payType:this.handleStateChange});return 1===payState?4===this.props.payment.type?(_title=_config.lang.cPayOfflineTitle,_content=_addons2["default"].createElement(_PopPayOffline2["default"],{onClose:this.handleClose})):_title=_config.lang.cPayOnlineTitle:2===payState&&(_content=_addons2["default"].createElement(_PopPaySucceed2["default"],{onClose:this.handleClose})),_addons2["default"].createElement(_FCPopwin2["default"],{className:"pop_pay",ref:"popwin",boxStyle:{marginTop:this.state.rectTop?Math.max(60-this.state.rectTop,60):null},isCantClose:!0,title:_title},_content)}}),module.exports=exports["default"]}).call(exports,__webpack_require__(2))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"PopPayOnline",mixins:[pureRenderMixin],getInitialState:function(){var _storeState=_formStore2["default"].getState();return{info:_storeState.payment,data:_storeState.data}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange),this.handleDmwProgress()},componentDidUpdate:function(){this.handleDmwProgress()},componentWillUnmount:function(){this.unsubscribe(),clearInterval(this.getDmwProgress)},handleDmwProgress:function(){var _this=this;clearInterval(this.getDmwProgress);var info=this.state.info;info._DMWT&&info._NODE&&!info.inWechat&&(this.getDmwProgress=window.setInterval(function(){info.isFin?(clearInterval(_this.getDmwProgress),_this.props.payType(2)):_formStore2["default"].checkDMW(info._DMWT,info._NODE)},2e3))},handleStateChange:function(){var _storeState=_formStore2["default"].getState();this.setState({info:_storeState.payment,data:_storeState.data})},handleClose:function(){this.props.onClose&&this.props.onClose()},renderWxPay:function(){var info=this.state.info;return info.rWx_jump?_addons2["default"].createElement("div",{className:"pay_method wxPay"},_addons2["default"].createElement("a",{className:"fbc_button orange btn_goToPay",target:"_blank",href:info.rWx_jump},_config.lang.cPayGoToPay)):_addons2["default"].createElement("div",{className:"pay_method wxPay"},_addons2["default"].createElement("div",{className:"pay_wxQRCode"},_addons2["default"].createElement("p",{className:"pay_mTitle"},_config.lang.cPayWxPayQrCode),_addons2["default"].createElement("img",{className:"pay_mQRCode",src:info.rWx_qrPath})),_addons2["default"].createElement("div",{className:"clearB"}))},renderAliPay:function(){var info=this.state.info;if(this.props.isMobile){var _url=info.rData_host+info.rData_jump;if(info.inWechat){var _sendData=_lodash2["default"].omit(info,["rData_qr","inWechat","type"]);_url="pg_wc/alipayInWc.php?d="+encodeURIComponent(JSON.stringify(_sendData))}return _addons2["default"].createElement("div",{className:"pay_method aliPay"},_addons2["default"].createElement("a",{className:"fbc_button orange btn_goToPay",target:"_blank",href:_url},_config.lang.cPayGoToPay))}return _addons2["default"].createElement("div",{className:"pay_method aliPay"},_addons2["default"].createElement("div",{className:"pay_aliWeb"},_addons2["default"].createElement("p",{className:"pay_mTitle"},_config.lang.cPayWebPay),_addons2["default"].createElement("div",{className:"pay_mImg"}),_addons2["default"].createElement("a",{className:"btn_normal orange btn_goToPay",target:"_blank",href:info.rData_host+info.rData_jump},_config.lang.cPayGoToPay)),_addons2["default"].createElement("div",{className:"pay_aliQRCode"},_addons2["default"].createElement("p",{className:"pay_mTitle"},_config.lang.cPayAliPayQrCode),_addons2["default"].createElement("iframe",{className:"pay_mQRCode",scrolling:"no",frameBorder:"0",src:info.rData_host+info.rData_qr})),_addons2["default"].createElement("div",{className:"clearB"}))},render:function(){var info=this.state.info,data=this.state.data,settings=_utils2["default"].getSettings(),symbol="ï¿¥";"0"==settings.cartSymbol?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var totalPrice=0,_cartInfo=_utils2["default"].processCart(data,function(data){return{price:data.price,num:data.num}});_cartInfo.length>0&&(totalPrice=Math.round(_lodash2["default"].reduce(_cartInfo,function(pre,item){return pre+item.price*item.num},0))/100);var content=null;return 1===info.type?content=this.renderAliPay():2===info.type&&(content=this.renderWxPay()),_addons2["default"].createElement("div",{className:"pay_onLine"},_addons2["default"].createElement("p",{className:"pay_guide"},_addons2["default"].createElement("i",{className:"iconfont pay_gIcon"},String.fromCharCode(58988)),_addons2["default"].createElement("span",null,_config.lang.cPayOnlineGuide)),_addons2["default"].createElement("div",{className:"pay_orderInfo"},_addons2["default"].createElement("p",{className:"pay_oNo"},_addons2["default"].createElement("span",null,_config.lang.cPayOrderNo),_addons2["default"].createElement("span",{className:"orderNo"},info.ordiNo)),_addons2["default"].createElement("p",{className:"pay_oPrice"},_addons2["default"].createElement("span",null,_config.lang.cPayNeedPay),_addons2["default"].createElement("span",{className:"price"},symbol+" "+totalPrice.toFixed(2)))),content,_addons2["default"].createElement("p",{
className:"pay_operate"},_addons2["default"].createElement("a",{className:"pay_oOtherMode",onClick:this.handleClose},_config.lang.cPayChooseOtherMethod),_addons2["default"].createElement("a",{className:"pay_oAlterOrder",onClick:this.handleClose},_config.lang.cPayAlterOrder)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_MGMoment=__webpack_require__(29),_utils=(_interopRequireDefault(_MGMoment),__webpack_require__(22)),_utils2=_interopRequireDefault(_utils),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"PopPayOnline",mixins:[pureRenderMixin],getInitialState:function(){var _storeState=_formStore2["default"].getState();return{info:_storeState.payment,data:_storeState.data}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe(),clearInterval(this.getDmwProgress)},handleStateChange:function(){var _storeState=_formStore2["default"].getState();this.setState({info:_storeState.payment,data:_storeState.data})},handleClose:function(){this.props.onClose&&this.props.onClose(!0)},render:function(){var info=this.state.info,data=this.state.data,settings=_utils2["default"].getSettings(),symbol="ï¿¥";"0"==settings.cartSymbol?symbol=settings.cartSymbolDefined||"":settings.cartSymbol&&(symbol=_config.lang.cCurrencySymbolArray[settings.cartSymbol-1]);var totalPrice=0,_cartInfo=_utils2["default"].processCart(data,function(data){return{price:data.price,num:data.num}});return _cartInfo.length>0&&(totalPrice=Math.round(_lodash2["default"].reduce(_cartInfo,function(pre,item){return pre+item.price*item.num},0))/100),_addons2["default"].createElement("div",{className:"pay_offLine"},_addons2["default"].createElement("p",{className:"pay_guide"},_addons2["default"].createElement("i",{className:"iconfont pay_gIcon"},String.fromCharCode(58988)),_addons2["default"].createElement("span",null,_config.lang.cPayOfflineGuide)),_addons2["default"].createElement("div",{className:"pay_tradeInfo"},_addons2["default"].createElement("p",{className:"pay_orderNo"},_addons2["default"].createElement("span",null,_config.lang.cPayOrderNo),_addons2["default"].createElement("span",{className:"orderNo"},info.ordiNo)),_addons2["default"].createElement("p",{className:"pay_needPay"},_addons2["default"].createElement("span",null,_config.lang.cPayNeedPay),_addons2["default"].createElement("span",{className:"needPay"},symbol+" "+totalPrice.toFixed(2)))),_addons2["default"].createElement("div",{className:"pay_operate"},_addons2["default"].createElement("a",{className:"btn_normal btn_finish",onClick:this.handleClose},_config.lang.cPayKnowIt)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_addons=(_interopRequireDefault(_lodash),__webpack_require__(14)),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore);exports["default"]=_addons2["default"].createClass({displayName:"PopPaySucceed",handleClose:function(){this.props.onClose&&this.props.onClose(!0)},render:function(){var _storeState=_formStore2["default"].getState();return _addons2["default"].createElement("div",{className:"pay_succeed"},_addons2["default"].createElement("i",{className:"pay_sImg"}),_addons2["default"].createElement("p",{className:"pay_sTips"},_config.lang.cPaySucceedTips),_addons2["default"].createElement("div",{className:"pay_tradeInfo"},_addons2["default"].createElement("p",{className:"pay_orderNo"},_addons2["default"].createElement("span",null,_config.lang.cPayOrderNo),_addons2["default"].createElement("span",{className:"orderNo"},_storeState.payment.ordiNo))),_addons2["default"].createElement("div",{className:"pay_operate"},_addons2["default"].createElement("a",{className:"btn_normal btn_finish",onClick:this.handleClose},_config.lang.cPayFinish)))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function inject(injection){isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode}function render($s){_addons2["default"].render(_addons2["default"].createElement(SubmitWrapper,{isMobile:isMobile}),$s[0])}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_paging=__webpack_require__(119),_paging2=_interopRequireDefault(_paging),_Submit=__webpack_require__(120),_Submit2=_interopRequireDefault(_Submit),isMobile=void 0,getCurrentWidth=void 0,getMode=void 0,pureRenderMixin=_addons2["default"].addons.PureRenderMixin,SubmitWrapper=_addons2["default"].createClass({displayName:"SubmitWrapper",mixins:[pureRenderMixin],getInitialState:function(){return this.hasPage=_utils2["default"].hasPage(),this.pageNum=_utils2["default"].getPageNum(),{forceUpdateCount:0,page:_formStore2["default"].getState().page}},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){var newState={};_utils2["default"].hasPage()===this.hasPage&&_utils2["default"].getPageNum()===this.pageNum||(this.hasPage=_utils2["default"].hasPage(),this.pageNum=_utils2["default"].getPageNum(),newState.forceUpdateCount=(this.state.forceUpdateCount+1)%100),"page"===action.type?newState.page=_formStore2["default"].getState().page:"$$resize"===action.type&&(newState.updateCounter=this.state.updateCounter+1),_lodash2["default"].isEmpty(newState)||this.setState(newState)},render:function(){var page=this.state.page,hasPages=_utils2["default"].hasPage();return _addons2["default"].createElement("div",null,hasPages&&_utils2["default"].hasNextPage(page+1)?_addons2["default"].createElement(_paging2["default"],{page:page,pageNum:_utils2["default"].getPageNum(),key:"paging",isMobile:isMobile(),forceUpdateCount:this.state.forceUpdateCount}):_addons2["default"].createElement(_Submit2["default"],{page:page,pageNum:_utils2["default"].getPageNum(),key:"submit",isMobile:isMobile(),forceUpdateCount:this.state.forceUpdateCount}))}});exports["default"]={inject:inject,render:render},module.exports=exports["default"]},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_MGColor=__webpack_require__(35),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Component(Paging)",mixins:[pureRenderMixin],componentDidMount:function(){$(".fbc_button").on("mousedown.stopPop",this.handleStopPop)},componentWillUnmount:function(){$(".fbc_button").off("mousedown.stopPop")},handleStopPop:function(e){e.stopPropagation(),e.preventDefault()},handleChangePage:function(page){page<0?page=0:page>this.props.pageNum-1&&(page=this.props.pageNum-1),_formStore2["default"].dispatch({type:"page",data:page})},render:function(){var settings=_utils2["default"].getSettings(),style=_utils2["default"].getStyle(),submitStyle=style.submitStyle||{},_props=this.props,isMobile=_props.isMobile,page=_props.page,pageNum=_props.pageNum,alignArray=["","left","center","right"],submitFieldStyle={textAlign:alignArray[submitStyle.btnAlign||2]};if(submitStyle.bgColor&&(submitFieldStyle.backgroundColor=submitStyle.bgColor),null!=submitStyle.bgOpacityValue&&submitStyle.bgOpacityValue<1){var newColor=new _MGColor.OColor(submitStyle.bgColor||"#ffffff");newColor.set("a",submitStyle.bgOpacityValue),submitFieldStyle.backgroundColor=newColor.getRGBA(),submitFieldStyle.zoom=1,_utils.isIE8&&(submitFieldStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",submitFieldStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",submitFieldStyle.backgroundColor="transparent")}if(submitStyle.background){submitFieldStyle.backgroundImage="url("+submitStyle.background+")",submitFieldStyle.backgroundPosition="center center",submitFieldStyle.backgroundRepeat="no-repeat";var bglH=submitStyle.bgLayoutHorizontal||6,bglV=submitStyle.bgLayoutVertical||6;switch(bglH){case 3:submitFieldStyle.backgroundRepeat="repeat-x";break;case 4:submitFieldStyle.backgroundSize="100% auto";break;case 5:submitFieldStyle.backgroundPositionX="left";break;case 7:submitFieldStyle.backgroundPositionX="right";break;case 6:default:submitFieldStyle.backgroundPositionX="center"}switch(bglV){case 3:submitFieldStyle.backgroundRepeat="repeat-y";break;case 4:submitFieldStyle.backgroundSize="auto 100%";break;case 8:submitFieldStyle.backgroundPositionY="top";break;case 9:submitFieldStyle.backgroundPositionY="bottom";break;case 6:default:submitFieldStyle.backgroundPositionY="center"}3==bglH&&3==bglV&&(submitFieldStyle.backgroundRepeat="repeat"),4==bglH&&4==bglV&&(submitFieldStyle.backgroundSize="cover")}var buttonStyle={width:"1"==submitStyle.isFormWith||isMobile?"100%":"auto",height:Math.floor(2.2*(submitStyle.submitFontSize||14))+(isMobile?6:0),paddingTop:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingBottom:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingLeft:(submitStyle.submitFontSize||14)+6,paddingRight:(submitStyle.submitFontSize||14)+6,fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,background:submitStyle.btnColor},pageNumText=!1,isShowCurrentPageNum=settings.isShowCurrentPageNum,isShowAllPageNum=settings.isShowAllPageNum,isBanReturn=settings.isBanReturn;isShowCurrentPageNum&&isShowAllPageNum?pageNumText=_config.lang.gPageCurrentAndAll({current:page+1,total:pageNum}):isShowCurrentPageNum?pageNumText=_config.lang.gPageCurrent({num:page+1}):isShowAllPageNum&&(pageNumText=_config.lang.gPageAll({num:pageNum}));var _pageNum=null;pageNumText&&(_pageNum=_addons2["default"].createElement("p",{className:"fbc_pageNum"},pageNumText));var _pagePrev=null;return 1!==isBanReturn&&0!==page&&(buttonStyle.width="1"==submitStyle.isFormWith||isMobile?"49%":"auto",_pagePrev=_addons2["default"].createElement("a",{className:"fbc_button",style:buttonStyle,onClick:this.handleChangePage.bind(this,page-1)},_config.lang.gPrev)),_addons2["default"].createElement("div",{className:(0,_classnames2["default"])({submit:!0,paging:!0}),style:submitFieldStyle},_addons2["default"].createElement("div",{className:"fbc_pageBtn"},_pagePrev,_addons2["default"].createElement("a",{className:"fbc_button",style:buttonStyle,onClick:this.handleChangePage.bind(this,page+1)},_config.lang.gNext)),_pageNum)}}),module.exports=exports["default"]}).call(exports,__webpack_require__(2))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_config=__webpack_require__(9),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_MGColor=__webpack_require__(35),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),pureRenderMixin=_addons2["default"].addons.PureRenderMixin;exports["default"]=_addons2["default"].createClass({displayName:"Submit.react",mixins:[pureRenderMixin],getInitialState:function(){return{saving:!1,updateCounter:0}},componentDidMount:function(){this.unsub=_formStore2["default"].addChangeListener(this.handleChangeState)},componentWillUnmount:function(){this.unsub()},handleChangeState:function(action){"savingForm"===action.type?this.setState({saving:!0}):"endSubmit"===action.type?this.setState({saving:!1}):"$$resize"===action.type&&this.setState({updateCounter:this.state.updateCounter+1})},handleChangePage:function(page){page<0?page=0:page>this.props.pageNum-1&&(page=this.props.pageNum-1),_formStore2["default"].dispatch({type:"page",data:page})},render:function(){var tail=_utils2["default"].getTail(),style=_utils2["default"].getStyle(),settings=_utils2["default"].getSettings(),_props=this.props,isMobile=_props.isMobile,page=_props.page,pageNum=_props.pageNum,submitStyle=style.submitStyle||{},alignArray=["","left","center","right"],submitFieldStyle={textAlign:alignArray[submitStyle.btnAlign||2]};if(submitStyle.bgColor&&(submitFieldStyle.backgroundColor=submitStyle.bgColor),null!=submitStyle.bgOpacity&&1!==submitStyle.bgOpacityValue){var newColor=new _MGColor.OColor(submitStyle.bgColor||"#ffffff");newColor.set("a",submitStyle.bgOpacityValue),submitFieldStyle.backgroundColor=newColor.getRGBA(),submitFieldStyle.zoom=1,_utils.isIE8&&(submitFieldStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",submitFieldStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",submitFieldStyle.backgroundColor="transparent")}if(submitStyle.background){submitFieldStyle.backgroundImage="url("+submitStyle.background+")",submitFieldStyle.backgroundPosition="center center",submitFieldStyle.backgroundRepeat="no-repeat";var bglH=submitStyle.bgLayoutHorizontal||6,bglV=submitStyle.bgLayoutVertical||6;switch(bglH){case 3:submitFieldStyle.backgroundRepeat="repeat-x";break;case 4:submitFieldStyle.backgroundSize="100% auto";break;case 5:submitFieldStyle.backgroundPositionX="left";break;case 7:submitFieldStyle.backgroundPositionX="right";break;case 6:default:submitFieldStyle.backgroundPositionX="center"}switch(bglV){case 3:submitFieldStyle.backgroundRepeat="repeat-y";break;case 4:submitFieldStyle.backgroundSize="auto 100%";break;case 8:submitFieldStyle.backgroundPositionY="top";break;case 9:submitFieldStyle.backgroundPositionY="bottom";break;case 6:default:submitFieldStyle.backgroundPositionY="center"}3==bglH&&3==bglV&&(submitFieldStyle.backgroundRepeat="repeat"),4==bglH&&4==bglV&&(submitFieldStyle.backgroundSize="cover")}var submitBtnStyle={width:"1"==submitStyle.isFormWith||this.props.isMobile?"100%":"auto",height:Math.floor(2.2*(submitStyle.submitFontSize||14))+(isMobile?6:0),paddingTop:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingBottom:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingLeft:(submitStyle.submitFontSize||14)+6,paddingRight:(submitStyle.submitFontSize||14)+6,fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,background:submitStyle.btnColor},_submitBtn=null;if(!tail||tail&&1!==tail.isHideBtn){var submitText=_config.lang.gSubmit;tail&&tail.isDefaultSubmitText&&(submitText="submitText"in tail?tail.submitText:_config.lang.gSubmit),this.state.saving&&(submitText=_config.lang.gSaving),_submitBtn=_addons2["default"].createElement("a",{className:(0,_classnames2["default"])("fb_submitBtn",{fb_savingBtn:this.state.saving}),id:"form_submit",style:submitBtnStyle},submitText)}var pageNumText=!1,_pageNum=null,_pagePrev=null;if(pageNum>1){var isShowCurrentPageNum=settings.isShowCurrentPageNum,isShowAllPageNum=settings.isShowAllPageNum,isBanReturn=settings.isBanReturn;isShowCurrentPageNum&&isShowAllPageNum?pageNumText=_config.lang.gPageCurrentAndAll({current:page+1,total:pageNum}):isShowCurrentPageNum?pageNumText=_config.lang.gPageCurrent({num:page+1}):isShowAllPageNum&&(pageNumText=_config.lang.gPageAll({num:pageNum})),pageNumText&&(_pageNum=_addons2["default"].createElement("p",{className:"fbc_pageNum"},pageNumText)),1!==isBanReturn&&0!==page&&(_pagePrev=_addons2["default"].createElement("a",{className:"fbc_button",style:submitBtnStyle,onClick:this.handleChangePage.bind(this,page-1)},_config.lang.gPrev))}return _addons2["default"].createElement("div",{className:"submit",style:submitFieldStyle},_pagePrev?_addons2["default"].createElement("div",{className:"fbc_pageBtn"},_pagePrev):null,_submitBtn,_pageNum)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function inject(injection){isMobile=injection.isMobile,getCurrentWidth=injection.getCurrentWidth,getMode=injection.getMode}function render($c,drakBg){isDarkBG=drakBg,FORM_WIDTH_PADDING=isMobile()?0:20,_addons2["default"].render(_addons2["default"].createElement(Copyright,null),$c[0])}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_extensions=__webpack_require__(33),_extensions2=_interopRequireDefault(_extensions),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_config=__webpack_require__(9),FORM_WIDTH_PADDING=20,isMobile=void 0,isDarkBG=!1,getCurrentWidth=void 0,getMode=void 0,pureRenderMixin=_addons2["default"].addons.PureRenderMixin,Copyright=_addons2["default"].createClass({displayName:"Copyright",mixins:[pureRenderMixin],getInitialState:function(){var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth());return _lodash2["default"].assign({formWidth:formWidth,updateCounter:0},_formStore2["default"].getState())},componentDidMount:function(){this.unsubscribe=_formStore2["default"].addChangeListener(this.handleStateChange)},componentWillUnmount:function(){this.unsubscribe()},handleStateChange:function(action){if("$$resize"===action.type){var formWidth=Math.min(getCurrentWidth()-FORM_WIDTH_PADDING,_utils2["default"].getFormWidth()),newState={updateCounter:(this.state.updateCounter+1)%100};formWidth!==this.state.formWidth&&(newState.formWidth=formWidth),this.setState(newState)}},render:function(){var width=this.state.formWidth,tail=_utils2["default"].getTail()||{},orgName=_utils2["default"].getOrgName(),isNoLogo=_extensions2["default"].getExt("nologo"),hasCopyrightLogo=_extensions2["default"].getExt("copyrightLogo"),poweredBy=_config.lang.gPoweredBy;2===tail.copyrightType&&orgName&&(poweredBy=_config.lang.gPoweredByWithCompanyFunc({company:orgName||""}));var _poweredByNormal=_addons2["default"].createElement("a",{className:"poweredBy",target:"_blank",href:"http://www.mikecrm.com?ref=form"},_addons2["default"].createElement("span",{className:(0,_classnames2["default"])("poweredBy_logo",{poweredBy_light:isDarkBG})}),_addons2["default"].createElement("span",{className:"poweredBy_title",style:{maxWidth:width-100,color:isDarkBG?"#fff":null}},poweredBy)),_poweredBy=null;if(hasCopyrightLogo&&3===tail.copyrightType){var selfLogoStyle={};isMobile()||(selfLogoStyle={width:width}),_poweredBy=_addons2["default"].createElement("div",{className:"pb_hasSelfLogo",style:selfLogoStyle},_addons2["default"].createElement("div",{key:"company",className:"pb_companyInfo"},tail.companyLogo?_addons2["default"].createElement("a",{target:"_blank",href:tail.companyLink},_addons2["default"].createElement("img",{className:"pb_companyLogo",src:tail.companyLogo})):null,_addons2["default"].createElement("p",{className:"pb_companyName"},_addons2["default"].createElement("a",{className:"pb_caLink",target:"_blank",href:tail.companyLink,style:{color:isDarkBG?"#fff":null}},tail.companyName||""))),isNoLogo?null:isMobile()?_poweredByNormal:_addons2["default"].createElement("a",{key:"mike",className:"pb_mikeLogo",target:"_blank",href:"http://www.mikecrm.com?ref=form"}))}else isNoLogo||(_poweredBy=_poweredByNormal);return _addons2["default"].createElement("div",{className:(0,_classnames2["default"])("c_main",{"is-noLogo":isNoLogo})},_poweredBy)}});exports["default"]={inject:inject,render:render},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(25),pureRenderMixin=(_interopRequireDefault(_tools),_addons2["default"].addons.PureRenderMixin),isWx=/micromessenger/i.test(window.navigator.userAgent);exports["default"]=_addons2["default"].createClass({displayName:"succeed",mixins:[pureRenderMixin],componentDidMount:function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},_getHrefUrl:function(){var link="",settings=this.props.settings;if("2"==settings.asButtonLinkType&&settings.asButtonLink)link=settings.asButtonLink;else{var _search="";if(isWx){var hash=+new Date;_search=location.pathname!==_utils2["default"].token()?"?wechat_hash="+hash:/wechat_hash/.test(location.search)?location.search.replace(/wechat_hash=\d+(&?)/,"wechat_hash="+hash+"$1"):""==location.search?"?wechat_hash="+hash:location.search+"&wechat_hash="+hash}link=location.origin+"/"+_utils2["default"].token()+_search}return link},handleImgError:function(e){e.target.src="images/form/success.png"},handleImgLoad:function(){setTimeout(function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},100)},handleViewStatistics:function(){location.href="r.php?t="+(_utils2["default"].token()||"")},handleViewSubmitData:function(){location.href="r.php?t="+(_utils2["default"].token()||"")+"&s=2"},render:function(){var _props=this.props,settings=_props.settings,isMobile=_props.isMobile,randomCode=_props.randomCode,_utils$getStyle=_utils2["default"].getStyle(),bodyStyle=_utils$getStyle.bodyStyle,submitStyle=_utils$getStyle.submitStyle;bodyStyle=bodyStyle||{},submitStyle=submitStyle||{};var _image=null,_text=null,_randomCode=null,_feedbackNum=null,_feedbackResult=null,_button=null;if(settings&&0!==settings.asIsShowImage){var asImage=settings.asImage||{},imgUri="images/form/success.png";settings.asIsDefaultImg||(asImage.isLink&&asImage.linkUri?imgUri=asImage.linkUri:!asImage.isLink&&asImage.imageUri&&(imgUri=asImage.imageUri)),_image=_addons2["default"].createElement("div",{className:"fb_ssItem image"},_addons2["default"].createElement("img",{className:"fb_ssImg",src:imgUri,onError:this.handleImgError,onLoad:this.handleImgLoad}))}if(settings&&0!==settings.asIsShowText&&(_text=_addons2["default"].createElement("div",{className:"fb_ssItem text",key:"tips"},_addons2["default"].createElement("div",{className:"fb_ssTitle",style:{color:bodyStyle.titleColor}},"asTextTitle"in settings?settings.asTextTitle&&!_lodash2["default"].isEmpty(settings.asTextTitle)?_lodash2["default"].map(settings.asTextTitle,function(line,lnum){return _addons2["default"].createElement("p",{key:"asTextTitle"+lnum},line)}):"":_config.lang.asSubmitSucceed),_addons2["default"].createElement("div",{className:"fb_ssSubTitle",style:{color:bodyStyle.describeColor}},"asTextSubTitle"in settings?settings.asTextSubTitle&&!_lodash2["default"].isEmpty(settings.asTextSubTitle)?_lodash2["default"].map(settings.asTextSubTitle,function(line,lnum){return _addons2["default"].createElement("p",{key:"asTextSubTitle"+lnum},line)}):"":_config.lang.asSubmitSucceedDescribe))),settings&&settings.asIsShowRandomCode&&(_randomCode=_addons2["default"].createElement("div",{className:"fb_ssItem randomCode",key:"randomCode"},_addons2["default"].createElement("div",{className:"fb_randomCode"},_addons2["default"].createElement("p",{className:"fb_rdTitle"},"asRandomCodeTitle"in settings?settings.asRandomCodeTitle:_config.lang.asRandomCode),_addons2["default"].createElement("br",null),_addons2["default"].createElement("p",{className:"fb_rdExample"},randomCode)))),settings&&settings.asIsShowFeedbackNum&&(_feedbackNum=_addons2["default"].createElement("div",{className:"fb_ssItem feedbackNum",key:"feedbackNum"},_addons2["default"].createElement("p",{className:"fb_fnText"},"asFeedbackNumText"in settings?settings.asFeedbackNumText:_config.lang.asFeedbackNumber))),settings&&settings.asIsShowFeedbackResult){var isShowStatistics=0!==settings.isShowStatistics,_statistics=null,isShowData=0!==settings.isShowData,_data=null,_border=null;isShowStatistics&&(_statistics=_addons2["default"].createElement("div",{className:"fb_frStatistics",onClick:this.handleViewStatistics},_addons2["default"].createElement("p",{className:"fb_frIcon"}),_addons2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asStatisticsView))),isShowData&&(_data=_addons2["default"].createElement("div",{className:"fb_frData",onClick:this.handleViewSubmitData},_addons2["default"].createElement("p",{className:"fb_frIcon"}),_addons2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asFormSubmitView))),isShowStatistics&&isShowData&&(_border=_addons2["default"].createElement("div",{className:"fb_frBorder"})),_feedbackResult=_addons2["default"].createElement("div",{className:"fb_ssItem feedbackResult",key:"feedbackResult"},_statistics,_border,_data)}return settings&&0!==settings.asIsShowButton&&(_button=_addons2["default"].createElement("div",{className:"fb_ssItem button"},_addons2["default"].createElement("a",{className:"fb_submitBtn",style:{width:"1"==submitStyle.isFormWith||isMobile?"100%":"auto",height:Math.floor((2.2+(isMobile?.4:0))*(submitStyle.fontSize||14)),lineHeight:isMobile?Math.floor(1.6*(submitStyle.fontSize||14))+"px":null,paddingTop:(submitStyle.fontSize||14)/2,paddingBottom:(submitStyle.fontSize||14)/2,paddingLeft:submitStyle.fontSize||14,paddingRight:submitStyle.fontSize||14,fontSize:submitStyle.fontSize,fontWeight:submitStyle.fontWeight,color:submitStyle.fontColor,background:submitStyle.btnColor},href:this._getHrefUrl()},"asButtonText"in settings?settings.asButtonText||_config.lang.gGoBack:_config.lang.gGoBack))),_addons2["default"].createElement("div",{className:"fb_secondaryStatus"},_image,_text,_randomCode,_feedbackNum,_feedbackResult)}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_classnames=__webpack_require__(43),_classnames2=_interopRequireDefault(_classnames),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_formStore=__webpack_require__(37),_formStore2=_interopRequireDefault(_formStore),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_config=__webpack_require__(9),pureRenderMixin=_addons2["default"].addons.PureRenderMixin,_CDN_PATH="";"cn"===window._SLD&&(_CDN_PATH="http://cdn1.mikecrm.com/"),exports["default"]=_addons2["default"].createClass({displayName:"errorHandler",mixins:[pureRenderMixin],getInitialState:function(){return{time:null,valid:!1}},componentDidMount:function(){this.refs.password&&(this.refs.password.getDOMNode().focus(),(0,_jquery2["default"])(this.refs.password.getDOMNode()).on("keydown",this.handleKeyPreventDefault)),_formStore2["default"].addChangeListener(this.handleStateChange),_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},componentWillMount:function(){var _this=this,_props=this.props,settings=_props.settings,errorCode=_props.errorCode,timerId=void 0,self=this;errorCode===-822&&!function(){var timer=function timer(){var time=(0,_MGMoment2["default"])().time();usableTimeFromTime>=time?(self.setState({time:Math.floor(time/1e3)}),timerId=_tools2["default"].rAF(timer)):(_tools2["default"].cAF(timerId),location.reload(!0))},usableTimeFromTime=_this.usableTimeFromTime=(0,_MGMoment2["default"])(settings.usableTimeFrom).time();window.JHD&&(usableTimeFromTime=_this.usableTimeFromTime=(0,_MGMoment2["default"])().time()+1e3*window.JHD),timer()}()},componentDidUpdate:function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},componentWillUnmount:function(){(0,_jquery2["default"])(this.refs.password.getDOMNode()).off("keydown",this.handleKeyPreventDefault)},handleStateChange:function(data){"passwordValid"===data.type&&this.setState({valid:data.data})},handleRefresh:function(){location.reload()},handleImageLoad:function(){setTimeout(function(){_utils2["default"].postMessage({height:(0,_jquery2["default"])(".wrapper").outerHeight(!0)+30})},100)},handleKeyPreventDefault:function(e){13===e.which&&e.preventDefault()},handleKeySubmitPassword:function(e){this.setState({valid:!1});var keyCode=e.keyCode||e.which;13===keyCode&&(e.preventDefault(),this.handleSubmitPassword())},handleSubmitPassword:function(){var password=this.refs.password.getDOMNode().value;password?_formStore2["default"].validPassword(password):this.setState({valid:"required"})},_getAfterSubmitImage:function(){var settings=this.props.settings,asImage=settings.asImage||{},imgUri=null;return settings.asIsDefaultImg||(asImage.isLink&&asImage.linkUri?imgUri=asImage.linkUri:!asImage.isLink&&asImage.imageUri&&(imgUri=asImage.imageUri)),imgUri},handleViewStatistics:function(){location.href="r.php?t="+(_utils2["default"].token()||"")},handleViewSubmitData:function(){location.href="r.php?t="+(_utils2["default"].token()||"")+"&s=2"},renderFeedbackResult:function(){var settings=this.props.settings,bodyStyle=_utils2["default"].getStyle().bodyStyle||{},feedbackResult=null;if(settings&&settings.asIsShowFeedbackResult){var isShowStatistics=0!==settings.isShowStatistics,_statistics=null,isShowData=0!==settings.isShowData,_data=null,_border=null;isShowStatistics&&(_statistics=_addons2["default"].createElement("div",{className:"fb_frStatistics",onClick:this.handleViewStatistics},_addons2["default"].createElement("p",{className:"fb_frIcon"}),_addons2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asStatisticsView))),
isShowData&&(_data=_addons2["default"].createElement("div",{className:"fb_frData",onClick:this.handleViewSubmitData},_addons2["default"].createElement("p",{className:"fb_frIcon"}),_addons2["default"].createElement("p",{className:"fb_frTitle",style:{color:bodyStyle.titleColor}},_config.lang.asFormSubmitView))),isShowStatistics&&isShowData&&(_border=_addons2["default"].createElement("div",{className:"fb_frBorder"})),feedbackResult=_addons2["default"].createElement("div",{className:"fb_ssItem feedbackResult",key:"feedbackResult"},_statistics,_border,_data)}return feedbackResult},preRenderNeedPasswordComponent:function(){var errorTips=null;"error"==this.state.valid&&(errorTips=_addons2["default"].createElement("p",{key:"errorTips",className:"fbc_errorTips"},_config.lang.errAccessPassword));var input=_addons2["default"].createElement("div",{key:"input",className:"fb_ssItem input"},_addons2["default"].createElement("input",{type:"password",className:(0,_classnames2["default"])("fbc_input",{error:this.state.valid}),autoComplete:!1,spellCheck:!1,ref:"password",onKeyUp:this.handleKeySubmitPassword})),button=_addons2["default"].createElement("div",{key:"button",className:"fb_ssItem button"},_addons2["default"].createElement("a",{className:"fbc_button",onClick:this.handleSubmitPassword},_config.lang.gConfirm));return{image:_CDN_PATH+"images/form/err_passwordLimit.png",subTitle:_config.lang.tAccessPassword,content:[errorTips,input,button]}},preRenderBannedComponent:function(){return{image:_CDN_PATH+"images/form/err_banned.png",title:_config.lang.tBannedForm,subTitle:_config.lang.tBannedFormDescribe}},preRenderFrozenComponent:function(){return{image:_CDN_PATH+"images/form/err_banned.png",title:_config.lang.tFrozenForm,subTitle:_config.lang.tFrozenFormDescribe}},preRenderPauseComponent:function(){return{image:_CDN_PATH+"images/form/err_pause.png",title:_config.lang.tPauseForm,subTitle:_config.lang.tPauseFormDescribe}},preRenderStoppedComponent:function(){return{image:_CDN_PATH+"images/form/err_stopped.png",title:_config.lang.tStoppedForm}},preRenderWrongDNSComponent:function(){return{image:_CDN_PATH+"images/form/err_stopped.png",title:_config.lang.tWrongDNSTitle}},preRenderNotNewestComponent:function(){var button=_addons2["default"].createElement("div",{className:"fb_ssItem button"},_addons2["default"].createElement("a",{className:"fbc_button",onClick:this.handleRefresh},_config.lang.tFormRefresh));return{image:_CDN_PATH+"images/form/err_expired.png",title:_config.lang.tNotNewestForm,subTitle:_config.lang.tNotNewestFormDescribe,content:[button]}},preRenderWrongSLDComponent:function(){var frLink=_addons2["default"].createElement("div",{className:"fb_ssItem link"},_addons2["default"].createElement("a",{className:"fbc_link",href:"http://form.mikecrm.com/"+_utils2["default"].token()},"http://form.mikecrm.com/"+_utils2["default"].token()));return{image:_CDN_PATH+"images/form/err_wrongSLD.png",title:_config.lang.tWrongSLDTitle,subTitle:_config.lang.tWrongSLDDescribe,content:[frLink]}},preRenderUnstartComponent:function(){var settings=this.props.settings,time=(0,_MGMoment2["default"])().time(),shownTime=null;if(this.usableTimeFromTime-time<=864e5&&this.usableTimeFromTime-time>0){var info=Math.floor((this.usableTimeFromTime-time)/1e3),_shownSec=info%60,_tempMinInfo=(info-_shownSec)/60,_shownMin=_tempMinInfo%60,_shownHour=(_tempMinInfo-_shownMin)/60%24;shownTime=_addons2["default"].createElement("div",{className:"fb_ssItem openTime",key:"runTimer"},_addons2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tStartCountdown),_addons2["default"].createElement("p",{className:"fb_ssTime"},_config.lang.tCountdownTimerFunc({hour:_tools2["default"].leftPad(_shownHour,0,2),minutes:_tools2["default"].leftPad(_shownMin,0,2),seconds:_tools2["default"].leftPad(_shownSec,0,2)})))}else shownTime=_addons2["default"].createElement("div",{className:"fb_ssItem openTime",key:"timer"},_addons2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tStartHint),_addons2["default"].createElement("p",{className:"fb_ssTime"},(0,_MGMoment2["default"])(settings.usableTimeFrom).getFullDateTime()));return{image:_CDN_PATH+"images/form/err_timeLimit.png",title:settings.usableTimeTextBefore||_config.lang.tCollectionNotStarted,content:[shownTime]}},preRenderTimeStoppedComponent:function(){var settings=this.props.settings,parsedInfo=_tools2["default"].parseURL(location.url),viewLink=location.protocol+"//"+parsedInfo.host+"/"+_utils2["default"].token()+"?iro=1",button=_addons2["default"].createElement("div",{className:"fb_ssItem button"},_addons2["default"].createElement("a",{className:"fbc_button",href:viewLink},_config.lang.tFormView));return{image:this._getAfterSubmitImage()||_CDN_PATH+"images/form/err_numLimit.png",title:settings.usableTimeTextAfter||_config.lang.tCollectionFinished,content:[this.renderFeedbackResult(),button]}},preRenderDayTimeUnstartComponent:function(){var settings=this.props.settings,_dailyFrom=(settings.usableTimeDailyFrom||"00:00:00").split(":"),_dailyTo=(settings.usableTimeDailyTo||"23:59:59").split(":");_dailyFrom.pop(),_dailyTo.pop();var dayTime=_addons2["default"].createElement("div",{className:"fb_ssItem dayTime"},_addons2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tCollectionPeriod),_addons2["default"].createElement("p",{className:"fb_ssTime"},_dailyFrom.join(":")+" ~ "+_dailyTo.join(":")));return{image:_CDN_PATH+"images/form/err_timeLimit.png",title:settings.usableTimeTextBefore||_config.lang.tCollectionNotStarted,content:[dayTime]}},preRenderDayTimeStoppedComponent:function(){var settings=this.props.settings,_dailyFrom=(settings.usableTimeDailyFrom||"00:00:00").split(":"),_dailyTo=(settings.usableTimeDailyTo||"23:59:59").split(":");_dailyFrom.pop(),_dailyTo.pop();var dayTime=_addons2["default"].createElement("div",{className:"fb_ssItem dayTime"},_addons2["default"].createElement("p",{className:"fb_ssTimeGuide"},_config.lang.tCollectionPeriod),_addons2["default"].createElement("p",{className:"fb_ssTime"},_dailyFrom.join(":")+" ~ "+_dailyTo.join(":")));return{image:_CDN_PATH+"images/form/err_timeLimit.png",title:settings.usableTimeTextAfter||_config.lang.tCollectionFinished,content:[dayTime]}},preRenderFullEntryComponent:function(){var settings=this.props.settings,parsedInfo=_tools2["default"].parseURL(location.url),viewLink=location.protocol+"//"+parsedInfo.host+"/"+_utils2["default"].token()+"?iro=1",button=_addons2["default"].createElement("div",{className:"fb_ssItem button"},_addons2["default"].createElement("a",{className:"fbc_button",href:viewLink},_config.lang.tFormView));return{image:this._getAfterSubmitImage()||_CDN_PATH+"images/form/err_numLimit.png",title:settings.mensurableSubmitText||_config.lang.tCollectionFull,content:[this.renderFeedbackResult(),button]}},preRenderRepeatSubmitComponent:function(){var settings=this.props.settings,parsedInfo=_tools2["default"].parseURL(location.url),viewLink=location.protocol+"//"+parsedInfo.host+"/"+_utils2["default"].token()+"?iro=1",button=_addons2["default"].createElement("div",{className:"fb_ssItem button"},_addons2["default"].createElement("a",{className:"fbc_button",href:viewLink},_config.lang.tFormView));return{image:this._getAfterSubmitImage()||_CDN_PATH+"images/form/err_submitLimit.png",title:settings.onlySubmitText||_config.lang.tAlreadySubmitted,content:[this.renderFeedbackResult(),button]}},preRenderSubmitError:function(){return{image:_CDN_PATH+"images/form/err_submitError.png",title:_config.lang.tSubmitErrorTitle,subTitle:_config.lang.tSubmitErrorDescribe}},render:function(){var props=this.props,bodyStyle=_utils2["default"].getStyle().bodyStyle||{},content=null;switch(+props.errorCode){case-801:content=this.preRenderBannedComponent();break;case-802:content=this.preRenderFrozenComponent();break;case-803:content=this.preRenderPauseComponent();break;case-804:content=this.preRenderStoppedComponent();break;case-810:content=this.preRenderWrongDNSComponent();break;case-811:content=this.preRenderNotNewestComponent();break;case-812:content=this.preRenderWrongSLDComponent();break;case-820:content=this.preRenderNeedPasswordComponent();break;case-822:content=this.preRenderUnstartComponent();break;case-823:content=this.preRenderTimeStoppedComponent();break;case-824:content=this.preRenderDayTimeUnstartComponent();break;case-825:content=this.preRenderDayTimeStoppedComponent();break;case-826:content=this.preRenderFullEntryComponent();break;case-827:content=this.preRenderRepeatSubmitComponent();break;case-2:default:content=this.preRenderSubmitError()}return content?_addons2["default"].createElement("div",{className:"fb_secondaryStatus"},_addons2["default"].createElement("div",{className:"fb_ssItem image"},_addons2["default"].createElement("img",{className:"fb_ssImg",src:content.image,onLoad:this.handleImageLoad})),_addons2["default"].createElement("div",{className:"fb_ssItem text",key:"tips"},_addons2["default"].createElement("p",{className:"fb_ssTitle",style:{color:bodyStyle.titleColor}},content.title),_addons2["default"].createElement("p",{className:(0,_classnames2["default"])("fb_ssSubTitle",{error:"required"==this.state.valid})},content.subTitle)),content.content):(_MGDebugger2["default"].error("no fit error type",props),null)}}),module.exports=exports["default"]},,function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getFormCurrentMode(){return _mode}function _setFormFillCache(setFormCache){return function(e){if(_needSave){var res=_form.formStore.getState(),cacheFillingInfo=_form.utils.getCacheFilling(res.data);_lodash2["default"].isEmpty(cacheFillingInfo)||setFormCache(JSON.stringify(cacheFillingInfo))}}}function _renderQRMask(id,img,info){if(!_form.utils.token()||"null"===_form.utils.token()){var _qrImg2="images/form/icon_weChat.png";return"cn"===window._SLD&&(_qrImg2="http://cdn1.mikecrm.com/images/form/icon_weChat.png"),'<div class="mask '+id+'" id="'+id+'"><div class="scanner popInnerAnimation"><div class="scannerGuide"><img class="scannerWeChatIcon" src="'+_qrImg2+'" /><p class="scannerDes">'+_form.lang.errNoTokenShareImage+"</p></div></div>"}global.MKGetQR=null,global.MKGetQR=function(elem){ws.post(RE_GET_QRCODE,{hideErrorAlert:!0,data:{d:JSON.stringify({cvs:{t:_form.utils.token()}})}}).done(function(res){0===res.r&&(elem.src=img+"?v="+ +new Date)})};var _qrImg="images/form/icon_weChat.png";return"cn"===window._SLD&&(_qrImg="http://cdn1.mikecrm.com/images/form/icon_weChat.png"),'<div class="mask '+id+'" id="'+id+'"><div class="scanner popInnerAnimation"><img class="scannerQRCode" src="'+img+'" onerror="MKGetQR(this)"/><div class="scannerGuide"><img class="scannerWeChatIcon" src="'+_qrImg+'" /><p class="scannerDes">'+info+"</p></div></div>"}function formShareMask(){_mode!==MODE_PREVIEW&&_mode!==MODE_FILLING||($wrapper.css("overflow","hidden").on("click.closeShare","#shareMask",function(){(0,_jquery2["default"])("#shareMask").remove(),$wrapper.css("overflow-y","auto").off("click.closeShare"),$container.removeClass("form-disabled")}),$submitForm.after(_renderQRMask("shareMask",_form.utils.QR(),_form.lang.sShareFormDis)),$container.addClass("form-disabled"))}function wechatOnlyMask(){_mode!==MODE_FILLING&&_mode!==MODE_IRO||($body.css({overflow:"hidden",width:"100%",height:"100%"}).bind("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),$window.css({overflow:"hidden",width:"100%",height:"100%"}),$submitForm.after(_renderQRMask("",_form.utils.QR(),_form.lang.errOnlyInWeChat)),$container.addClass("form-disabled"))}function _submit(){if(!_saving&&!_processed){_form.formStore.dispatch({type:"savingForm"}),_form.formStore.dispatch({type:"submitValid"});var res=_form.formStore.getState();if(_needSave=!1,res.valid&&!_lodash2["default"].isEmpty(res.valid))return _needSave=!0,void _form.formStore.dispatch({type:"endSubmit"});_form.utils.formCacheId()&&!_lodash2["default"].isEmpty(_form.utils.getCacheFilling(res.data))&&updateCache(JSON.stringify(_form.utils.getCacheFilling(res.data))),_saving=!0;var _data=res.data;_savedData=_data;var filesInfo=_form.formStore.getFiles(),_specialSubmit=!1,$submitWorker=(0,_jquery2["default"])("#submitWorker"),_postData=_form.utils.getSubmitData(_data);if(window.IN_WECHAT&&(_postData.cvs.c.ext||(_postData.cvs.c.ext={}),_postData.cvs.c.ext.cashier)){var _jumpLink=_redirectUrl(_data);_postData.cvs.c.ext.jp={rdu:_jumpLink}}$submitWorker.length>0&&!_lodash2["default"].isEmpty(filesInfo)&&(isOldIE?!function(){$submitWorker=(0,_jquery2["default"])("#submitFrame");var hiddenInput=(0,_jquery2["default"])('<input type="hidden" name="d" >').insertBefore(".submit").val(JSON.stringify(_postData));$submitWorker.on("load",function(e){hiddenInput.remove();var content=$submitWorker.contents().find("body").html();try{_submitFin(JSON.parse(content))}catch(e){_submitFail()}}),_lodash2["default"].forEach(filesInfo,function(items,cpId){var $cp=(0,_jquery2["default"])("#"+cpId);$cp.length>0&&!function(){var num=0;_lodash2["default"].forEach(items.fileList,function(data,i){$cp.find('[data-idx="'+i+'"]').attr("name","ATTA_"+cpId+"_"+num),num++})}()}),_specialSubmit=!0,$submitForm.submit()}():!function(){var files=[],paramNames=[];_lodash2["default"].forEach(filesInfo,function(items,cpId){var num=0;_lodash2["default"].forEach(items.fileList,function(data,i){files.push(data),paramNames.push("ATTA_"+cpId+"_"+num),num++})}),_lodash2["default"].isEmpty(files)||(_specialSubmit=!0,$submitWorker.fileupload("send",{files:files,paramName:paramNames,url:SUBMIT,formData:{d:JSON.stringify(_postData)}}).success(_submitFin))}()),_specialSubmit||ws.post(SUBMIT,{hideErrorAlert:!0,data:{d:JSON.stringify(_postData)}}).done(_submitFin).fail(function(response){_submitFail()})}}function _setSubmitOnce(){if(_form.utils.getSettings("isOnlySubmit")){var expiredTime=new Date;expiredTime.setDate(expiredTime.getDate()+2),expiredTime.setHours(23),expiredTime.setMinutes(59),expiredTime.setSeconds(59),_submitOnceList[_form.utils.token()]=expiredTime.getTime(),_MGCache2["default"].set(_SUBMIT_ONCE_KEY,JSON.stringify(_submitOnceList))}}function _redirectUrl(data){var settings=_form.utils.getSettings(),_jumpLink=null;if(2===settings.afterSubmitPage&&(settings.asIsJumpToLuxury&&_lodash2["default"].forEach(settings.asJumpToLuxury,function(info,cpId){if(data[cpId]){var _component=_form.utils.getComponents(cpId);_jumpLink=info[_lodash2["default"].find(_component.options,{sId:data[cpId][0]}).id]}}),_jumpLink||(_jumpLink=settings.asJumpTo||null)),_jumpLink){var link=_lodash2["default"].trim(_jumpLink||""),linkParseUrl=(0,_tools.parseURL)(link),currentLink=(0,_tools.parseURL)(location.href);return linkParseUrl.protocol&&linkParseUrl.host!==currentLink.host||(_MGString2["default"].isUrl(link)?link.match(/^(http:\/\/|https:\/\/)/)||(link="http://"+link):link=null),link}return null}function _submitSucceed(data){var settings=_form.utils.getSettings(),link=data.link,randomCode=data.randomCode;if(link){var _ret4=function(){var jumpToPage='<div class="mask maskJumpInfo" id="submitJump"><div class="mj_content popInnerAnimation"><div class="mj_img"></div><p class="mj_succeedTips">'+_form.lang.succeedTips+'</p><div class="mj_jumpTips"><p class="mj_jtTitle">'+_form.lang.succeedJumpTips+'</p><p class="mj_jtInfo">'+link+"</p>";"ja"===_form.currentLang?jumpToPage+='<p class="mj_jtTitle">ã¸ç§»å‹•ã™ã‚‹</p>':"ru"===_form.currentLang&&(jumpToPage+='<p class="mj_jtTitle">Ñ‡ÐµÑ€ÐµÐ· 3 Ñ.</p>'),jumpToPage+="</div></div></div>",$submitForm.after(jumpToPage),(0,_jquery2["default"])(".ie8").length>0?(0,_jquery2["default"])("html").addClass("ie8noscroll"):(0,_jquery2["default"])("html").addClass("noscroll"),$container.addClass("form-disabled");var startTime=(0,_MGMoment2["default"])().time(),timer=(0,_jquery2["default"])("#submitJump").find(".timeReducer"),reduceInterval=setInterval(function(){var currentTime=(0,_MGMoment2["default"])().time(),reduceTimer=Math.max(Math.ceil(_REDUCE_JUMP_SEC-(currentTime-startTime)/1e3),0);timer.text(reduceTimer)},300);return setTimeout(function(){clearInterval(reduceInterval),_processed=!0,(0,_jquery2["default"])("#submitJump").remove(),(0,_jquery2["default"])("html").removeClass("noscroll").removeClass("ie8noscroll"),$container.removeClass("form-disabled"),location.href=link},1e3*_REDUCE_JUMP_SEC),{v:void 0}}();if("object"===("undefined"==typeof _ret4?"undefined":_typeof(_ret4)))return _ret4.v}_processed=!0,_addons2["default"].unmountComponentAtNode($body[0]),_addons2["default"].unmountComponentAtNode($submit[0]),_addons2["default"].render(_addons2["default"].createElement(_form.Succeed,{settings:settings,isMobile:_isMobile,randomCode:randomCode}),$body[0]),settings&&0!==settings.asIsShowButton&&_addons2["default"].render(_addons2["default"].createElement(_SucceedReturn2["default"],{isMobile:_isMobile}),$submit[0])}function _submitFin(res){if(_finExtData={},0!==res.r)return res.r===-850?(_form.formStore.dispatch({type:"optionQuotaError",errorInfo:[].concat(res.e)}),_needSave=!0,_saving=!1):res.r===-851?(_form.formStore.dispatch({type:"commodityQuotaError",errorInfo:[].concat(res.e)}),_needSave=!0,_saving=!1):res.r===-852?(_form.formStore.dispatch({type:"duplicateDataError",errorId:res.e}),_needSave=!0,_saving=!1):res.r===-828?(_form.formStore.dispatch({type:"MobileValidEmpty",errorId:_form.utils.getValidMobile()}),_needSave=!0,_saving=!1):res.r===-829?(_form.formStore.dispatch({type:"MobileValidCodeError",errorId:_form.utils.getValidMobile()}),_needSave=!0,_saving=!1):_error(res.r,_isMobile),void _form.formStore.dispatch({type:"endSubmit"});if(_saving=!1,_MGCache2["default"].remove(_form.utils.formCacheId()),res.randomCode&&(_finExtData.randomCode=res.randomCode),res.cashier){var _cashierInfo=_lodash2["default"].assign({},res.cashier);window.IN_WECHAT&&(_cashierInfo.inWechat=!0,_cashierInfo.redirectUrl=_redirectUrl(_savedData),_cashierInfo.randomCode=res.randomCode||null,_cashierInfo.t=_form.utils.token()),_form.formStore.dispatch({type:"cashierInfo",data:_cashierInfo})}else _afterSubmit(_savedData,_finExtData);_form.formStore.dispatch({type:"endSubmit"})}function _submitFail(){_MGDebugger2["default"].error("unkown error..",arguments)}function _afterSubmit(data,extData){_setSubmitOnce();var link=_redirectUrl(data);_submitSucceed({link:link,randomCode:extData.randomCode})}function _paid(){_afterSubmit(_savedData,_finExtData)}function _error(errCode,isMobile){_addons2["default"].unmountComponentAtNode($submit[0]),[-52,-801,-802,-888].indexOf(errCode)>-1?($wrapper.css("backgroundColor","#FAFAFA"),_addons2["default"].render(_addons2["default"].createElement(_form.HugeErrorHandler,{errorCode:errCode,isMobile:isMobile}),$container[0])):_addons2["default"].render(_addons2["default"].createElement(_form.ErrorHandler,{errorCode:errCode,settings:_form.utils.getSettings(),isMobile:isMobile}),$body[0])}function bindEvent(){"onresize"in window&&$window.on("resize.windowResize",resizeTrigger),"onorientationchange"in window&&$window.on("orientationchange.windowResize",resizeTrigger),_mode===MODE_FILLING?$form.on("click.submit","#form_submit",_submit).on("click.share",".f_shareBtn",formShareMask):_mode===MODE_PREVIEW&&$form.on("click.share",".f_shareBtn",formShareMask)}function decorateFormTheme(isMobile){var THEME_COLOR=(_form.utils.getStyle("themeColor")||"#2D8FD9").toUpperCase();if(THEME_COLOR&&"#2D8FD9"!==THEME_COLOR){var THEME_COLOR_RGB=_MGColor2["default"].convertToRGBObj.fromHex(THEME_COLOR),style=[];style.push(".fbc_optionSvg.selected, .fbc_optionSvg:hover, .fbc_optionVal:hover .fbc_optionSvg{color:"+THEME_COLOR+";}"),style.push(".fbc_commodityPrice, .fbc_dtIcon, .fbc_paImgState, .fbc_descriptionLink, .fbc_descriptionLink:visited, .fbc_foldBtn, .fbc_foldBtn:visited, .fbc_commodityNameJump:hover, .lg-countpicker-reduce, .lg-countpicker-increase, .fbc_addIcon:hover, .fbc_addIcon:active{color:"+THEME_COLOR+";}"),style.push(".fbc_input:focus, .fbc_input.is_focus, .fbc_select.focus, .fbc_selectList, .fbc_paItem:hover, .fbc_uploadFile:hover,  .fbc_dtDropWrapper, .calendar_bDayItem .current-month.selected,.fbc_roItem.dragging, .lg-countpicker-reduce:hover, .lg-countpicker-increase:hover{border-color:"+THEME_COLOR+";}"),style.push(".fbc_raHovered .fbc_raGroove{color:"+THEME_COLOR+";background-color:rgba("+THEME_COLOR_RGB.r+", "+THEME_COLOR_RGB.g+", "+THEME_COLOR_RGB.b+", 0.5);}.fbc_raItem.has-value .fbc_raNum, .fbc_raNum.has_value, .fbc_raHovered .fbc_raNum, .fbc_raFilled .fbc_raNum, .fbc_raFilled.fbc_raHovered .fbc_raNum, .lg-countpicker-reduce:active, .lg-countpicker-increase:active{background-color:"+THEME_COLOR+";}"),style.push(".fbc_selectLi:hover, .calendar_switcher{background-color:"+THEME_COLOR+";}"),style.push(".fbc_selectLi.fbc_currentSelected, .calendar_hTitle, .calendar_hDecrease, .calendar_hIncrease, \n\t.calendar_hTitle.canSwitch .hasTopLayer, .calendar_bDayItem.current-month:hover, .calendar_bDayItem.current-month:hover a, \n\t.calendar_bDayItem.current-month:hover a:hover, .calendar_bDayItem.current-month:hover a:visited, \n\t.calendar_bDayItem.current-month.selected, .calendar_bDayItem.current-month.selected a, \n\t.calendar_bDayItem.current-month.selected a:hover, .calendar_bDayItem.current-month.selected a:visited{color:"+THEME_COLOR+";border-color:"+THEME_COLOR+";}\n\t.fbc_button.calendar_confirm,.calendar_cancel:active{background-color:"+THEME_COLOR+";}\n\t.calendar_cancel, .calendar_typeItem:hover .calendar_typeTitle, .calendar_typeItem.selected .calendar_typeTitle{color:"+THEME_COLOR+";}.calendar_cancel:hover{border-color:"+THEME_COLOR+";}"),isMobile&&(style.push(".fbc_picOptionsChecked{border-color:"+THEME_COLOR+";box-shadow-color:"+THEME_COLOR+";}"),style.push(".fbc_select .fbc_innerSelect:focus{box-shadow-color:"+THEME_COLOR+";}"),style.push(".fbc_tabularInput.fbc_input, .fbc_tabularInput:focus{box-shadow-color:"+THEME_COLOR+";}"));var _style=(0,_jquery2["default"])("#formStyle");0===_style.length?(0,_jquery2["default"])("head").append('<style id="formStyle" type="text/css">'+style.join("\n")+"</style>"):_style.html(style.join("\n"))}}function decorateForm(isMobile){var isOpacityBackground=arguments.length>1&&void 0!==arguments[1]&&arguments[1],globalStyle=_form.utils.getStyle(),bodyStyle=globalStyle.bodyStyle,style={};if((!isMobile||bodyStyle&&null!=bodyStyle.bgOpacityValue&&bodyStyle.bgOpacityValue<1)&&globalStyle.background){switch(style.backgroundImage="url("+globalStyle.background+")",style.backgroundPosition="center center",style.backgroundRepeat="no-repeat",globalStyle.bgLayoutHorizontal||6){case 3:style.backgroundRepeat="repeat-x";break;case 4:style.backgroundSize="100% auto";break;case 5:style.backgroundPositionX="left";break;case 7:style.backgroundPositionX="right";break;case 6:default:style.backgroundPositionX="center"}switch(globalStyle.bgLayoutVertical||6){case 3:style.backgroundRepeat="repeat-y";break;case 4:style.backgroundSize="auto 100%";break;case 8:style.backgroundPositionY="top";break;case 9:style.backgroundPositionY="bottom";break;case 6:default:style.backgroundPositionY="center"}globalStyle.bgLayoutHorizontal===globalStyle.bgLayoutVertical&&(3===globalStyle.bgLayoutVertical?style.backgroundRepeat="repeat":4===globalStyle.bgLayoutVertical&&(style.backgroundSize="cover")),globalStyle.backgroundFixed?(style.overflow="hidden",$submitForm.addClass("coverForm")):$submitForm.removeClass("coverForm"),style.backgroundSize&&isIE8&&("cover"===style.backgroundSize||style.backgroundSize.indexOf("100%")>=0)&&(style.backgroundSize=null,$form.after('<img src="'+globalStyle.background+'" width="100%" height="100%" style="position: absolute; left: 0; right: 0;top: 0;bottom: 0; z-index: 0;">'))}if(isOpacityBackground)style.backgroundColor="transparent";else if(globalStyle.bgColor){var c=new _MGColor.OColor(globalStyle.bgColor);style.backgroundColor=c.getHEX()}var bodyContentStyle={};if(bodyStyle&&(bodyStyle.bgColor||null!=bodyStyle.bgOpacityValue&&1!==bodyStyle.bgOpacityValue)&&(bodyStyle.bgColor&&(bodyContentStyle.backgroundColor=bodyStyle.bgColor),1!==bodyStyle.bgOpacityValue)){var newColor=new _MGColor.OColor(bodyStyle.bgColor||"#ffffff");newColor.set("a",bodyStyle.bgOpacityValue),bodyContentStyle.zoom=1,isIE8?(bodyContentStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",bodyContentStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",bodyContentStyle.backgroundColor="transparent"):bodyContentStyle.backgroundColor=newColor.getRGBA()}_lodash2["default"].isEmpty(style)||$wrapper.css(style),_lodash2["default"].isEmpty(bodyContentStyle)||$body.css(bodyContentStyle)}function formRender(data){$form.trigger("viewRender",data)}function bindViewRender(){$form.bind("viewRender",function(e,isMobile,iframeSettings){decorateFormTheme(isMobile),decorateForm(isMobile,(iframeSettings||{}).opacityBg);var bgColor=void 0,drakBg=!1;if(bgColor=_form.utils.getStyle("bgColor")||null){var bgColorObject=_MGColor2["default"].convertToRGBObj.fromHex(bgColor);drakBg=_MGColor2["default"].colorGrayLevel(bgColorObject.r,bgColorObject.g,bgColorObject.b)<170}_form.header.render($form);var _JHR=_form.utils.JHR();if(0===_JHR||_mode!==MODE_FILLING&&_mode!==MODE_IRO&&_mode!==MODE_FINISH_SUBMIT)if(_mode===MODE_FINISH_SUBMIT){_setSubmitOnce();var _urlInfo=(0,_tools.parseURL)(location.href),_randomCode=decodeURIComponent(_urlInfo.params.rc||""),_link=decodeURIComponent(_urlInfo.params.rdu||"");_submitSucceed({link:_link,randomCode:_randomCode}),_addons2["default"].unmountComponentAtNode($copyright[0]),_form.copyright.render($copyright,drakBg)}else{if(_form.utils.formInfoInit(),_mode!==MODE_READONLY&&_mode!==MODE_IRO){var _qrImg="images/form/form_shareQr.png";"cn"===window._SLD&&(_qrImg="http://cdn1.mikecrm.com/images/form/form_shareQr.png"),0!==_form.utils.getSettings("isShowShare")&&0===(0,_jquery2["default"])(".f_shareBtn").length&&$form.append('<a class="f_shareBtn '+(drakBg?"f_shareLight":"")+'" title="'+_form.lang.sShareBtnTitle+'"><img src="'+_qrImg+'" ></a>')}if(_mode!==MODE_IRO||_isWcMask||(0,_jquery2["default"])("body").addClass("readOnly").prepend('<p class="form_globalTips">'+_form.lang.tFormViewTIps+"</p>"),_mode===MODE_FILLING){if(_cache)try{_form.utils.setDefaultValue(JSON.parse(_cache)),_form.formStore.setDefaultFillingData()}catch(e){}_form.formStore.setUvdData(),_form.utils.hasAttachmentComponent()&&(isOldIE?$submitForm.attr({id:"submitWorker",action:SUBMIT,target:"submitFrame",method:"post"}).append('<iframe id="submitFrame" name="submitFrame" class="f_submitWorker"/>'):($submitForm.append('<input type="file" id="submitWorker" class="f_submitWorker"/>'),(0,_jquery2["default"])("#submitWorker").fileupload({dataType:"json",replaceFileInput:!0,multiple:!0})))}_form.formStore.setIpLoc(),_form.body.render($body),_addons2["default"].unmountComponentAtNode($submit[0]),_form.submit.render($submit),_addons2["default"].unmountComponentAtNode($copyright[0]),_form.copyright.render($copyright,drakBg)}else _form.utils.formInfoInit(),_error(_JHR,isMobile),[-52,-801,-802,-888].indexOf(_JHR)===-1&&(_addons2["default"].unmountComponentAtNode($copyright[0]),_form.copyright.render($copyright,drakBg))}).on("paymentSucceed",_paid)}function cacheManager(setCache){var _FORM_CACHE_KEY=_form.utils.formCacheId(),formCache=void 0,submitOnceInfoCache=void 0,pageReferrerCache=void 0;_FORM_CACHE_KEY&&(formCache=_MGCache2["default"].get(_FORM_CACHE_KEY))?_MGCache2["default"].remove(_FORM_CACHE_KEY):formCache=null,(submitOnceInfoCache=_MGCache2["default"].get(_SUBMIT_ONCE_KEY))?!function(){submitOnceInfoCache=JSON.parse(submitOnceInfoCache);var _newList={},_currentTime=(new Date).getTime();_lodash2["default"].forEach(submitOnceInfoCache,function(info,key){_currentTime-info<0&&(_newList[key]=info)}),submitOnceInfoCache=_newList,_MGCache2["default"].set(_SUBMIT_ONCE_KEY,JSON.stringify(submitOnceInfoCache))}():submitOnceInfoCache={},(pageReferrerCache=_MGCache2["default"].get(_FORM_PAGE_REFERRER_KEY))?_MGCache2["default"].remove(_FORM_PAGE_REFERRER_KEY):pageReferrerCache=null,updateCache=function(data){_MGCache2["default"].set(_form.utils.formCacheId(),data)},updateSubmitOnceCache=function(data){_MGCache2["default"].set(_FORM_PAGE_REFERRER_KEY,data)};var saveFormCache=setCache(updateCache);return window.onbeforeunload=saveFormCache,"onpagehide"in window&&(window.addEventListener("pagehide",function(){saveFormCache()},!1),window.addEventListener("blur",function(){saveFormCache()},!1)),$window.on("triggerSaveCache",saveFormCache),{formCache:formCache,submitOnceInfoCache:submitOnceInfoCache,pageReferrerCache:pageReferrerCache}}function getFormContent(){return{$scrollContainer:$scrollContainer,$window:$window,$container:$container,$wrapper:$wrapper,$form:$form,$body:$body,$submit:$submit,$copyright:$copyright,$submitForm:$submitForm}}function updateContentBinder(content){$scrollContainer=content.$scrollContainer,$window=content.$window,$container=content.$container,$wrapper=content.$wrapper,$form=content.$form,$body=content.$body,$submit=content.$submit,$copyright=content.$copyright,$submitForm=content.$submitForm}function initMain(injection){function _init(){_mode=injection.setPageMode(),_form.utils.setAsRaw(injection.setRawInfo(),_mode),_hasError=0!==_form.utils.JHR(),_IS_IRO&&(_mode=MODE_IRO),_MGDebugger2["default"].log("mode?",_mode);var content=injection.contentBinder(_form.utils);if(updateContentBinder(content),$form.show(),_mode===MODE_FILLING){var _cacheManager=cacheManager(_setFormFillCache),formCache=_cacheManager.formCache,submitOnceInfoCache=_cacheManager.submitOnceInfoCache,pageReferrerCache=_cacheManager.pageReferrerCache;_cache=formCache,_submitOnceList=submitOnceInfoCache,_form.utils.getSettings("isOnlySubmit")&&submitOnceInfoCache[_form.utils.token()]&&(_hasError=!0,_form.utils.updateRawInfo("JHR",-827)),pageReferrerCache&&_form.utils.setCacheReferrer(pageReferrerCache),!_form.utils.getSettings("isOnlyWeChat")||window.IN_WECHAT&&window.WC_JSAPI_PARAMS||(_isWcMask=!0,_mode=MODE_IRO,wechatOnlyMask()),injection.setMessageIframe(function(){_form.formStore.dispatch({type:"$$messenger"}),formRender([injection.isMobile(),injection.getPostSettings()])});try{injection.setWechat()}catch(e){}}bindEvent(),bindViewRender(),formRender([injection.isMobile(),injection.getPostSettings()]),injection.eventBind()}global.MKIsMobile=injection.isMobile;var _injectData={isMobile:injection.isMobile,getCurrentWidth:injection.getCurrentWidth,getMode:getFormCurrentMode};return _form.formStore.inject(_lodash2["default"].assign({updateRawInfo:injection.updateRawInfo,setRawInfo:injection.setRawInfo,getContent:getFormContent},_injectData)),_form.header.inject(_injectData),_form.body.inject(_lodash2["default"].assign({getContent:getFormContent},_injectData)),_form.submit.inject(_injectData),_form.copyright.inject(_injectData),_form.utils.init(),_isMobile=injection.isMobile(),{init:_init,dmwCheck:_form.formStore.checkDMW,isMobile:injection.isMobile(),updateContentBinder:updateContentBinder}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lodash=__webpack_require__(10),_lodash2=_interopRequireDefault(_lodash),_jquery=__webpack_require__(2),_jquery2=_interopRequireDefault(_jquery),_addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_MGCache=__webpack_require__(41),_MGCache2=_interopRequireDefault(_MGCache),_form=__webpack_require__(8),_SucceedReturn=__webpack_require__(126),_SucceedReturn2=_interopRequireDefault(_SucceedReturn),_MGWsUtil=__webpack_require__(38),_MGWsUtil2=_interopRequireDefault(_MGWsUtil),_tools=__webpack_require__(25),_MGMoment=__webpack_require__(29),_MGMoment2=_interopRequireDefault(_MGMoment),_MGDebugger=__webpack_require__(24),_MGDebugger2=_interopRequireDefault(_MGDebugger),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),_MGColor=__webpack_require__(35),_MGColor2=_interopRequireDefault(_MGColor);
__webpack_require__(64),__webpack_require__(65),__webpack_require__(66),__webpack_require__(67);var isIE8=_form.utils.isIE8,isOldIE=_form.utils.isOldIE,_IS_IRO=_form.utils._IS_IRO;_addons2["default"].initializeTouchEvents(!0),global.jQuery=global.$=_jquery2["default"];var ws={ajax:_MGWsUtil2["default"].ajax,post:function(url,options){var _default={url:url,type:"POST",dataType:"json"};return _MGWsUtil2["default"].ajax(_jquery2["default"].extend({mode:"abort"},options,_default))},abort:_MGWsUtil2["default"].abort},MODE_UNKNOW=-1,MODE_FILLING=1,MODE_PREVIEW=2,MODE_READONLY=3,MODE_IRO=4,MODE_FINISH_SUBMIT=5,_mode=MODE_UNKNOW,_hasError=!1,_needSave=!0,$form=void 0,$body=void 0,$submit=void 0,$copyright=void 0,$wrapper=void 0,$container=void 0,$scrollContainer=void 0,$submitForm=void 0,$window=void 0,_isMobile=void 0,SUBMIT="handler/web/form_runtime/handleSubmit.php",RE_GET_QRCODE="handler/web/form_runtime/handleGenQr.php",_saving=!1,_processed=!1,_savedData=null,_REDUCE_JUMP_SEC=5,_finExtData={},resizeTrigger=_lodash2["default"].debounce(function(){$form.trigger("$$resize"),_form.formStore.dispatch({type:"$$resize"})},200),_SUBMIT_ONCE_KEY="MKSO",_FORM_PAGE_REFERRER_KEY="MKFPR",_cache=null,_submitOnceList=[],updateCache=null,updateSubmitOnceCache=null,_isWcMask=!1;exports["default"]=initMain,module.exports=exports["default"]}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _addons=__webpack_require__(14),_addons2=_interopRequireDefault(_addons),_config=__webpack_require__(9),_MGColor=__webpack_require__(35),_utils=__webpack_require__(22),_utils2=_interopRequireDefault(_utils),_tools=__webpack_require__(25),isWx=(_interopRequireDefault(_tools),/micromessenger/i.test(window.navigator.userAgent));exports["default"]=_addons2["default"].createClass({displayName:"SucceedReturn.react",_getHrefUrl:function(){var link="",settings=_utils2["default"].getSettings();if("2"==settings.asButtonLinkType&&settings.asButtonLink)link=settings.asButtonLink;else{var _search="";if(isWx){var hash=+new Date;_search=location.pathname!==_utils2["default"].token()?"?wechat_hash="+hash:/wechat_hash/.test(location.search)?location.search.replace(/wechat_hash=\d+(&?)/,"wechat_hash="+hash+"$1"):""==location.search?"?wechat_hash="+hash:location.search+"&wechat_hash="+hash}link=location.origin+"/"+_utils2["default"].token()+_search}return link},render:function(){var style=_utils2["default"].getStyle(),settings=_utils2["default"].getSettings(),isMobile=this.props.isMobile,submitStyle=style.submitStyle||{},alignArray=["","left","center","right"],submitFieldStyle={textAlign:alignArray[submitStyle.btnAlign||2]};if(submitStyle.bgColor&&(submitFieldStyle.backgroundColor=submitStyle.bgColor),null!=submitStyle.bgOpacity&&1!==submitStyle.bgOpacityValue){var newColor=new _MGColor.OColor(submitStyle.bgColor||"#ffffff");newColor.set("a",submitStyle.bgOpacityValue),submitFieldStyle.backgroundColor=newColor.getRGBA(),submitFieldStyle.zoom=1,_utils.isIE8&&(submitFieldStyle.filter="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr="+newColor.getIEFullHEX()+", endColorstr="+newColor.getIEFullHEX()+")",submitFieldStyle["-ms-filter"]="progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='"+newColor.getIEFullHEX()+"', endColorstr='"+newColor.getIEFullHEX()+"')",submitFieldStyle.backgroundColor="transparent")}if(submitStyle.background){submitFieldStyle.backgroundImage="url("+submitStyle.background+")",submitFieldStyle.backgroundPosition="center center",submitFieldStyle.backgroundRepeat="no-repeat";var bglH=submitStyle.bgLayoutHorizontal||6,bglV=submitStyle.bgLayoutVertical||6;switch(bglH){case 3:submitFieldStyle.backgroundRepeat="repeat-x";break;case 4:submitFieldStyle.backgroundSize="100% auto";break;case 5:submitFieldStyle.backgroundPositionX="left";break;case 7:submitFieldStyle.backgroundPositionX="right";break;case 6:default:submitFieldStyle.backgroundPositionX="center"}switch(bglV){case 3:submitFieldStyle.backgroundRepeat="repeat-y";break;case 4:submitFieldStyle.backgroundSize="auto 100%";break;case 8:submitFieldStyle.backgroundPositionY="top";break;case 9:submitFieldStyle.backgroundPositionY="bottom";break;case 6:default:submitFieldStyle.backgroundPositionY="center"}3==bglH&&3==bglV&&(submitFieldStyle.backgroundRepeat="repeat"),4==bglH&&4==bglV&&(submitFieldStyle.backgroundSize="cover")}var submitBtnStyle={width:"1"==submitStyle.isFormWith||this.props.isMobile?"100%":"auto",height:Math.floor(2.2*(submitStyle.submitFontSize||14))+(isMobile?6:0),paddingTop:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingBottom:(submitStyle.submitFontSize||14)/2+(isMobile?3:0),paddingLeft:(submitStyle.submitFontSize||14)+6,paddingRight:(submitStyle.submitFontSize||14)+6,fontSize:submitStyle.submitFontSize,fontWeight:submitStyle.fontWeight?"bold":"normal",color:submitStyle.fontColor,background:submitStyle.btnColor};return _addons2["default"].createElement("div",{className:"submit",style:submitFieldStyle},_addons2["default"].createElement("a",{className:"fb_submitBtn",style:submitBtnStyle,href:this._getHrefUrl()},"asButtonText"in settings?settings.asButtonText||"":_config.lang.gGoBack))}}),module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _setPageMode(){var _mode=+window._VT;return isNaN(_mode)?1:_mode<0||_mode>5?1:_mode||1}function _containerBinder(utils){return _U=utils,$window=(0,_jquery2["default"])(window),$form=(0,_jquery2["default"])(".main"),$body=$form.find(".body"),$submit=$form.find(".submitWrapper"),$copyright=(0,_jquery2["default"])(".copyright"),$wrapper=(0,_jquery2["default"])("body"),$container=(0,_jquery2["default"])(".wrapper"),$scrollContainer=(0,_jquery2["default"])("body, .handleForm"),$submitForm=(0,_jquery2["default"])(".handleForm"),{$form:$form,$body:$body,$submit:$submit,$copyright:$copyright,$wrapper:$wrapper,$container:$container,$scrollContainer:$scrollContainer,$submitForm:$submitForm,$window:$window}}function _setRawInfo(){return{raw:_rawInfo,vst:_vst,JHR:_jhr,token:_token,OQ:_OQ}}function _updateRawInfo(){_rawInfo=window.SOUL,_vst=window.VST,_jhr=window.JHR,_token=window._T,_OQ=window.OQ}function _isMobile(){return _tools2["default"].deviceCheck.isMobile}function _getCurrentWidth(){return _tools2["default"].getWindowSize().width}function _getStaticPath(relativePath){return _MGString2["default"].isUrl(relativePath)?relativePath:"cn"===window._SLD&&"./images/form/wechat_default.jpg"===relativePath?"http://cdn1.mikecrm.com/images/form/wechat_default.jpg":null!=window._LFP&&!window._CDN&&window._LFP<.5?location.protocol+"//pcdn.mikecrm.com/"+relativePath.replace(/^(\.)?\//g,""):location.protocol+"//"+location.host+"/"+relativePath.replace(/^(\.)?\//g,"")}function _setWechat(){var urlInfo=_tools2["default"].parseURL(location.href);if(urlInfo.params&&urlInfo.params.WCT){var _WCT=urlInfo.params.WCT,date=new Date;date.setTime(date.getTime()+3456e7);var expires="expires="+date.toGMTString();document.cookie="WCT="+_WCT+"; path=/; "+expires+"; domain="+location.host.replace(/^(cn|hk|sv|va|sg|jp)\./,"")+";",document.cookie="WCT="+_WCT+"; path=/; "+expires+"; domain="+location.host+";"}if(!window.IN_WECHAT||!window.WC_JSAPI_PARAMS)return!1;var _WC_JSAPI_LIST=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","openLocation","getLocation","showOptionMenu"],_configWx={debug:!1,appId:WC_JSAPI_PARAMS.appId,timestamp:WC_JSAPI_PARAMS.timestamp,nonceStr:WC_JSAPI_PARAMS.nonceStr,signature:WC_JSAPI_PARAMS.signature,jsApiList:_WC_JSAPI_LIST};_jweixin2["default"].config(_configWx);var _U$getSettings=_U.getSettings(),weChatTitle=_U$getSettings.weChatTitle,weChatImage=_U$getSettings.weChatImage,weChatDescribe=_U$getSettings.weChatDescribe,_U$getHeader=_U.getHeader(),headline=_U$getHeader.headline,description=_U$getHeader.description;headline=(headline||[""]).join(""),description=(description||[""]).join("");var _shareInfo={title:void 0===weChatTitle?headline||_config.lang.gWeChatSetHeadlineDefault:weChatTitle||"",desc:void 0===weChatDescribe?description:weChatDescribe||"",link:location.origin+"/"+_U.token(),imgUrl:_getStaticPath(weChatImage||"./images/form/wechat_default.jpg")};_jweixin2["default"].ready(function(){_jweixin2["default"].checkJsApi({jsApiList:_WC_JSAPI_LIST,success:function(res){"checkJsApi:ok"===res.errMsg&&(_jweixin2["default"].onMenuShareTimeline(_shareInfo),_jweixin2["default"].onMenuShareAppMessage(_shareInfo),_jweixin2["default"].onMenuShareQQ(_shareInfo),_jweixin2["default"].onMenuShareWeibo(_shareInfo),_jweixin2["default"].showOptionMenu())}})})}function _setMessengerInIframe(cb){_tools2["default"].inIframe()&&window.addEventListener&&window.addEventListener("message",function(evt){if(evt.data){var _d={};try{_d=JSON.parse(evt.data)}catch(e){}(_d.cif||_d.atp)&&(_iframeMessageData={},_iframeMessageData.opacityBg=_d.atp,_U.setInjectState(_d.cif),$wrapper.addClass("inframe"),_U.postMessage({height:$container.outerHeight(!0)+30}),cb&&cb(evt,_d))}})}function _getIframeSettings(){return _iframeMessageData||{}}function _eventBind(){}Object.defineProperty(exports,"__esModule",{value:!0});var _lodash=__webpack_require__(10),_jquery=(_interopRequireDefault(_lodash),__webpack_require__(2)),_jquery2=_interopRequireDefault(_jquery),_tools=__webpack_require__(25),_tools2=_interopRequireDefault(_tools),_jweixin=__webpack_require__(128),_jweixin2=_interopRequireDefault(_jweixin),_config=__webpack_require__(9),_MGString=__webpack_require__(28),_MGString2=_interopRequireDefault(_MGString),$form=void 0,$body=void 0,$submit=void 0,$copyright=void 0,$wrapper=void 0,$container=void 0,$scrollContainer=void 0,$window=void 0,$submitForm=void 0,_U=null,_rawInfo=window.SOUL,_vst=window.VST,_jhr=window.JHR,_token=window._T,_OQ=window.OQ,_iframeMessageData={};exports["default"]={isMobile:_isMobile,setPageMode:_setPageMode,setRawInfo:_setRawInfo,updateRawInfo:_updateRawInfo,contentBinder:_containerBinder,setWechat:_setWechat,getStaticPath:_getStaticPath,setMessageIframe:_setMessengerInIframe,getPostSettings:_getIframeSettings,getCurrentWidth:_getCurrentWidth,eventBind:_eventBind},module.exports=exports["default"]},function(module,exports){"use strict";!function(a,b){module.exports=b(a)}(window,function(a,b){function c(b,c,d){a.WeixinJSBridge?WeixinJSBridge.invoke(b,e(c),function(a){g(b,a,d)}):j(b,d)}function d(b,c,d){a.WeixinJSBridge?WeixinJSBridge.on(b,function(a){d&&d.trigger&&d.trigger(a),g(b,a,c)}):d?j(b,d):j(b,c)}function e(a){return a=a||{},a.appId=z.appId,a.verifyAppId=z.appId,a.verifySignType="sha1",a.verifyTimestamp=z.timestamp+"",a.verifyNonceStr=z.nonceStr,a.verifySignature=z.signature,a}function f(a){return{timeStamp:a.timestamp+"",nonceStr:a.nonceStr,"package":a["package"],paySign:a.paySign,signType:a.signType||"SHA1"}}function g(a,b,c){var d,e,f;switch(delete b.err_code,delete b.err_desc,delete b.err_detail,d=b.errMsg,d||(d=b.err_msg,delete b.err_msg,d=h(a,d,c),b.errMsg=d),c=c||{},c._complete&&(c._complete(b),delete c._complete),d=b.errMsg||"",z.debug&&!c.isInnerInvoke&&alert(JSON.stringify(b)),e=d.indexOf(":"),f=d.substring(e+1)){case"ok":c.success&&c.success(b);break;case"cancel":c.cancel&&c.cancel(b);break;default:c.fail&&c.fail(b)}c.complete&&c.complete(b)}function h(a,b){var d,e,f,g;if(b){switch(d=b.indexOf(":"),a){case o.config:e="config";break;case o.openProductSpecificView:e="openProductSpecificView";break;default:e=b.substring(0,d),e=e.replace(/_/g," "),e=e.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}),e=e.substring(0,1).toLowerCase()+e.substring(1),e=e.replace(/ /g,""),-1!=e.indexOf("Wcpay")&&(e=e.replace("Wcpay","WCPay")),f=p[e],f&&(e=f)}g=b.substring(d+1),"confirm"==g&&(g="ok"),"failed"==g&&(g="fail"),-1!=g.indexOf("failed_")&&(g=g.substring(7)),-1!=g.indexOf("fail_")&&(g=g.substring(5)),g=g.replace(/_/g," "),g=g.toLowerCase(),("access denied"==g||"no permission to execute"==g)&&(g="permission denied"),"config"==e&&"function not exist"==g&&(g="ok"),b=e+":"+g}return b}function i(a){var b,c,d,e;if(a){for(b=0,c=a.length;c>b;++b)d=a[b],e=o[d],e&&(a[b]=e);return a}}function j(a,b){if(!(!z.debug||b&&b.isInnerInvoke)){var c=p[a];c&&(a=c),b&&b._complete&&delete b._complete,console.log('"'+a+'",',b||"")}}function k(){if(!("6.0.2">w||y.systemType<0)){var b=new Image;y.appId=z.appId,y.initTime=x.initEndTime-x.initStartTime,y.preVerifyTime=x.preVerifyEndTime-x.preVerifyStartTime,C.getNetworkType({isInnerInvoke:!0,success:function(a){y.networkType=a.networkType;var c="https://open.weixin.qq.com/sdk/report?v="+y.version+"&o="+y.isPreVerifyOk+"&s="+y.systemType+"&c="+y.clientVersion+"&a="+y.appId+"&n="+y.networkType+"&i="+y.initTime+"&p="+y.preVerifyTime+"&u="+y.url;b.src=c}})}}function l(){return(new Date).getTime()}function m(b){t&&(a.WeixinJSBridge?b():q.addEventListener&&q.addEventListener("WeixinJSBridgeReady",b,!1))}function n(){C.invoke||(C.invoke=function(b,c,d){a.WeixinJSBridge&&WeixinJSBridge.invoke(b,e(c),d)},C.on=function(b,c){a.WeixinJSBridge&&WeixinJSBridge.on(b,c)})}var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;if(!a.jWeixin)return o={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},p=function(){var b,a={};for(b in o)a[o[b]]=b;return a}(),q=a.document,r=q.title,s=navigator.userAgent.toLowerCase(),t=-1!=s.indexOf("micromessenger"),u=-1!=s.indexOf("android"),v=-1!=s.indexOf("iphone")||-1!=s.indexOf("ipad"),w=function(){var a=s.match(/micromessenger\/(\d+\.\d+\.\d+)/)||s.match(/micromessenger\/(\d+\.\d+)/);return a?a[1]:""}(),x={initStartTime:l(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},y={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:v?1:u?2:-1,clientVersion:w,url:encodeURIComponent(location.href)},z={},A={_completes:[]},B={state:0,res:{}},m(function(){x.initEndTime=l()}),C={config:function(a){z=a,j("config",a);var b=z.check!==!1;m(function(){var a,d,e;if(b)c(o.config,{verifyJsApiList:i(z.jsApiList)},function(){A._complete=function(a){x.preVerifyEndTime=l(),B.state=1,B.res=a},A.success=function(){y.isPreVerifyOk=0},A.fail=function(a){A._fail?A._fail(a):B.state=-1};var a=A._completes;return a.push(function(){z.debug||k()}),A.complete=function(){for(var c=0,d=a.length;d>c;++c)a[c]();A._completes=[]},A}()),x.preVerifyStartTime=l();else{for(B.state=1,a=A._completes,d=0,e=a.length;e>d;++d)a[d]();A._completes=[]}}),z.beta&&n()},ready:function(a){0!=B.state?a():(A._completes.push(a),!t&&z.debug&&a())},error:function(a){"6.0.2">w||(-1==B.state?a(B.res):A._fail=a)},checkJsApi:function(a){var b=function b(a){var c,d,b=a.checkResult;for(c in b)d=p[c],d&&(b[d]=b[c],delete b[c]);return a};c("checkJsApi",{jsApiList:i(a.jsApiList)},function(){return a._complete=function(a){if(u){var c=a.checkResult;c&&(a.checkResult=JSON.parse(c))}a=b(a)},a}())},onMenuShareTimeline:function(a){d(o.onMenuShareTimeline,{complete:function(){c("shareTimeline",{title:a.title||r,desc:a.title||r,img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareAppMessage:function(a){d(o.onMenuShareAppMessage,{complete:function(){c("sendAppMessage",{title:a.title||r,desc:a.desc||"",link:a.link||location.href,img_url:a.imgUrl||"",type:a.type||"link",data_url:a.dataUrl||""},a)}},a)},onMenuShareQQ:function(a){d(o.onMenuShareQQ,{complete:function(){c("shareQQ",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareWeibo:function(a){d(o.onMenuShareWeibo,{complete:function(){c("shareWeiboApp",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},onMenuShareQZone:function(a){d(o.onMenuShareQZone,{complete:function(){c("shareQZone",{title:a.title||r,desc:a.desc||"",img_url:a.imgUrl||"",link:a.link||location.href},a)}},a)},startRecord:function(a){c("startRecord",{},a)},stopRecord:function(a){c("stopRecord",{},a)},onVoiceRecordEnd:function(a){d("onVoiceRecordEnd",a)},playVoice:function(a){c("playVoice",{localId:a.localId},a)},pauseVoice:function(a){c("pauseVoice",{localId:a.localId},a)},stopVoice:function(a){c("stopVoice",{localId:a.localId},a)},onVoicePlayEnd:function(a){d("onVoicePlayEnd",a)},uploadVoice:function(a){c("uploadVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadVoice:function(a){c("downloadVoice",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},translateVoice:function(a){c("translateVoice",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},chooseImage:function(a){c("chooseImage",{scene:"1|2",count:a.count||9,sizeType:a.sizeType||["original","compressed"],sourceType:a.sourceType||["album","camera"]},function(){return a._complete=function(a){if(u){var b=a.localIds;b&&(a.localIds=JSON.parse(b))}},a}())},previewImage:function(a){c(o.previewImage,{current:a.current,urls:a.urls},a)},uploadImage:function(a){c("uploadImage",{localId:a.localId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},downloadImage:function(a){c("downloadImage",{serverId:a.serverId,isShowProgressTips:0==a.isShowProgressTips?0:1},a)},getNetworkType:function(a){var b=function b(a){var c,d,e,b=a.errMsg;if(a.errMsg="getNetworkType:ok",c=a.subtype,delete a.subtype,c)a.networkType=c;else switch(d=b.indexOf(":"),e=b.substring(d+1)){case"wifi":case"edge":case"wwan":a.networkType=e;break;default:a.errMsg="getNetworkType:fail"}return a};c("getNetworkType",{},function(){return a._complete=function(a){a=b(a)},a}())},openLocation:function(a){c("openLocation",{latitude:a.latitude,longitude:a.longitude,name:a.name||"",address:a.address||"",scale:a.scale||28,infoUrl:a.infoUrl||""},a)},getLocation:function(a){a=a||{},c(o.getLocation,{type:a.type||"wgs84"},function(){return a._complete=function(a){delete a.type},a}())},hideOptionMenu:function(a){c("hideOptionMenu",{},a)},showOptionMenu:function(a){c("showOptionMenu",{},a)},closeWindow:function(a){a=a||{},c("closeWindow",{immediate_close:a.immediateClose||0},a)},hideMenuItems:function(a){c("hideMenuItems",{menuList:a.menuList},a)},showMenuItems:function(a){c("showMenuItems",{menuList:a.menuList},a)},hideAllNonBaseMenuItem:function(a){c("hideAllNonBaseMenuItem",{},a)},showAllNonBaseMenuItem:function(a){c("showAllNonBaseMenuItem",{},a)},scanQRCode:function(a){a=a||{},c("scanQRCode",{needResult:a.needResult||0,scanType:a.scanType||["qrCode","barCode"]},function(){return a._complete=function(a){var b,c;v&&(b=a.resultStr,b&&(c=JSON.parse(b),a.resultStr=c&&c.scan_code&&c.scan_code.scan_result))},a}())},openProductSpecificView:function(a){c(o.openProductSpecificView,{pid:a.productId,view_type:a.viewType||0},a)},addCard:function(a){var e,f,g,h,b=a.cardList,d=[];for(e=0,f=b.length;f>e;++e)g=b[e],h={card_id:g.cardId,card_ext:g.cardExt},d.push(h);c(o.addCard,{card_list:d},function(){return a._complete=function(a){var c,d,e,b=a.card_list;if(b){for(b=JSON.parse(b),c=0,d=b.length;d>c;++c)e=b[c],e.cardId=e.card_id,e.cardExt=e.card_ext,e.isSuccess=!!e.is_succ,delete e.card_id,delete e.card_ext,delete e.is_succ;a.cardList=b,delete a.card_list}},a}())},chooseCard:function(a){c("chooseCard",{app_id:z.appId,location_id:a.shopId||"",sign_type:a.signType||"SHA1",card_id:a.cardId||"",card_type:a.cardType||"",card_sign:a.cardSign,time_stamp:a.timestamp+"",nonce_str:a.nonceStr},function(){return a._complete=function(a){a.cardList=a.choose_card_info,delete a.choose_card_info},a}())},openCard:function(a){var e,f,g,h,b=a.cardList,d=[];for(e=0,f=b.length;f>e;++e)g=b[e],h={card_id:g.cardId,code:g.code},d.push(h);c(o.openCard,{card_list:d},a)},chooseWXPay:function(a){c(o.chooseWXPay,f(a),a)}},b&&(a.wx=a.jWeixin=C),C})}]);